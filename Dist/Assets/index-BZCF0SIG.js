import{g as Fs,a as Ds,E as wi}from"./index-CyB6LARJ.js";let Br=class extends Error{name="BaseError";cause;constructor(e,t={}){super(e,t.cause?{cause:t.cause}:void 0),this.cause=t.cause}};const Qp=Object.freeze(Object.defineProperty({__proto__:null,BaseError:Br},Symbol.toStringTag,{value:"Module"}));class Sa extends Br{name="AddMiniApp.InvalidDomainManifest";constructor(){super("Invalid domain manifest")}}let ka=class extends Br{name="AddMiniApp.RejectedByUser";constructor(){super("Add miniapp rejected by user")}};const tm=Object.freeze(Object.defineProperty({__proto__:null,InvalidDomainManifest:Sa,RejectedByUser:ka},Symbol.toStringTag,{value:"Module"})),rm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),nm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),im=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),lu={disableNativeGestures:!1},sm=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_READY_OPTIONS:lu},Symbol.toStringTag,{value:"Module"})),om=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),am=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));let js=class extends Br{name="SignIn.RejectedByUser";constructor(){super("Sign in rejected by user")}};const um=Object.freeze(Object.defineProperty({__proto__:null,RejectedByUser:js},Symbol.toStringTag,{value:"Module"}));class Aa extends Br{name="SignManifest.RejectedByUser";constructor(){super("Sign manifest rejected by user")}}class Ba extends Br{name="SignManifest.InvalidDomain";constructor(){super("Invalid domain provided")}}class Ia extends Br{name="SignManifest.GenericError";constructor(e="Manifest signing failed"){super(e)}}const lm=Object.freeze(Object.defineProperty({__proto__:null,GenericError:Ia,InvalidDomain:Ba,RejectedByUser:Aa},Symbol.toStringTag,{value:"Module"})),fm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),dm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),hm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),pm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),fu={visible:!1},mm=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_BACK_STATE:fu},Symbol.toStringTag,{value:"Module"})),gm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function du(r){return r.miniapp||r.frame}const ym=Object.freeze(Object.defineProperty({__proto__:null,getMiniAppConfig:du},Symbol.toStringTag,{value:"Module"}));var Ae;(function(r){r.assertEqual=s=>{};function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},r.getValidEnumValues=s=>{const i=r.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),o={};for(const c of i)o[c]=s[c];return r.objectValues(o)},r.objectValues=s=>r.objectKeys(s).map(function(i){return s[i]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},r.find=(s,i)=>{for(const o of s)if(i(o))return o},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Ae||(Ae={}));var _o;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(_o||(_o={}));const ae=Ae.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lr=r=>{switch(typeof r){case"undefined":return ae.undefined;case"string":return ae.string;case"number":return Number.isNaN(r)?ae.nan:ae.number;case"boolean":return ae.boolean;case"function":return ae.function;case"bigint":return ae.bigint;case"symbol":return ae.symbol;case"object":return Array.isArray(r)?ae.array:r===null?ae.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?ae.promise:typeof Map<"u"&&r instanceof Map?ae.map:typeof Set<"u"&&r instanceof Set?ae.set:typeof Date<"u"&&r instanceof Date?ae.date:ae.object;default:return ae.unknown}},J=Ae.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class tr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let c=n,h=0;for(;h<o.path.length;){const b=o.path[h];h===o.path.length-1?(c[b]=c[b]||{_errors:[]},c[b]._errors.push(t(o))):c[b]=c[b]||{_errors:[]},c=c[b],h++}}};return s(this),n}static assert(e){if(!(e instanceof tr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ae.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];t[i]=t[i]||[],t[i].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}tr.create=r=>new tr(r);const ws=(r,e)=>{let t;switch(r.code){case J.invalid_type:r.received===ae.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case J.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Ae.jsonStringifyReplacer)}`;break;case J.unrecognized_keys:t=`Unrecognized key(s) in object: ${Ae.joinValues(r.keys,", ")}`;break;case J.invalid_union:t="Invalid input";break;case J.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Ae.joinValues(r.options)}`;break;case J.invalid_enum_value:t=`Invalid enum value. Expected ${Ae.joinValues(r.options)}, received '${r.received}'`;break;case J.invalid_arguments:t="Invalid function arguments";break;case J.invalid_return_type:t="Invalid function return type";break;case J.invalid_date:t="Invalid date";break;case J.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Ae.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case J.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="bigint"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case J.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case J.custom:t="Invalid input";break;case J.invalid_intersection_types:t="Intersection results could not be merged";break;case J.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case J.not_finite:t="Number must be finite";break;default:t=e.defaultError,Ae.assertNever(r)}return{message:t}};let hu=ws;function pu(){return hu}const mu=r=>{const{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let c="";const h=n.filter(b=>!!b).slice().reverse();for(const b of h)c=b(o,{data:e,defaultError:c}).message;return{...s,path:i,message:c}};function ie(r,e){const t=pu(),n=mu({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===ws?void 0:ws].filter(s=>!!s)});r.common.issues.push(n)}class Nt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return me;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t){const i=await s.key,o=await s.value;n.push({key:i,value:o})}return Nt.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return me;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const me=Object.freeze({status:"aborted"}),on=r=>({status:"dirty",value:r}),Pt=r=>({status:"valid",value:r}),xo=r=>r.status==="aborted",Eo=r=>r.status==="dirty",Kr=r=>r.status==="valid",Wn=r=>typeof Promise<"u"&&r instanceof Promise;var ce;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));class pr{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const So=(r,e)=>{if(Kr(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new tr(r.common.issues);return this._error=t,this._error}}};function Ee(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,c)=>{const{message:h}=r;return o.code==="invalid_enum_value"?{message:h??c.defaultError}:typeof c.data>"u"?{message:h??n??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:h??t??c.defaultError}},description:s}}class ke{get description(){return this._def.description}_getType(e){return lr(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:lr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Nt,ctx:{common:e.parent.common,data:e.data,parsedType:lr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Wn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lr(e)},s=this._parseSync({data:e,path:n.path,parent:n});return So(n,s)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lr(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:t});return Kr(n)?{value:n.value}:{issues:t.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(n=>Kr(n)?{value:n.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lr(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Wn(s)?s:Promise.resolve(s));return So(n,i)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),c=()=>i.addIssue({code:J.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(h=>h?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new Sr({schema:this,typeName:ye.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return er.create(this,this._def)}nullable(){return kr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $t.create(this)}promise(){return Xn.create(this,this._def)}or(e){return Gn.create([this,e],this._def)}and(e){return Jn.create(this,e,this._def)}transform(e){return new Sr({...Ee(this._def),schema:this,typeName:ye.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Qn({...Ee(this._def),innerType:this,defaultValue:t,typeName:ye.ZodDefault})}brand(){return new Ca({typeName:ye.ZodBranded,type:this,...Ee(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new ei({...Ee(this._def),innerType:this,catchValue:t,typeName:ye.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return zs.create(this,e)}readonly(){return ti.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const gu=/^c[^\s-]{8,}$/i,yu=/^[0-9a-z]+$/,wu=/^[0-9A-HJKMNP-TV-Z]{26}$/i,bu=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,vu=/^[a-z0-9_-]{21}$/i,_u=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,xu=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Eu=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Su="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Wi;const ku=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Au=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Bu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Iu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ru=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Mu=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ra="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Tu=new RegExp(`^${Ra}$`);function Ma(r){let e="[0-5]\\d";r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`);const t=r.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Cu(r){return new RegExp(`^${Ma(r)}$`)}function Ou(r){let e=`${Ra}T${Ma(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Lu(r,e){return!!((e==="v4"||!e)&&ku.test(r)||(e==="v6"||!e)&&Bu.test(r))}function Nu(r,e){if(!_u.test(r))return!1;try{const[t]=r.split(".");if(!t)return!1;const n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function Uu(r,e){return!!((e==="v4"||!e)&&Au.test(r)||(e==="v6"||!e)&&Iu.test(r))}class fr extends ke{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ae.string){const i=this._getOrReturnCtx(e);return ie(i,{code:J.invalid_type,expected:ae.string,received:i.parsedType}),me}const n=new Nt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:J.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:J.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,c=e.data.length<i.value;(o||c)&&(s=this._getOrReturnCtx(e,s),o?ie(s,{code:J.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&ie(s,{code:J.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Eu.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"email",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Wi||(Wi=new RegExp(Su,"u")),Wi.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"emoji",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")bu.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"uuid",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")vu.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"nanoid",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")gu.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"cuid",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")yu.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"cuid2",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")wu.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"ulid",code:J.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ie(s,{validation:"url",code:J.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"regex",code:J.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ie(s,{code:J.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ie(s,{code:J.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ie(s,{code:J.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Ou(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{code:J.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Tu.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{code:J.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?Cu(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{code:J.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?xu.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"duration",code:J.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Lu(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"ip",code:J.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?Nu(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"jwt",code:J.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?Uu(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"cidr",code:J.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?Ru.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"base64",code:J.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?Mu.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"base64url",code:J.invalid_string,message:i.message}),n.dirty()):Ae.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:J.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new fr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ce.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ce.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...ce.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ce.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...ce.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ce.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ce.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ce.errToObj(t)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new fr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new fr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new fr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}fr.create=r=>new fr({checks:[],typeName:ye.ZodString,coerce:r?.coerce??!1,...Ee(r)});function Pu(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=Number.parseInt(r.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class Wr extends ke{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ae.number){const i=this._getOrReturnCtx(e);return ie(i,{code:J.invalid_type,expected:ae.number,received:i.parsedType}),me}let n;const s=new Nt;for(const i of this._def.checks)i.kind==="int"?Ae.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ie(n,{code:J.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:J.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:J.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Pu(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),ie(n,{code:J.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ie(n,{code:J.not_finite,message:i.message}),s.dirty()):Ae.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,n,s){return new Wr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ce.toString(s)}]})}_addCheck(e){return new Wr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ae.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Wr.create=r=>new Wr({checks:[],typeName:ye.ZodNumber,coerce:r?.coerce||!1,...Ee(r)});class cn extends ke{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ae.bigint)return this._getInvalidInput(e);let n;const s=new Nt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:J.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:J.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:J.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Ae.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return ie(t,{code:J.invalid_type,expected:ae.bigint,received:t.parsedType}),me}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,n,s){return new cn({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ce.toString(s)}]})}_addCheck(e){return new cn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}cn.create=r=>new cn({checks:[],typeName:ye.ZodBigInt,coerce:r?.coerce??!1,...Ee(r)});class bs extends ke{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ae.boolean){const n=this._getOrReturnCtx(e);return ie(n,{code:J.invalid_type,expected:ae.boolean,received:n.parsedType}),me}return Pt(e.data)}}bs.create=r=>new bs({typeName:ye.ZodBoolean,coerce:r?.coerce||!1,...Ee(r)});class Hn extends ke{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ae.date){const i=this._getOrReturnCtx(e);return ie(i,{code:J.invalid_type,expected:ae.date,received:i.parsedType}),me}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ie(i,{code:J.invalid_date}),me}const n=new Nt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:J.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:J.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Ae.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Hn({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Hn.create=r=>new Hn({checks:[],coerce:r?.coerce||!1,typeName:ye.ZodDate,...Ee(r)});class ko extends ke{_parse(e){if(this._getType(e)!==ae.symbol){const n=this._getOrReturnCtx(e);return ie(n,{code:J.invalid_type,expected:ae.symbol,received:n.parsedType}),me}return Pt(e.data)}}ko.create=r=>new ko({typeName:ye.ZodSymbol,...Ee(r)});class vs extends ke{_parse(e){if(this._getType(e)!==ae.undefined){const n=this._getOrReturnCtx(e);return ie(n,{code:J.invalid_type,expected:ae.undefined,received:n.parsedType}),me}return Pt(e.data)}}vs.create=r=>new vs({typeName:ye.ZodUndefined,...Ee(r)});class _s extends ke{_parse(e){if(this._getType(e)!==ae.null){const n=this._getOrReturnCtx(e);return ie(n,{code:J.invalid_type,expected:ae.null,received:n.parsedType}),me}return Pt(e.data)}}_s.create=r=>new _s({typeName:ye.ZodNull,...Ee(r)});class Ao extends ke{constructor(){super(...arguments),this._any=!0}_parse(e){return Pt(e.data)}}Ao.create=r=>new Ao({typeName:ye.ZodAny,...Ee(r)});class Bo extends ke{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Pt(e.data)}}Bo.create=r=>new Bo({typeName:ye.ZodUnknown,...Ee(r)});class mr extends ke{_parse(e){const t=this._getOrReturnCtx(e);return ie(t,{code:J.invalid_type,expected:ae.never,received:t.parsedType}),me}}mr.create=r=>new mr({typeName:ye.ZodNever,...Ee(r)});class Io extends ke{_parse(e){if(this._getType(e)!==ae.undefined){const n=this._getOrReturnCtx(e);return ie(n,{code:J.invalid_type,expected:ae.void,received:n.parsedType}),me}return Pt(e.data)}}Io.create=r=>new Io({typeName:ye.ZodVoid,...Ee(r)});class $t extends ke{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==ae.array)return ie(t,{code:J.invalid_type,expected:ae.array,received:t.parsedType}),me;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,c=t.data.length<s.exactLength.value;(o||c)&&(ie(t,{code:o?J.too_big:J.too_small,minimum:c?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(ie(t,{code:J.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(ie(t,{code:J.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,c)=>s.type._parseAsync(new pr(t,o,t.path,c)))).then(o=>Nt.mergeArray(n,o));const i=[...t.data].map((o,c)=>s.type._parseSync(new pr(t,o,t.path,c)));return Nt.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new $t({...this._def,minLength:{value:e,message:ce.toString(t)}})}max(e,t){return new $t({...this._def,maxLength:{value:e,message:ce.toString(t)}})}length(e,t){return new $t({...this._def,exactLength:{value:e,message:ce.toString(t)}})}nonempty(e){return this.min(1,e)}}$t.create=(r,e)=>new $t({type:r,minLength:null,maxLength:null,exactLength:null,typeName:ye.ZodArray,...Ee(e)});function Fr(r){if(r instanceof dt){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=er.create(Fr(n))}return new dt({...r._def,shape:()=>e})}else return r instanceof $t?new $t({...r._def,type:Fr(r.element)}):r instanceof er?er.create(Fr(r.unwrap())):r instanceof kr?kr.create(Fr(r.unwrap())):r instanceof xr?xr.create(r.items.map(e=>Fr(e))):r}class dt extends ke{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Ae.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ae.object){const b=this._getOrReturnCtx(e);return ie(b,{code:J.invalid_type,expected:ae.object,received:b.parsedType}),me}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof mr&&this._def.unknownKeys==="strip"))for(const b in s.data)o.includes(b)||c.push(b);const h=[];for(const b of o){const A=i[b],O=s.data[b];h.push({key:{status:"valid",value:b},value:A._parse(new pr(s,O,s.path,b)),alwaysSet:b in s.data})}if(this._def.catchall instanceof mr){const b=this._def.unknownKeys;if(b==="passthrough")for(const A of c)h.push({key:{status:"valid",value:A},value:{status:"valid",value:s.data[A]}});else if(b==="strict")c.length>0&&(ie(s,{code:J.unrecognized_keys,keys:c}),n.dirty());else if(b!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const b=this._def.catchall;for(const A of c){const O=s.data[A];h.push({key:{status:"valid",value:A},value:b._parse(new pr(s,O,s.path,A)),alwaysSet:A in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const b=[];for(const A of h){const O=await A.key,I=await A.value;b.push({key:O,value:I,alwaysSet:A.alwaysSet})}return b}).then(b=>Nt.mergeObjectSync(n,b)):Nt.mergeObjectSync(n,h)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new dt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{const s=this._def.errorMap?.(t,n).message??n.defaultError;return t.code==="unrecognized_keys"?{message:ce.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new dt({...this._def,unknownKeys:"strip"})}passthrough(){return new dt({...this._def,unknownKeys:"passthrough"})}extend(e){return new dt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new dt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ye.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new dt({...this._def,catchall:e})}pick(e){const t={};for(const n of Ae.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new dt({...this._def,shape:()=>t})}omit(e){const t={};for(const n of Ae.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new dt({...this._def,shape:()=>t})}deepPartial(){return Fr(this)}partial(e){const t={};for(const n of Ae.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}return new dt({...this._def,shape:()=>t})}required(e){const t={};for(const n of Ae.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof er;)i=i._def.innerType;t[n]=i}return new dt({...this._def,shape:()=>t})}keyof(){return Ta(Ae.objectKeys(this.shape))}}dt.create=(r,e)=>new dt({shape:()=>r,unknownKeys:"strip",catchall:mr.create(),typeName:ye.ZodObject,...Ee(e)});dt.strictCreate=(r,e)=>new dt({shape:()=>r,unknownKeys:"strict",catchall:mr.create(),typeName:ye.ZodObject,...Ee(e)});dt.lazycreate=(r,e)=>new dt({shape:r,unknownKeys:"strip",catchall:mr.create(),typeName:ye.ZodObject,...Ee(e)});class Gn extends ke{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(const c of i)if(c.result.status==="valid")return c.result;for(const c of i)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const o=i.map(c=>new tr(c.ctx.common.issues));return ie(t,{code:J.invalid_union,unionErrors:o}),me}if(t.common.async)return Promise.all(n.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const h of n){const b={...t,common:{...t.common,issues:[]},parent:null},A=h._parseSync({data:t.data,path:t.path,parent:b});if(A.status==="valid")return A;A.status==="dirty"&&!i&&(i={result:A,ctx:b}),b.common.issues.length&&o.push(b.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const c=o.map(h=>new tr(h));return ie(t,{code:J.invalid_union,unionErrors:c}),me}}get options(){return this._def.options}}Gn.create=(r,e)=>new Gn({options:r,typeName:ye.ZodUnion,...Ee(e)});const Ht=r=>r instanceof Es?Ht(r.schema):r instanceof Sr?Ht(r.innerType()):r instanceof Yn?[r.value]:r instanceof Er?r.options:r instanceof Ss?Ae.objectValues(r.enum):r instanceof Qn?Ht(r._def.innerType):r instanceof vs?[void 0]:r instanceof _s?[null]:r instanceof er?[void 0,...Ht(r.unwrap())]:r instanceof kr?[null,...Ht(r.unwrap())]:r instanceof Ca||r instanceof ti?Ht(r.unwrap()):r instanceof ei?Ht(r._def.innerType):[];class qs extends ke{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ae.object)return ie(t,{code:J.invalid_type,expected:ae.object,received:t.parsedType}),me;const n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(ie(t,{code:J.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const i of t){const o=Ht(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of o){if(s.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);s.set(c,i)}}return new qs({typeName:ye.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...Ee(n)})}}function xs(r,e){const t=lr(r),n=lr(e);if(r===e)return{valid:!0,data:r};if(t===ae.object&&n===ae.object){const s=Ae.objectKeys(e),i=Ae.objectKeys(r).filter(c=>s.indexOf(c)!==-1),o={...r,...e};for(const c of i){const h=xs(r[c],e[c]);if(!h.valid)return{valid:!1};o[c]=h.data}return{valid:!0,data:o}}else if(t===ae.array&&n===ae.array){if(r.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<r.length;i++){const o=r[i],c=e[i],h=xs(o,c);if(!h.valid)return{valid:!1};s.push(h.data)}return{valid:!0,data:s}}else return t===ae.date&&n===ae.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class Jn extends ke{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(xo(i)||xo(o))return me;const c=xs(i.value,o.value);return c.valid?((Eo(i)||Eo(o))&&t.dirty(),{status:t.value,value:c.data}):(ie(n,{code:J.invalid_intersection_types}),me)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Jn.create=(r,e,t)=>new Jn({left:r,right:e,typeName:ye.ZodIntersection,...Ee(t)});class xr extends ke{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.array)return ie(n,{code:J.invalid_type,expected:ae.array,received:n.parsedType}),me;if(n.data.length<this._def.items.length)return ie(n,{code:J.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),me;!this._def.rest&&n.data.length>this._def.items.length&&(ie(n,{code:J.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((o,c)=>{const h=this._def.items[c]||this._def.rest;return h?h._parse(new pr(n,o,n.path,c)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Nt.mergeArray(t,o)):Nt.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new xr({...this._def,rest:e})}}xr.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xr({items:r,typeName:ye.ZodTuple,rest:null,...Ee(e)})};class Ro extends ke{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.map)return ie(n,{code:J.invalid_type,expected:ae.map,received:n.parsedType}),me;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([c,h],b)=>({key:s._parse(new pr(n,c,n.path,[b,"key"])),value:i._parse(new pr(n,h,n.path,[b,"value"]))}));if(n.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const h of o){const b=await h.key,A=await h.value;if(b.status==="aborted"||A.status==="aborted")return me;(b.status==="dirty"||A.status==="dirty")&&t.dirty(),c.set(b.value,A.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const h of o){const b=h.key,A=h.value;if(b.status==="aborted"||A.status==="aborted")return me;(b.status==="dirty"||A.status==="dirty")&&t.dirty(),c.set(b.value,A.value)}return{status:t.value,value:c}}}}Ro.create=(r,e,t)=>new Ro({valueType:e,keyType:r,typeName:ye.ZodMap,...Ee(t)});class un extends ke{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.set)return ie(n,{code:J.invalid_type,expected:ae.set,received:n.parsedType}),me;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(ie(n,{code:J.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(ie(n,{code:J.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(h){const b=new Set;for(const A of h){if(A.status==="aborted")return me;A.status==="dirty"&&t.dirty(),b.add(A.value)}return{status:t.value,value:b}}const c=[...n.data.values()].map((h,b)=>i._parse(new pr(n,h,n.path,b)));return n.common.async?Promise.all(c).then(h=>o(h)):o(c)}min(e,t){return new un({...this._def,minSize:{value:e,message:ce.toString(t)}})}max(e,t){return new un({...this._def,maxSize:{value:e,message:ce.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}un.create=(r,e)=>new un({valueType:r,minSize:null,maxSize:null,typeName:ye.ZodSet,...Ee(e)});class Es extends ke{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Es.create=(r,e)=>new Es({getter:r,typeName:ye.ZodLazy,...Ee(e)});class Yn extends ke{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ie(t,{received:t.data,code:J.invalid_literal,expected:this._def.value}),me}return{status:"valid",value:e.data}}get value(){return this._def.value}}Yn.create=(r,e)=>new Yn({value:r,typeName:ye.ZodLiteral,...Ee(e)});function Ta(r,e){return new Er({values:r,typeName:ye.ZodEnum,...Ee(e)})}class Er extends ke{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return ie(t,{expected:Ae.joinValues(n),received:t.parsedType,code:J.invalid_type}),me}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ie(t,{received:t.data,code:J.invalid_enum_value,options:n}),me}return Pt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Er.create(e,{...this._def,...t})}exclude(e,t=this._def){return Er.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Er.create=Ta;class Ss extends ke{_parse(e){const t=Ae.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ae.string&&n.parsedType!==ae.number){const s=Ae.objectValues(t);return ie(n,{expected:Ae.joinValues(s),received:n.parsedType,code:J.invalid_type}),me}if(this._cache||(this._cache=new Set(Ae.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Ae.objectValues(t);return ie(n,{received:n.data,code:J.invalid_enum_value,options:s}),me}return Pt(e.data)}get enum(){return this._def.values}}Ss.create=(r,e)=>new Ss({values:r,typeName:ye.ZodNativeEnum,...Ee(e)});class Xn extends ke{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ae.promise&&t.common.async===!1)return ie(t,{code:J.invalid_type,expected:ae.promise,received:t.parsedType}),me;const n=t.parsedType===ae.promise?t.data:Promise.resolve(t.data);return Pt(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Xn.create=(r,e)=>new Xn({type:r,typeName:ye.ZodPromise,...Ee(e)});class Sr extends ke{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ie(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async c=>{if(t.value==="aborted")return me;const h=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return h.status==="aborted"?me:h.status==="dirty"||t.value==="dirty"?on(h.value):h});{if(t.value==="aborted")return me;const c=this._def.schema._parseSync({data:o,path:n.path,parent:n});return c.status==="aborted"?me:c.status==="dirty"||t.value==="dirty"?on(c.value):c}}if(s.type==="refinement"){const o=c=>{const h=s.refinement(c,i);if(n.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?me:(c.status==="dirty"&&t.dirty(),o(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?me:(c.status==="dirty"&&t.dirty(),o(c.value).then(()=>({status:t.value,value:c.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Kr(o))return me;const c=s.transform(o.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Kr(o)?Promise.resolve(s.transform(o.value,i)).then(c=>({status:t.value,value:c})):me);Ae.assertNever(s)}}Sr.create=(r,e,t)=>new Sr({schema:r,typeName:ye.ZodEffects,effect:e,...Ee(t)});Sr.createWithPreprocess=(r,e,t)=>new Sr({schema:e,effect:{type:"preprocess",transform:r},typeName:ye.ZodEffects,...Ee(t)});class er extends ke{_parse(e){return this._getType(e)===ae.undefined?Pt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}er.create=(r,e)=>new er({innerType:r,typeName:ye.ZodOptional,...Ee(e)});class kr extends ke{_parse(e){return this._getType(e)===ae.null?Pt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}kr.create=(r,e)=>new kr({innerType:r,typeName:ye.ZodNullable,...Ee(e)});class Qn extends ke{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===ae.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Qn.create=(r,e)=>new Qn({innerType:r,typeName:ye.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ee(e)});class ei extends ke{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Wn(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new tr(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new tr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ei.create=(r,e)=>new ei({innerType:r,typeName:ye.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ee(e)});class Mo extends ke{_parse(e){if(this._getType(e)!==ae.nan){const n=this._getOrReturnCtx(e);return ie(n,{code:J.invalid_type,expected:ae.nan,received:n.parsedType}),me}return{status:"valid",value:e.data}}}Mo.create=r=>new Mo({typeName:ye.ZodNaN,...Ee(r)});class Ca extends ke{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class zs extends ke{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?me:i.status==="dirty"?(t.dirty(),on(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?me:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new zs({in:e,out:t,typeName:ye.ZodPipeline})}}class ti extends ke{_parse(e){const t=this._def.innerType._parse(e),n=s=>(Kr(s)&&(s.value=Object.freeze(s.value)),s);return Wn(t)?t.then(s=>n(s)):n(t)}unwrap(){return this._def.innerType}}ti.create=(r,e)=>new ti({innerType:r,typeName:ye.ZodReadonly,...Ee(e)});var ye;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(ye||(ye={}));const We=fr.create,Oa=Wr.create,Fu=bs.create;mr.create;const vr=$t.create,wt=dt.create,ri=Gn.create,La=qs.create;Jn.create;xr.create;const kt=Yn.create,$s=Er.create;Xn.create;er.create;kr.create;const Du=/[@#$%^&*+=/\\|~]/,ju=/(!{2,}|\?{2,}|-{2,})/,qu=/[\u{1F300}-\u{1F9FF}]|[\u{2702}-\u{27B0}]|[\u{2600}-\u{26FF}]|[\u{2B00}-\u{2BFF}]/u,en=({max:r,noSpaces:e}={})=>(e?We().max(r??Number.POSITIVE_INFINITY).regex(/^\S*$/,"Spaces are not allowed"):We().max(r??Number.POSITIVE_INFINITY)).refine(n=>!qu.test(n),{message:"Emojis and symbols are not allowed"}).refine(n=>!Du.test(n),{message:"Special characters (@, #, $, %, ^, &, *, +, =, /, \\, |, ~, , ) are not allowed"}).refine(n=>!ju.test(n),{message:"Repeated punctuations (!!, ??, --) are not allowed"}),At=We().url().startsWith("https://",{message:"Must be an https url"}).max(1024).refine(r=>!r.includes(" "),{message:"URL must not contain spaces"}).refine(r=>{try{const e=new URL(r).hostname;return!(e==="localhost"||e.endsWith(".localhost")||/^(\d{1,3}\.){3}\d{1,3}$/.test(e)||e.startsWith("[")&&e.endsWith("]"))}catch{return!1}},{message:"URL must not use IP addresses or localhost"}),Vs=We().max(32),Na=We().max(32),zu=/^[-a-z0-9]{3,8}:[-_a-zA-Z0-9]{1,32}\/(?:[-a-z0-9]{3,8}:[-.%a-zA-Z0-9]{1,128}(?:\/[-.%a-zA-Z0-9]{1,78})?|native)$/,$u=We().regex(zu,{message:"Invalid CAIP-19 asset ID"}),Zs=We().regex(/^#([0-9A-F]{3}|[0-9A-F]{6})$/i,{message:"Invalid hex color code. It should be in the format #RRGGBB or #RGB."}),Vu=/^(?!.*\.\.)([a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,Zu=We().max(1024).regex(Vu,{message:"Must be a valid domain name (e.g., example.com, sub.example.com)"}).refine(r=>!r.includes("://"),{message:"Domain must not include protocol (http://, https://, etc.)"}).refine(r=>!r.includes("/"),{message:"Domain must not include path separators"}).refine(r=>!r.includes("@"),{message:"Domain must not include @ symbol"}).refine(r=>!r.includes(":"),{message:"Domain must not include port numbers"}),Ku=ri([kt("1:1"),kt("3:2")]),Wu=wt({header:We(),payload:We(),signature:We()}),wm=wt({fid:Oa(),type:kt("app_key"),key:We().startsWith("0x")}),Hu=wt({type:kt("launch_frame"),name:Vs,url:At.optional(),splashImageUrl:At.optional(),splashBackgroundColor:Zs.optional()}),Gu=wt({type:kt("launch_miniapp"),name:Vs,url:At.optional(),splashImageUrl:At.optional(),splashBackgroundColor:Zs.optional()}),Ju=wt({type:kt("view_token"),token:$u}),Yu=La("type",[Gu,Ju,Hu]),Xu=wt({title:Na,action:Yu}),Qu=wt({version:ri([We(),Oa()]).transform(r=>String(r)).pipe(ri([kt("next"),kt("1")])),imageUrl:At,aspectRatio:Ku.optional(),button:Xu}),el=r=>Qu.safeParse(r),bm=el,Ua=wt({url:We(),token:We()}),vm=wt({notificationId:We().max(128),title:We().max(32),body:We().max(128),targetUrl:At,tokens:We().array().max(100)}),_m=wt({result:wt({successfulTokens:vr(We()),invalidTokens:vr(We()),rateLimitedTokens:vr(We())})}),tl=wt({event:kt("miniapp_added"),notificationDetails:Ua.optional()}),rl=wt({event:kt("miniapp_removed")}),nl=wt({event:kt("notifications_enabled"),notificationDetails:Ua.required()}),il=wt({event:kt("notifications_disabled")}),xm=La("event",[tl,rl,nl,il]),Em=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),sl=["wallet.getEthereumProvider","wallet.getSolanaProvider","actions.ready","actions.openUrl","actions.close","actions.setPrimaryButton","actions.addMiniApp","actions.signIn","actions.viewCast","actions.viewProfile","actions.composeCast","actions.viewToken","actions.sendToken","actions.swapToken","actions.openMiniApp","actions.requestCameraAndMicrophoneAccess","experimental.signManifest","haptics.impactOccurred","haptics.notificationOccurred","haptics.selectionChanged","back"],ol=["games","social","finance","utility","productivity","health-fitness","news-media","music","shopping","education","developer-tools","entertainment","art-creativity"],al=$s(ol),cl=ri([kt("0.0.0"),kt("0.0.1"),kt("1"),kt("next")]),ul=en({max:30}),ll=en({max:170}),fl=vr(At).max(3),dl=vr(en({max:20,noSpaces:!0})).max(5),hl=en({max:30}),pl=en({max:30}),ml=en({max:100}),gl=Fu(),yl=["eip155:1","eip155:8453","eip155:42161","eip155:421614","eip155:84532","eip155:666666666","eip155:100","eip155:10","eip155:11155420","eip155:137","eip155:11155111","eip155:7777777","eip155:130","eip155:10143","eip155:42220","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"];function Pa(r){const e=new Set(r);return Array.from(e)}const wl=vr($s(yl)).transform(Pa),bl=vr($s(sl)).transform(Pa),To=wt({version:cl,name:Vs,iconUrl:At,homeUrl:At,imageUrl:At.optional(),buttonTitle:Na.optional(),splashImageUrl:At.optional(),splashBackgroundColor:Zs.optional(),webhookUrl:At.optional(),subtitle:ul.optional(),description:ll.optional(),screenshotUrls:fl.optional(),primaryCategory:al.optional(),tags:dl.optional(),heroImageUrl:At.optional(),tagline:hl.optional(),ogTitle:pl.optional(),ogDescription:ml.optional(),ogImageUrl:At.optional(),noindex:gl.optional(),requiredChains:wl.optional(),requiredCapabilities:bl.optional(),castShareUrl:At.optional(),canonicalDomain:Zu.optional()}).refine(r=>{if(r.castShareUrl===void 0)return!0;try{const e=new URL(r.homeUrl).hostname,t=new URL(r.castShareUrl).hostname;return e===t}catch{return!1}},{message:"castShareUrl must have the same domain as homeUrl",path:["castShareUrl"]}),Sm=wt({accountAssociation:Wu,miniapp:To.optional(),frame:To.optional()}).refine(r=>r.frame&&r.miniapp?JSON.stringify(r.frame)===JSON.stringify(r.miniapp):!0,{message:'If both "frame" and "miniapp" are provided, they must be identical',path:["frame","miniapp"]}).transform(r=>({...r,frame:r.frame??r.miniapp}));var Hi={},nn={},Co;function vl(){if(Co)return nn;Co=1,nn.byteLength=c,nn.toByteArray=b,nn.fromByteArray=I;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)r[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(k){var C=k.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=k.indexOf("=");T===-1&&(T=C);var F=T===C?0:4-T%4;return[T,F]}function c(k){var C=o(k),T=C[0],F=C[1];return(T+F)*3/4-F}function h(k,C,T){return(C+T)*3/4-T}function b(k){var C,T=o(k),F=T[0],q=T[1],H=new t(h(k,F,q)),Z=0,te=q>0?F-4:F,X;for(X=0;X<te;X+=4)C=e[k.charCodeAt(X)]<<18|e[k.charCodeAt(X+1)]<<12|e[k.charCodeAt(X+2)]<<6|e[k.charCodeAt(X+3)],H[Z++]=C>>16&255,H[Z++]=C>>8&255,H[Z++]=C&255;return q===2&&(C=e[k.charCodeAt(X)]<<2|e[k.charCodeAt(X+1)]>>4,H[Z++]=C&255),q===1&&(C=e[k.charCodeAt(X)]<<10|e[k.charCodeAt(X+1)]<<4|e[k.charCodeAt(X+2)]>>2,H[Z++]=C>>8&255,H[Z++]=C&255),H}function A(k){return r[k>>18&63]+r[k>>12&63]+r[k>>6&63]+r[k&63]}function O(k,C,T){for(var F,q=[],H=C;H<T;H+=3)F=(k[H]<<16&16711680)+(k[H+1]<<8&65280)+(k[H+2]&255),q.push(A(F));return q.join("")}function I(k){for(var C,T=k.length,F=T%3,q=[],H=16383,Z=0,te=T-F;Z<te;Z+=H)q.push(O(k,Z,Z+H>te?te:Z+H));return F===1?(C=k[T-1],q.push(r[C>>2]+r[C<<4&63]+"==")):F===2&&(C=(k[T-2]<<8)+k[T-1],q.push(r[C>>10]+r[C>>4&63]+r[C<<2&63]+"=")),q.join("")}return nn}var Ln={};var Oo;function _l(){return Oo||(Oo=1,Ln.read=function(r,e,t,n,s){var i,o,c=s*8-n-1,h=(1<<c)-1,b=h>>1,A=-7,O=t?s-1:0,I=t?-1:1,k=r[e+O];for(O+=I,i=k&(1<<-A)-1,k>>=-A,A+=c;A>0;i=i*256+r[e+O],O+=I,A-=8);for(o=i&(1<<-A)-1,i>>=-A,A+=n;A>0;o=o*256+r[e+O],O+=I,A-=8);if(i===0)i=1-b;else{if(i===h)return o?NaN:(k?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-b}return(k?-1:1)*o*Math.pow(2,i-n)},Ln.write=function(r,e,t,n,s,i){var o,c,h,b=i*8-s-1,A=(1<<b)-1,O=A>>1,I=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=n?0:i-1,C=n?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,o=A):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+O>=1?e+=I/h:e+=I*Math.pow(2,1-O),e*h>=2&&(o++,h/=2),o+O>=A?(c=0,o=A):o+O>=1?(c=(e*h-1)*Math.pow(2,s),o=o+O):(c=e*Math.pow(2,O-1)*Math.pow(2,s),o=0));s>=8;r[t+k]=c&255,k+=C,c/=256,s-=8);for(o=o<<s|c,b+=s;b>0;r[t+k]=o&255,k+=C,o/=256,b-=8);r[t+k-C]|=T*128}),Ln}var Lo;function Ks(){return Lo||(Lo=1,(function(r){const e=vl(),t=_l(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=H,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const y=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(y,f),y.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(y){if(y>s)throw new RangeError('The value "'+y+'" is invalid for option "size"');const f=new Uint8Array(y);return Object.setPrototypeOf(f,c.prototype),f}function c(y,f,p){if(typeof y=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(y)}return h(y,f,p)}c.poolSize=8192;function h(y,f,p){if(typeof y=="string")return I(y,f);if(ArrayBuffer.isView(y))return C(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(Tt(y,ArrayBuffer)||y&&Tt(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Tt(y,SharedArrayBuffer)||y&&Tt(y.buffer,SharedArrayBuffer)))return T(y,f,p);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const x=y.valueOf&&y.valueOf();if(x!=null&&x!==y)return c.from(x,f,p);const N=F(y);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return c.from(y[Symbol.toPrimitive]("string"),f,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}c.from=function(y,f,p){return h(y,f,p)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function b(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function A(y,f,p){return b(y),y<=0?o(y):f!==void 0?typeof p=="string"?o(y).fill(f,p):o(y).fill(f):o(y)}c.alloc=function(y,f,p){return A(y,f,p)};function O(y){return b(y),o(y<0?0:q(y)|0)}c.allocUnsafe=function(y){return O(y)},c.allocUnsafeSlow=function(y){return O(y)};function I(y,f){if((typeof f!="string"||f==="")&&(f="utf8"),!c.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const p=Z(y,f)|0;let x=o(p);const N=x.write(y,f);return N!==p&&(x=x.slice(0,N)),x}function k(y){const f=y.length<0?0:q(y.length)|0,p=o(f);for(let x=0;x<f;x+=1)p[x]=y[x]&255;return p}function C(y){if(Tt(y,Uint8Array)){const f=new Uint8Array(y);return T(f.buffer,f.byteOffset,f.byteLength)}return k(y)}function T(y,f,p){if(f<0||y.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<f+(p||0))throw new RangeError('"length" is outside of buffer bounds');let x;return f===void 0&&p===void 0?x=new Uint8Array(y):p===void 0?x=new Uint8Array(y,f):x=new Uint8Array(y,f,p),Object.setPrototypeOf(x,c.prototype),x}function F(y){if(c.isBuffer(y)){const f=q(y.length)|0,p=o(f);return p.length===0||y.copy(p,0,0,f),p}if(y.length!==void 0)return typeof y.length!="number"||Ue(y.length)?o(0):k(y);if(y.type==="Buffer"&&Array.isArray(y.data))return k(y.data)}function q(y){if(y>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return y|0}function H(y){return+y!=y&&(y=0),c.alloc(+y)}c.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==c.prototype},c.compare=function(f,p){if(Tt(f,Uint8Array)&&(f=c.from(f,f.offset,f.byteLength)),Tt(p,Uint8Array)&&(p=c.from(p,p.offset,p.byteLength)),!c.isBuffer(f)||!c.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===p)return 0;let x=f.length,N=p.length;for(let D=0,K=Math.min(x,N);D<K;++D)if(f[D]!==p[D]){x=f[D],N=p[D];break}return x<N?-1:N<x?1:0},c.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(f,p){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return c.alloc(0);let x;if(p===void 0)for(p=0,x=0;x<f.length;++x)p+=f[x].length;const N=c.allocUnsafe(p);let D=0;for(x=0;x<f.length;++x){let K=f[x];if(Tt(K,Uint8Array))D+K.length>N.length?(c.isBuffer(K)||(K=c.from(K)),K.copy(N,D)):Uint8Array.prototype.set.call(N,K,D);else if(c.isBuffer(K))K.copy(N,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=K.length}return N};function Z(y,f){if(c.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||Tt(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const p=y.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&p===0)return 0;let N=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return Ne(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Fe(y).length;default:if(N)return x?-1:Ne(y).length;f=(""+f).toLowerCase(),N=!0}}c.byteLength=Z;function te(y,f,p){let x=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,f>>>=0,p<=f))return"";for(y||(y="utf8");;)switch(y){case"hex":return B(this,f,p);case"utf8":case"utf-8":return a(this,f,p);case"ascii":return _(this,f,p);case"latin1":case"binary":return E(this,f,p);case"base64":return g(this,f,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,f,p);default:if(x)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),x=!0}}c.prototype._isBuffer=!0;function X(y,f,p){const x=y[f];y[f]=y[p],y[p]=x}c.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<f;p+=2)X(this,p,p+1);return this},c.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<f;p+=4)X(this,p,p+3),X(this,p+1,p+2);return this},c.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<f;p+=8)X(this,p,p+7),X(this,p+1,p+6),X(this,p+2,p+5),X(this,p+3,p+4);return this},c.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?a(this,0,f):te.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(f){if(!c.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:c.compare(this,f)===0},c.prototype.inspect=function(){let f="";const p=r.INSPECT_MAX_BYTES;return f=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(f+=" ... "),"<Buffer "+f+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(f,p,x,N,D){if(Tt(f,Uint8Array)&&(f=c.from(f,f.offset,f.byteLength)),!c.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(p===void 0&&(p=0),x===void 0&&(x=f?f.length:0),N===void 0&&(N=0),D===void 0&&(D=this.length),p<0||x>f.length||N<0||D>this.length)throw new RangeError("out of range index");if(N>=D&&p>=x)return 0;if(N>=D)return-1;if(p>=x)return 1;if(p>>>=0,x>>>=0,N>>>=0,D>>>=0,this===f)return 0;let K=D-N,ve=x-p;const be=Math.min(K,ve),ge=this.slice(N,D),Le=f.slice(p,x);for(let de=0;de<be;++de)if(ge[de]!==Le[de]){K=ge[de],ve=Le[de];break}return K<ve?-1:ve<K?1:0};function oe(y,f,p,x,N){if(y.length===0)return-1;if(typeof p=="string"?(x=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Ue(p)&&(p=N?0:y.length-1),p<0&&(p=y.length+p),p>=y.length){if(N)return-1;p=y.length-1}else if(p<0)if(N)p=0;else return-1;if(typeof f=="string"&&(f=c.from(f,x)),c.isBuffer(f))return f.length===0?-1:pe(y,f,p,x,N);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(y,f,p):Uint8Array.prototype.lastIndexOf.call(y,f,p):pe(y,[f],p,x,N);throw new TypeError("val must be string, number or Buffer")}function pe(y,f,p,x,N){let D=1,K=y.length,ve=f.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(y.length<2||f.length<2)return-1;D=2,K/=2,ve/=2,p/=2}function be(Le,de){return D===1?Le[de]:Le.readUInt16BE(de*D)}let ge;if(N){let Le=-1;for(ge=p;ge<K;ge++)if(be(y,ge)===be(f,Le===-1?0:ge-Le)){if(Le===-1&&(Le=ge),ge-Le+1===ve)return Le*D}else Le!==-1&&(ge-=ge-Le),Le=-1}else for(p+ve>K&&(p=K-ve),ge=p;ge>=0;ge--){let Le=!0;for(let de=0;de<ve;de++)if(be(y,ge+de)!==be(f,de)){Le=!1;break}if(Le)return ge}return-1}c.prototype.includes=function(f,p,x){return this.indexOf(f,p,x)!==-1},c.prototype.indexOf=function(f,p,x){return oe(this,f,p,x,!0)},c.prototype.lastIndexOf=function(f,p,x){return oe(this,f,p,x,!1)};function le(y,f,p,x){p=Number(p)||0;const N=y.length-p;x?(x=Number(x),x>N&&(x=N)):x=N;const D=f.length;x>D/2&&(x=D/2);let K;for(K=0;K<x;++K){const ve=parseInt(f.substr(K*2,2),16);if(Ue(ve))return K;y[p+K]=ve}return K}function L(y,f,p,x){return Oe(Ne(f,y.length-p),y,p,x)}function U(y,f,p,x){return Oe(ze(f),y,p,x)}function z(y,f,p,x){return Oe(Fe(f),y,p,x)}function V(y,f,p,x){return Oe(On(f,y.length-p),y,p,x)}c.prototype.write=function(f,p,x,N){if(p===void 0)N="utf8",x=this.length,p=0;else if(x===void 0&&typeof p=="string")N=p,x=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(x)?(x=x>>>0,N===void 0&&(N="utf8")):(N=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const D=this.length-p;if((x===void 0||x>D)&&(x=D),f.length>0&&(x<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");let K=!1;for(;;)switch(N){case"hex":return le(this,f,p,x);case"utf8":case"utf-8":return L(this,f,p,x);case"ascii":case"latin1":case"binary":return U(this,f,p,x);case"base64":return z(this,f,p,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,f,p,x);default:if(K)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),K=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function g(y,f,p){return f===0&&p===y.length?e.fromByteArray(y):e.fromByteArray(y.slice(f,p))}function a(y,f,p){p=Math.min(y.length,p);const x=[];let N=f;for(;N<p;){const D=y[N];let K=null,ve=D>239?4:D>223?3:D>191?2:1;if(N+ve<=p){let be,ge,Le,de;switch(ve){case 1:D<128&&(K=D);break;case 2:be=y[N+1],(be&192)===128&&(de=(D&31)<<6|be&63,de>127&&(K=de));break;case 3:be=y[N+1],ge=y[N+2],(be&192)===128&&(ge&192)===128&&(de=(D&15)<<12|(be&63)<<6|ge&63,de>2047&&(de<55296||de>57343)&&(K=de));break;case 4:be=y[N+1],ge=y[N+2],Le=y[N+3],(be&192)===128&&(ge&192)===128&&(Le&192)===128&&(de=(D&15)<<18|(be&63)<<12|(ge&63)<<6|Le&63,de>65535&&de<1114112&&(K=de))}}K===null?(K=65533,ve=1):K>65535&&(K-=65536,x.push(K>>>10&1023|55296),K=56320|K&1023),x.push(K),N+=ve}return m(x)}const d=4096;function m(y){const f=y.length;if(f<=d)return String.fromCharCode.apply(String,y);let p="",x=0;for(;x<f;)p+=String.fromCharCode.apply(String,y.slice(x,x+=d));return p}function _(y,f,p){let x="";p=Math.min(y.length,p);for(let N=f;N<p;++N)x+=String.fromCharCode(y[N]&127);return x}function E(y,f,p){let x="";p=Math.min(y.length,p);for(let N=f;N<p;++N)x+=String.fromCharCode(y[N]);return x}function B(y,f,p){const x=y.length;(!f||f<0)&&(f=0),(!p||p<0||p>x)&&(p=x);let N="";for(let D=f;D<p;++D)N+=$e[y[D]];return N}function M(y,f,p){const x=y.slice(f,p);let N="";for(let D=0;D<x.length-1;D+=2)N+=String.fromCharCode(x[D]+x[D+1]*256);return N}c.prototype.slice=function(f,p){const x=this.length;f=~~f,p=p===void 0?x:~~p,f<0?(f+=x,f<0&&(f=0)):f>x&&(f=x),p<0?(p+=x,p<0&&(p=0)):p>x&&(p=x),p<f&&(p=f);const N=this.subarray(f,p);return Object.setPrototypeOf(N,c.prototype),N};function v(y,f,p){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+f>p)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(f,p,x){f=f>>>0,p=p>>>0,x||v(f,p,this.length);let N=this[f],D=1,K=0;for(;++K<p&&(D*=256);)N+=this[f+K]*D;return N},c.prototype.readUintBE=c.prototype.readUIntBE=function(f,p,x){f=f>>>0,p=p>>>0,x||v(f,p,this.length);let N=this[f+--p],D=1;for(;p>0&&(D*=256);)N+=this[f+--p]*D;return N},c.prototype.readUint8=c.prototype.readUInt8=function(f,p){return f=f>>>0,p||v(f,1,this.length),this[f]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(f,p){return f=f>>>0,p||v(f,2,this.length),this[f]|this[f+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(f,p){return f=f>>>0,p||v(f,2,this.length),this[f]<<8|this[f+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(f,p){return f=f>>>0,p||v(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(f,p){return f=f>>>0,p||v(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},c.prototype.readBigUInt64LE=Ft(function(f){f=f>>>0,Ut(f,"offset");const p=this[f],x=this[f+7];(p===void 0||x===void 0)&&Te(f,this.length-8);const N=p+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,D=this[++f]+this[++f]*2**8+this[++f]*2**16+x*2**24;return BigInt(N)+(BigInt(D)<<BigInt(32))}),c.prototype.readBigUInt64BE=Ft(function(f){f=f>>>0,Ut(f,"offset");const p=this[f],x=this[f+7];(p===void 0||x===void 0)&&Te(f,this.length-8);const N=p*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],D=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+x;return(BigInt(N)<<BigInt(32))+BigInt(D)}),c.prototype.readIntLE=function(f,p,x){f=f>>>0,p=p>>>0,x||v(f,p,this.length);let N=this[f],D=1,K=0;for(;++K<p&&(D*=256);)N+=this[f+K]*D;return D*=128,N>=D&&(N-=Math.pow(2,8*p)),N},c.prototype.readIntBE=function(f,p,x){f=f>>>0,p=p>>>0,x||v(f,p,this.length);let N=p,D=1,K=this[f+--N];for(;N>0&&(D*=256);)K+=this[f+--N]*D;return D*=128,K>=D&&(K-=Math.pow(2,8*p)),K},c.prototype.readInt8=function(f,p){return f=f>>>0,p||v(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},c.prototype.readInt16LE=function(f,p){f=f>>>0,p||v(f,2,this.length);const x=this[f]|this[f+1]<<8;return x&32768?x|4294901760:x},c.prototype.readInt16BE=function(f,p){f=f>>>0,p||v(f,2,this.length);const x=this[f+1]|this[f]<<8;return x&32768?x|4294901760:x},c.prototype.readInt32LE=function(f,p){return f=f>>>0,p||v(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},c.prototype.readInt32BE=function(f,p){return f=f>>>0,p||v(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},c.prototype.readBigInt64LE=Ft(function(f){f=f>>>0,Ut(f,"offset");const p=this[f],x=this[f+7];(p===void 0||x===void 0)&&Te(f,this.length-8);const N=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(x<<24);return(BigInt(N)<<BigInt(32))+BigInt(p+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),c.prototype.readBigInt64BE=Ft(function(f){f=f>>>0,Ut(f,"offset");const p=this[f],x=this[f+7];(p===void 0||x===void 0)&&Te(f,this.length-8);const N=(p<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(N)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+x)}),c.prototype.readFloatLE=function(f,p){return f=f>>>0,p||v(f,4,this.length),t.read(this,f,!0,23,4)},c.prototype.readFloatBE=function(f,p){return f=f>>>0,p||v(f,4,this.length),t.read(this,f,!1,23,4)},c.prototype.readDoubleLE=function(f,p){return f=f>>>0,p||v(f,8,this.length),t.read(this,f,!0,52,8)},c.prototype.readDoubleBE=function(f,p){return f=f>>>0,p||v(f,8,this.length),t.read(this,f,!1,52,8)};function u(y,f,p,x,N,D){if(!c.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>N||f<D)throw new RangeError('"value" argument is out of bounds');if(p+x>y.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(f,p,x,N){if(f=+f,p=p>>>0,x=x>>>0,!N){const ve=Math.pow(2,8*x)-1;u(this,f,p,x,ve,0)}let D=1,K=0;for(this[p]=f&255;++K<x&&(D*=256);)this[p+K]=f/D&255;return p+x},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(f,p,x,N){if(f=+f,p=p>>>0,x=x>>>0,!N){const ve=Math.pow(2,8*x)-1;u(this,f,p,x,ve,0)}let D=x-1,K=1;for(this[p+D]=f&255;--D>=0&&(K*=256);)this[p+D]=f/K&255;return p+x},c.prototype.writeUint8=c.prototype.writeUInt8=function(f,p,x){return f=+f,p=p>>>0,x||u(this,f,p,1,255,0),this[p]=f&255,p+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(f,p,x){return f=+f,p=p>>>0,x||u(this,f,p,2,65535,0),this[p]=f&255,this[p+1]=f>>>8,p+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(f,p,x){return f=+f,p=p>>>0,x||u(this,f,p,2,65535,0),this[p]=f>>>8,this[p+1]=f&255,p+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(f,p,x){return f=+f,p=p>>>0,x||u(this,f,p,4,4294967295,0),this[p+3]=f>>>24,this[p+2]=f>>>16,this[p+1]=f>>>8,this[p]=f&255,p+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(f,p,x){return f=+f,p=p>>>0,x||u(this,f,p,4,4294967295,0),this[p]=f>>>24,this[p+1]=f>>>16,this[p+2]=f>>>8,this[p+3]=f&255,p+4};function l(y,f,p,x,N){Me(f,x,N,y,p,7);let D=Number(f&BigInt(4294967295));y[p++]=D,D=D>>8,y[p++]=D,D=D>>8,y[p++]=D,D=D>>8,y[p++]=D;let K=Number(f>>BigInt(32)&BigInt(4294967295));return y[p++]=K,K=K>>8,y[p++]=K,K=K>>8,y[p++]=K,K=K>>8,y[p++]=K,p}function w(y,f,p,x,N){Me(f,x,N,y,p,7);let D=Number(f&BigInt(4294967295));y[p+7]=D,D=D>>8,y[p+6]=D,D=D>>8,y[p+5]=D,D=D>>8,y[p+4]=D;let K=Number(f>>BigInt(32)&BigInt(4294967295));return y[p+3]=K,K=K>>8,y[p+2]=K,K=K>>8,y[p+1]=K,K=K>>8,y[p]=K,p+8}c.prototype.writeBigUInt64LE=Ft(function(f,p=0){return l(this,f,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Ft(function(f,p=0){return w(this,f,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(f,p,x,N){if(f=+f,p=p>>>0,!N){const be=Math.pow(2,8*x-1);u(this,f,p,x,be-1,-be)}let D=0,K=1,ve=0;for(this[p]=f&255;++D<x&&(K*=256);)f<0&&ve===0&&this[p+D-1]!==0&&(ve=1),this[p+D]=(f/K>>0)-ve&255;return p+x},c.prototype.writeIntBE=function(f,p,x,N){if(f=+f,p=p>>>0,!N){const be=Math.pow(2,8*x-1);u(this,f,p,x,be-1,-be)}let D=x-1,K=1,ve=0;for(this[p+D]=f&255;--D>=0&&(K*=256);)f<0&&ve===0&&this[p+D+1]!==0&&(ve=1),this[p+D]=(f/K>>0)-ve&255;return p+x},c.prototype.writeInt8=function(f,p,x){return f=+f,p=p>>>0,x||u(this,f,p,1,127,-128),f<0&&(f=255+f+1),this[p]=f&255,p+1},c.prototype.writeInt16LE=function(f,p,x){return f=+f,p=p>>>0,x||u(this,f,p,2,32767,-32768),this[p]=f&255,this[p+1]=f>>>8,p+2},c.prototype.writeInt16BE=function(f,p,x){return f=+f,p=p>>>0,x||u(this,f,p,2,32767,-32768),this[p]=f>>>8,this[p+1]=f&255,p+2},c.prototype.writeInt32LE=function(f,p,x){return f=+f,p=p>>>0,x||u(this,f,p,4,2147483647,-2147483648),this[p]=f&255,this[p+1]=f>>>8,this[p+2]=f>>>16,this[p+3]=f>>>24,p+4},c.prototype.writeInt32BE=function(f,p,x){return f=+f,p=p>>>0,x||u(this,f,p,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[p]=f>>>24,this[p+1]=f>>>16,this[p+2]=f>>>8,this[p+3]=f&255,p+4},c.prototype.writeBigInt64LE=Ft(function(f,p=0){return l(this,f,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Ft(function(f,p=0){return w(this,f,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function S(y,f,p,x,N,D){if(p+x>y.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function P(y,f,p,x,N){return f=+f,p=p>>>0,N||S(y,f,p,4),t.write(y,f,p,x,23,4),p+4}c.prototype.writeFloatLE=function(f,p,x){return P(this,f,p,!0,x)},c.prototype.writeFloatBE=function(f,p,x){return P(this,f,p,!1,x)};function W(y,f,p,x,N){return f=+f,p=p>>>0,N||S(y,f,p,8),t.write(y,f,p,x,52,8),p+8}c.prototype.writeDoubleLE=function(f,p,x){return W(this,f,p,!0,x)},c.prototype.writeDoubleBE=function(f,p,x){return W(this,f,p,!1,x)},c.prototype.copy=function(f,p,x,N){if(!c.isBuffer(f))throw new TypeError("argument should be a Buffer");if(x||(x=0),!N&&N!==0&&(N=this.length),p>=f.length&&(p=f.length),p||(p=0),N>0&&N<x&&(N=x),N===x||f.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),f.length-p<N-x&&(N=f.length-p+x);const D=N-x;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,x,N):Uint8Array.prototype.set.call(f,this.subarray(x,N),p),D},c.prototype.fill=function(f,p,x,N){if(typeof f=="string"){if(typeof p=="string"?(N=p,p=0,x=this.length):typeof x=="string"&&(N=x,x=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!c.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(f.length===1){const K=f.charCodeAt(0);(N==="utf8"&&K<128||N==="latin1")&&(f=K)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(p<0||this.length<p||this.length<x)throw new RangeError("Out of range index");if(x<=p)return this;p=p>>>0,x=x===void 0?this.length:x>>>0,f||(f=0);let D;if(typeof f=="number")for(D=p;D<x;++D)this[D]=f;else{const K=c.isBuffer(f)?f:c.from(f,N),ve=K.length;if(ve===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(D=0;D<x-p;++D)this[D+p]=K[D%ve]}return this};const ee={};function se(y,f,p){ee[y]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(N){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:N,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}se("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(y,f){return`The "${y}" argument must be of type number. Received type ${typeof f}`},TypeError),se("ERR_OUT_OF_RANGE",function(y,f,p){let x=`The value of "${y}" is out of range.`,N=p;return Number.isInteger(p)&&Math.abs(p)>2**32?N=Be(String(p)):typeof p=="bigint"&&(N=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(N=Be(N)),N+="n"),x+=` It must be ${f}. Received ${N}`,x},RangeError);function Be(y){let f="",p=y.length;const x=y[0]==="-"?1:0;for(;p>=x+4;p-=3)f=`_${y.slice(p-3,p)}${f}`;return`${y.slice(0,p)}${f}`}function Ie(y,f,p){Ut(f,"offset"),(y[f]===void 0||y[f+p]===void 0)&&Te(f,y.length-(p+1))}function Me(y,f,p,x,N,D){if(y>p||y<f){const K=typeof f=="bigint"?"n":"";let ve;throw f===0||f===BigInt(0)?ve=`>= 0${K} and < 2${K} ** ${(D+1)*8}${K}`:ve=`>= -(2${K} ** ${(D+1)*8-1}${K}) and < 2 ** ${(D+1)*8-1}${K}`,new ee.ERR_OUT_OF_RANGE("value",ve,y)}Ie(x,N,D)}function Ut(y,f){if(typeof y!="number")throw new ee.ERR_INVALID_ARG_TYPE(f,"number",y)}function Te(y,f,p){throw Math.floor(y)!==y?(Ut(y,p),new ee.ERR_OUT_OF_RANGE("offset","an integer",y)):f<0?new ee.ERR_BUFFER_OUT_OF_BOUNDS:new ee.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,y)}const qe=/[^+/0-9A-Za-z-_]/g;function Cn(y){if(y=y.split("=")[0],y=y.trim().replace(qe,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function Ne(y,f){f=f||1/0;let p;const x=y.length;let N=null;const D=[];for(let K=0;K<x;++K){if(p=y.charCodeAt(K),p>55295&&p<57344){if(!N){if(p>56319){(f-=3)>-1&&D.push(239,191,189);continue}else if(K+1===x){(f-=3)>-1&&D.push(239,191,189);continue}N=p;continue}if(p<56320){(f-=3)>-1&&D.push(239,191,189),N=p;continue}p=(N-55296<<10|p-56320)+65536}else N&&(f-=3)>-1&&D.push(239,191,189);if(N=null,p<128){if((f-=1)<0)break;D.push(p)}else if(p<2048){if((f-=2)<0)break;D.push(p>>6|192,p&63|128)}else if(p<65536){if((f-=3)<0)break;D.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((f-=4)<0)break;D.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return D}function ze(y){const f=[];for(let p=0;p<y.length;++p)f.push(y.charCodeAt(p)&255);return f}function On(y,f){let p,x,N;const D=[];for(let K=0;K<y.length&&!((f-=2)<0);++K)p=y.charCodeAt(K),x=p>>8,N=p%256,D.push(N),D.push(x);return D}function Fe(y){return e.toByteArray(Cn(y))}function Oe(y,f,p,x){let N;for(N=0;N<x&&!(N+p>=f.length||N>=y.length);++N)f[N+p]=y[N];return N}function Tt(y,f){return y instanceof f||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===f.name}function Ue(y){return y!==y}const $e=(function(){const y="0123456789abcdef",f=new Array(256);for(let p=0;p<16;++p){const x=p*16;for(let N=0;N<16;++N)f[x+N]=y[p]+y[N]}return f})();function Ft(y){return typeof BigInt>"u"?Ve:y}function Ve(){throw new Error("BigInt not supported")}})(Hi)),Hi}var xe=Ks();const Lr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function kn(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ks(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Ir(r,...e){if(!kn(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Fa(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ks(r.outputLen),ks(r.blockLen)}function ni(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function xl(r,e){Ir(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Hr(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function Gi(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function qt(r,e){return r<<32-e|r>>>e}const Da=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",El=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function _r(r){if(Ir(r),Da)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=El[r[t]];return e}const Kt={_0:48,_9:57,A:65,F:70,a:97,f:102};function No(r){if(r>=Kt._0&&r<=Kt._9)return r-Kt._0;if(r>=Kt.A&&r<=Kt.F)return r-(Kt.A-10);if(r>=Kt.a&&r<=Kt.f)return r-(Kt.a-10)}function ii(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Da)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=No(r.charCodeAt(i)),c=No(r.charCodeAt(i+1));if(o===void 0||c===void 0){const h=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+i)}n[s]=o*16+c}return n}function Sl(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Ws(r){return typeof r=="string"&&(r=Sl(r)),Ir(r),r}function zt(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];Ir(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}class ja{}function qa(r){const e=n=>r().update(Ws(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Hs(r=32){if(Lr&&typeof Lr.getRandomValues=="function")return Lr.getRandomValues(new Uint8Array(r));if(Lr&&typeof Lr.randomBytes=="function")return Uint8Array.from(Lr.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function kl(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),c=Number(t&i),h=n?4:0,b=n?0:4;r.setUint32(e+h,o,n),r.setUint32(e+b,c,n)}function Al(r,e,t){return r&e^~r&t}function Bl(r,e,t){return r&e^r&t^e&t}class za extends ja{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Gi(this.buffer)}update(e){ni(this),e=Ws(e),Ir(e);const{view:t,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const h=Gi(e);for(;s<=i-o;o+=s)this.process(h,o);continue}n.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ni(this),xl(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,Hr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let O=o;O<s;O++)t[O]=0;kl(n,s-8,BigInt(this.length*8),i),this.process(n,0);const c=Gi(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=h/4,A=this.get();if(b>A.length)throw new Error("_sha2: outputLen bigger than state");for(let O=0;O<b;O++)c.setUint32(4*O,A[O],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=c,s%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const nr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Nn=BigInt(2**32-1),Uo=BigInt(32);function Il(r,e=!1){return e?{h:Number(r&Nn),l:Number(r>>Uo&Nn)}:{h:Number(r>>Uo&Nn)|0,l:Number(r&Nn)|0}}function Rl(r,e=!1){const t=r.length;let n=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l:c}=Il(r[i],e);[n[i],s[i]]=[o,c]}return[n,s]}const Po=(r,e,t)=>r>>>t,Fo=(r,e,t)=>r<<32-t|e>>>t,Nr=(r,e,t)=>r>>>t|e<<32-t,Ur=(r,e,t)=>r<<32-t|e>>>t,Un=(r,e,t)=>r<<64-t|e>>>t-32,Pn=(r,e,t)=>r>>>t-32|e<<64-t;function Wt(r,e,t,n){const s=(e>>>0)+(n>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const Ml=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),Tl=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,Cl=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),Ol=(r,e,t,n,s)=>e+t+n+s+(r/2**32|0)|0,Ll=(r,e,t,n,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Nl=(r,e,t,n,s,i)=>e+t+n+s+i+(r/2**32|0)|0,Ul=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ir=new Uint32Array(64);class Pl extends za{constructor(e=32){super(64,e,8,!1),this.A=nr[0]|0,this.B=nr[1]|0,this.C=nr[2]|0,this.D=nr[3]|0,this.E=nr[4]|0,this.F=nr[5]|0,this.G=nr[6]|0,this.H=nr[7]|0}get(){const{A:e,B:t,C:n,D:s,E:i,F:o,G:c,H:h}=this;return[e,t,n,s,i,o,c,h]}set(e,t,n,s,i,o,c,h){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=h|0}process(e,t){for(let O=0;O<16;O++,t+=4)ir[O]=e.getUint32(t,!1);for(let O=16;O<64;O++){const I=ir[O-15],k=ir[O-2],C=qt(I,7)^qt(I,18)^I>>>3,T=qt(k,17)^qt(k,19)^k>>>10;ir[O]=T+ir[O-7]+C+ir[O-16]|0}let{A:n,B:s,C:i,D:o,E:c,F:h,G:b,H:A}=this;for(let O=0;O<64;O++){const I=qt(c,6)^qt(c,11)^qt(c,25),k=A+I+Al(c,h,b)+Ul[O]+ir[O]|0,T=(qt(n,2)^qt(n,13)^qt(n,22))+Bl(n,s,i)|0;A=b,b=h,h=c,c=o+k|0,o=i,i=s,s=n,n=k+T|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,h=h+this.F|0,b=b+this.G|0,A=A+this.H|0,this.set(n,s,i,o,c,h,b,A)}roundClean(){Hr(ir)}destroy(){this.set(0,0,0,0,0,0,0,0),Hr(this.buffer)}}const $a=Rl(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Fl=$a[0],Dl=$a[1],sr=new Uint32Array(80),or=new Uint32Array(80);class jl extends za{constructor(e=64){super(128,e,16,!1),this.Ah=bt[0]|0,this.Al=bt[1]|0,this.Bh=bt[2]|0,this.Bl=bt[3]|0,this.Ch=bt[4]|0,this.Cl=bt[5]|0,this.Dh=bt[6]|0,this.Dl=bt[7]|0,this.Eh=bt[8]|0,this.El=bt[9]|0,this.Fh=bt[10]|0,this.Fl=bt[11]|0,this.Gh=bt[12]|0,this.Gl=bt[13]|0,this.Hh=bt[14]|0,this.Hl=bt[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:i,Cl:o,Dh:c,Dl:h,Eh:b,El:A,Fh:O,Fl:I,Gh:k,Gl:C,Hh:T,Hl:F}=this;return[e,t,n,s,i,o,c,h,b,A,O,I,k,C,T,F]}set(e,t,n,s,i,o,c,h,b,A,O,I,k,C,T,F){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=h|0,this.Eh=b|0,this.El=A|0,this.Fh=O|0,this.Fl=I|0,this.Gh=k|0,this.Gl=C|0,this.Hh=T|0,this.Hl=F|0}process(e,t){for(let Z=0;Z<16;Z++,t+=4)sr[Z]=e.getUint32(t),or[Z]=e.getUint32(t+=4);for(let Z=16;Z<80;Z++){const te=sr[Z-15]|0,X=or[Z-15]|0,oe=Nr(te,X,1)^Nr(te,X,8)^Po(te,X,7),pe=Ur(te,X,1)^Ur(te,X,8)^Fo(te,X,7),le=sr[Z-2]|0,L=or[Z-2]|0,U=Nr(le,L,19)^Un(le,L,61)^Po(le,L,6),z=Ur(le,L,19)^Pn(le,L,61)^Fo(le,L,6),V=Cl(pe,z,or[Z-7],or[Z-16]),g=Ol(V,oe,U,sr[Z-7],sr[Z-16]);sr[Z]=g|0,or[Z]=V|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:c,Cl:h,Dh:b,Dl:A,Eh:O,El:I,Fh:k,Fl:C,Gh:T,Gl:F,Hh:q,Hl:H}=this;for(let Z=0;Z<80;Z++){const te=Nr(O,I,14)^Nr(O,I,18)^Un(O,I,41),X=Ur(O,I,14)^Ur(O,I,18)^Pn(O,I,41),oe=O&k^~O&T,pe=I&C^~I&F,le=Ll(H,X,pe,Dl[Z],or[Z]),L=Nl(le,q,te,oe,Fl[Z],sr[Z]),U=le|0,z=Nr(n,s,28)^Un(n,s,34)^Un(n,s,39),V=Ur(n,s,28)^Pn(n,s,34)^Pn(n,s,39),g=n&i^n&c^i&c,a=s&o^s&h^o&h;q=T|0,H=F|0,T=k|0,F=C|0,k=O|0,C=I|0,{h:O,l:I}=Wt(b|0,A|0,L|0,U|0),b=c|0,A=h|0,c=i|0,h=o|0,i=n|0,o=s|0;const d=Ml(U,V,a);n=Tl(d,L,z,g),s=d|0}({h:n,l:s}=Wt(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Wt(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:h}=Wt(this.Ch|0,this.Cl|0,c|0,h|0),{h:b,l:A}=Wt(this.Dh|0,this.Dl|0,b|0,A|0),{h:O,l:I}=Wt(this.Eh|0,this.El|0,O|0,I|0),{h:k,l:C}=Wt(this.Fh|0,this.Fl|0,k|0,C|0),{h:T,l:F}=Wt(this.Gh|0,this.Gl|0,T|0,F|0),{h:q,l:H}=Wt(this.Hh|0,this.Hl|0,q|0,H|0),this.set(n,s,i,o,c,h,b,A,O,I,k,C,T,F,q,H)}roundClean(){Hr(sr,or)}destroy(){Hr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Va=qa(()=>new Pl),ql=qa(()=>new jl);const Gs=BigInt(0),As=BigInt(1);function Ar(r,e=""){if(typeof r!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof r)}return r}function Dt(r,e,t=""){const n=kn(r),s=r?.length,i=e!==void 0;if(!n||i&&s!==e){const o=t&&`"${t}" `,c=i?` of length ${e}`:"",h=n?`length=${s}`:`type=${typeof r}`;throw new Error(o+"expected Uint8Array"+c+", got "+h)}return r}function Fn(r){const e=r.toString(16);return e.length&1?"0"+e:e}function Za(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Gs:BigInt("0x"+r)}function bi(r){return Za(_r(r))}function ln(r){return Ir(r),Za(_r(Uint8Array.from(r).reverse()))}function Js(r,e){return ii(r.toString(16).padStart(e*2,"0"))}function Ka(r,e){return Js(r,e).reverse()}function Ke(r,e,t){let n;if(typeof e=="string")try{n=ii(e)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(kn(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return n}function Do(r){return Uint8Array.from(r)}const Ji=r=>typeof r=="bigint"&&Gs<=r;function zl(r,e,t){return Ji(r)&&Ji(e)&&Ji(t)&&e<=r&&r<t}function Bs(r,e,t,n){if(!zl(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function Wa(r){let e;for(e=0;r>Gs;r>>=As,e+=1);return e}const An=r=>(As<<BigInt(r))-As;function $l(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=k=>new Uint8Array(k),s=k=>Uint8Array.of(k);let i=n(r),o=n(r),c=0;const h=()=>{i.fill(1),o.fill(0),c=0},b=(...k)=>t(o,i,...k),A=(k=n(0))=>{o=b(s(0),k),i=b(),k.length!==0&&(o=b(s(1),k),i=b())},O=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let k=0;const C=[];for(;k<e;){i=b();const T=i.slice();C.push(T),k+=i.length}return zt(...C)};return(k,C)=>{h(),A(k);let T;for(;!(T=C(O()));)A();return h(),T}}function Bn(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const c=r[s];if(o&&c===void 0)return;const h=typeof c;if(h!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${h}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(t).forEach(([s,i])=>n(s,i,!0))}function si(r){const e=new WeakMap;return(t,...n)=>{const s=e.get(t);if(s!==void 0)return s;const i=r(t,...n);return e.set(t,i),i}}const Rt=BigInt(0),yt=BigInt(1),yr=BigInt(2),Ha=BigInt(3),Ga=BigInt(4),Ja=BigInt(5),Vl=BigInt(7),Ya=BigInt(8),Zl=BigInt(9),Xa=BigInt(16);function ht(r,e){const t=r%e;return t>=Rt?t:e+t}function Ze(r,e,t){let n=r;for(;e-- >Rt;)n*=n,n%=t;return n}function jo(r,e){if(r===Rt)throw new Error("invert: expected non-zero number");if(e<=Rt)throw new Error("invert: expected positive modulus, got "+e);let t=ht(r,e),n=e,s=Rt,i=yt;for(;t!==Rt;){const c=n/t,h=n%t,b=s-i*c;n=t,t=h,s=i,i=b}if(n!==yt)throw new Error("invert: does not exist");return ht(s,e)}function Ys(r,e,t){if(!r.eql(r.sqr(e),t))throw new Error("Cannot find square root")}function Qa(r,e){const t=(r.ORDER+yt)/Ga,n=r.pow(e,t);return Ys(r,n,e),n}function Kl(r,e){const t=(r.ORDER-Ja)/Ya,n=r.mul(e,yr),s=r.pow(n,t),i=r.mul(e,s),o=r.mul(r.mul(i,yr),s),c=r.mul(i,r.sub(o,r.ONE));return Ys(r,c,e),c}function Wl(r){const e=Rr(r),t=ec(r),n=t(e,e.neg(e.ONE)),s=t(e,n),i=t(e,e.neg(n)),o=(r+Vl)/Xa;return(c,h)=>{let b=c.pow(h,o),A=c.mul(b,n);const O=c.mul(b,s),I=c.mul(b,i),k=c.eql(c.sqr(A),h),C=c.eql(c.sqr(O),h);b=c.cmov(b,A,k),A=c.cmov(I,O,C);const T=c.eql(c.sqr(A),h),F=c.cmov(b,A,T);return Ys(c,F,h),F}}function ec(r){if(r<Ha)throw new Error("sqrt is not defined for small field");let e=r-yt,t=0;for(;e%yr===Rt;)e/=yr,t++;let n=yr;const s=Rr(r);for(;qo(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return Qa;let i=s.pow(n,e);const o=(e+yt)/yr;return function(h,b){if(h.is0(b))return b;if(qo(h,b)!==1)throw new Error("Cannot find square root");let A=t,O=h.mul(h.ONE,i),I=h.pow(b,e),k=h.pow(b,o);for(;!h.eql(I,h.ONE);){if(h.is0(I))return h.ZERO;let C=1,T=h.sqr(I);for(;!h.eql(T,h.ONE);)if(C++,T=h.sqr(T),C===A)throw new Error("Cannot find square root");const F=yt<<BigInt(A-C-1),q=h.pow(O,F);A=C,O=h.sqr(q),I=h.mul(I,O),k=h.mul(k,q)}return k}}function Hl(r){return r%Ga===Ha?Qa:r%Ya===Ja?Kl:r%Xa===Zl?Wl(r):ec(r)}const Gl=(r,e)=>(ht(r,e)&yt)===yt,Jl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Yl(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=Jl.reduce((n,s)=>(n[s]="function",n),e);return Bn(r,t),r}function Xl(r,e,t){if(t<Rt)throw new Error("invalid exponent, negatives unsupported");if(t===Rt)return r.ONE;if(t===yt)return e;let n=r.ONE,s=e;for(;t>Rt;)t&yt&&(n=r.mul(n,s)),s=r.sqr(s),t>>=yt;return n}function tc(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),s=e.reduce((o,c,h)=>r.is0(c)?o:(n[h]=o,r.mul(o,c)),r.ONE),i=r.inv(s);return e.reduceRight((o,c,h)=>r.is0(c)?o:(n[h]=r.mul(o,n[h]),r.mul(o,c)),i),n}function qo(r,e){const t=(r.ORDER-yt)/yr,n=r.pow(e,t),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function rc(r,e){e!==void 0&&ks(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Rr(r,e,t=!1,n={}){if(r<=Rt)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i,o=!1,c;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const I=e;I.BITS&&(s=I.BITS),I.sqrt&&(i=I.sqrt),typeof I.isLE=="boolean"&&(t=I.isLE),typeof I.modFromBytes=="boolean"&&(o=I.modFromBytes),c=I.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:h,nByteLength:b}=rc(r,s);if(b>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let A;const O=Object.freeze({ORDER:r,isLE:t,BITS:h,BYTES:b,MASK:An(h),ZERO:Rt,ONE:yt,allowedLengths:c,create:I=>ht(I,r),isValid:I=>{if(typeof I!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof I);return Rt<=I&&I<r},is0:I=>I===Rt,isValidNot0:I=>!O.is0(I)&&O.isValid(I),isOdd:I=>(I&yt)===yt,neg:I=>ht(-I,r),eql:(I,k)=>I===k,sqr:I=>ht(I*I,r),add:(I,k)=>ht(I+k,r),sub:(I,k)=>ht(I-k,r),mul:(I,k)=>ht(I*k,r),pow:(I,k)=>Xl(O,I,k),div:(I,k)=>ht(I*jo(k,r),r),sqrN:I=>I*I,addN:(I,k)=>I+k,subN:(I,k)=>I-k,mulN:(I,k)=>I*k,inv:I=>jo(I,r),sqrt:i||(I=>(A||(A=Hl(r)),A(O,I))),toBytes:I=>t?Ka(I,b):Js(I,b),fromBytes:(I,k=!0)=>{if(c){if(!c.includes(I.length)||I.length>b)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+I.length);const T=new Uint8Array(b);T.set(I,t?0:T.length-I.length),I=T}if(I.length!==b)throw new Error("Field.fromBytes: expected "+b+" bytes, got "+I.length);let C=t?ln(I):bi(I);if(o&&(C=ht(C,r)),!k&&!O.isValid(C))throw new Error("invalid field element: outside of range 0..ORDER");return C},invertBatch:I=>tc(O,I),cmov:(I,k,C)=>C?k:I});return Object.freeze(O)}function nc(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function ic(r){const e=nc(r);return e+Math.ceil(e/2)}function Ql(r,e,t=!1){const n=r.length,s=nc(e),i=ic(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=t?ln(r):bi(r),c=ht(o,e-yt)+yt;return t?Ka(c,s):Js(c,s)}const Gr=BigInt(0),wr=BigInt(1);function oi(r,e){const t=e.negate();return r?t:e}function br(r,e){const t=tc(r.Fp,e.map(n=>n.Z));return e.map((n,s)=>r.fromAffine(n.toAffine(t[s])))}function sc(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function Yi(r,e){sc(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),s=2**r,i=An(r),o=BigInt(r);return{windows:t,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function zo(r,e,t){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=t;let c=Number(r&s),h=r>>o;c>n&&(c-=i,h+=wr);const b=e*n,A=b+Math.abs(c)-1,O=c===0,I=c<0,k=e%2!==0;return{nextN:h,offset:A,isZero:O,isNeg:I,isNegF:k,offsetF:b}}function ef(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function tf(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const Xi=new WeakMap,oc=new WeakMap;function Qi(r){return oc.get(r)||1}function $o(r){if(r!==Gr)throw new Error("invalid wNAF")}class ac{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let s=e;for(;t>Gr;)t&wr&&(n=n.add(s)),s=s.double(),t>>=wr;return n}precomputeWindow(e,t){const{windows:n,windowSize:s}=Yi(t,this.bits),i=[];let o=e,c=o;for(let h=0;h<n;h++){c=o,i.push(c);for(let b=1;b<s;b++)c=c.add(o),i.push(c);o=c.double()}return i}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Yi(e,this.bits);for(let c=0;c<o.windows;c++){const{nextN:h,offset:b,isZero:A,isNeg:O,isNegF:I,offsetF:k}=zo(n,c,o);n=h,A?i=i.add(oi(I,t[k])):s=s.add(oi(O,t[b]))}return $o(n),{p:s,f:i}}wNAFUnsafe(e,t,n,s=this.ZERO){const i=Yi(e,this.bits);for(let o=0;o<i.windows&&n!==Gr;o++){const{nextN:c,offset:h,isZero:b,isNeg:A}=zo(n,o,i);if(n=c,!b){const O=t[h];s=s.add(A?O.negate():O)}}return $o(n),s}getPrecomputes(e,t,n){let s=Xi.get(t);return s||(s=this.precomputeWindow(t,e),e!==1&&(typeof n=="function"&&(s=n(s)),Xi.set(t,s))),s}cached(e,t,n){const s=Qi(e);return this.wNAF(s,this.getPrecomputes(s,e,n),t)}unsafe(e,t,n,s){const i=Qi(e);return i===1?this._unsafeLadder(e,t,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),t,s)}createCache(e,t){sc(t,this.bits),oc.set(e,t),Xi.delete(e)}hasCache(e){return Qi(e)!==1}}function rf(r,e,t,n){let s=e,i=r.ZERO,o=r.ZERO;for(;t>Gr||n>Gr;)t&wr&&(i=i.add(s)),n&wr&&(o=o.add(s)),s=s.double(),t>>=wr,n>>=wr;return{p1:i,p2:o}}function cc(r,e,t,n){ef(t,r),tf(n,e);const s=t.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,c=Wa(BigInt(s));let h=1;c>12?h=c-3:c>4?h=c-2:c>0&&(h=2);const b=An(h),A=new Array(Number(b)+1).fill(o),O=Math.floor((e.BITS-1)/h)*h;let I=o;for(let k=O;k>=0;k-=h){A.fill(o);for(let T=0;T<i;T++){const F=n[T],q=Number(F>>BigInt(k)&b);A[q]=A[q].add(t[T])}let C=o;for(let T=A.length-1,F=o;T>0;T--)F=F.add(A[T]),C=C.add(F);if(I=I.add(C),k!==0)for(let T=0;T<h;T++)I=I.double()}return I}function Vo(r,e,t){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Yl(e),e}else return Rr(r,{isLE:t})}function uc(r,e,t={},n){if(n===void 0&&(n=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const h of["p","n","h"]){const b=e[h];if(!(typeof b=="bigint"&&b>Gr))throw new Error(`CURVE.${h} must be positive bigint`)}const s=Vo(e.p,t.Fp,n),i=Vo(e.n,t.Fn,n),c=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const h of c)if(!s.isValid(e[h]))throw new Error(`CURVE.${h} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}const ar=BigInt(0),pt=BigInt(1),es=BigInt(2),nf=BigInt(8);function sf(r,e,t,n){const s=r.sqr(t),i=r.sqr(n),o=r.add(r.mul(e.a,s),i),c=r.add(r.ONE,r.mul(e.d,r.mul(s,i)));return r.eql(o,c)}function of(r,e={}){const t=uc("edwards",r,e,e.FpFnLE),{Fp:n,Fn:s}=t;let i=t.CURVE;const{h:o}=i;Bn(e,{},{uvRatio:"function"});const c=es<<BigInt(s.BYTES*8)-pt,h=F=>n.create(F),b=e.uvRatio||((F,q)=>{try{return{isValid:!0,value:n.sqrt(n.div(F,q))}}catch{return{isValid:!1,value:ar}}});if(!sf(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function A(F,q,H=!1){const Z=H?pt:ar;return Bs("coordinate "+F,q,Z,c),q}function O(F){if(!(F instanceof C))throw new Error("ExtendedPoint expected")}const I=si((F,q)=>{const{X:H,Y:Z,Z:te}=F,X=F.is0();q==null&&(q=X?nf:n.inv(te));const oe=h(H*q),pe=h(Z*q),le=n.mul(te,q);if(X)return{x:ar,y:pt};if(le!==pt)throw new Error("invZ was invalid");return{x:oe,y:pe}}),k=si(F=>{const{a:q,d:H}=i;if(F.is0())throw new Error("bad point: ZERO");const{X:Z,Y:te,Z:X,T:oe}=F,pe=h(Z*Z),le=h(te*te),L=h(X*X),U=h(L*L),z=h(pe*q),V=h(L*h(z+le)),g=h(U+h(H*h(pe*le)));if(V!==g)throw new Error("bad point: equation left != right (1)");const a=h(Z*te),d=h(X*oe);if(a!==d)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(q,H,Z,te){this.X=A("x",q),this.Y=A("y",H),this.Z=A("z",Z,!0),this.T=A("t",te),Object.freeze(this)}static CURVE(){return i}static fromAffine(q){if(q instanceof C)throw new Error("extended point not allowed");const{x:H,y:Z}=q||{};return A("x",H),A("y",Z),new C(H,Z,pt,h(H*Z))}static fromBytes(q,H=!1){const Z=n.BYTES,{a:te,d:X}=i;q=Do(Dt(q,Z,"point")),Ar(H,"zip215");const oe=Do(q),pe=q[Z-1];oe[Z-1]=pe&-129;const le=ln(oe),L=H?c:n.ORDER;Bs("point.y",le,ar,L);const U=h(le*le),z=h(U-pt),V=h(X*U-te);let{isValid:g,value:a}=b(z,V);if(!g)throw new Error("bad point: invalid y coordinate");const d=(a&pt)===pt,m=(pe&128)!==0;if(!H&&a===ar&&m)throw new Error("bad point: x=0 and x_0=1");return m!==d&&(a=h(-a)),C.fromAffine({x:a,y:le})}static fromHex(q,H=!1){return C.fromBytes(Ke("point",q),H)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(q=8,H=!0){return T.createCache(this,q),H||this.multiply(es),this}assertValidity(){k(this)}equals(q){O(q);const{X:H,Y:Z,Z:te}=this,{X,Y:oe,Z:pe}=q,le=h(H*pe),L=h(X*te),U=h(Z*pe),z=h(oe*te);return le===L&&U===z}is0(){return this.equals(C.ZERO)}negate(){return new C(h(-this.X),this.Y,this.Z,h(-this.T))}double(){const{a:q}=i,{X:H,Y:Z,Z:te}=this,X=h(H*H),oe=h(Z*Z),pe=h(es*h(te*te)),le=h(q*X),L=H+Z,U=h(h(L*L)-X-oe),z=le+oe,V=z-pe,g=le-oe,a=h(U*V),d=h(z*g),m=h(U*g),_=h(V*z);return new C(a,d,_,m)}add(q){O(q);const{a:H,d:Z}=i,{X:te,Y:X,Z:oe,T:pe}=this,{X:le,Y:L,Z:U,T:z}=q,V=h(te*le),g=h(X*L),a=h(pe*Z*z),d=h(oe*U),m=h((te+X)*(le+L)-V-g),_=d-a,E=d+a,B=h(g-H*V),M=h(m*_),v=h(E*B),u=h(m*B),l=h(_*E);return new C(M,v,l,u)}subtract(q){return this.add(q.negate())}multiply(q){if(!s.isValidNot0(q))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:H,f:Z}=T.cached(this,q,te=>br(C,te));return br(C,[H,Z])[0]}multiplyUnsafe(q,H=C.ZERO){if(!s.isValid(q))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return q===ar?C.ZERO:this.is0()||q===pt?this:T.unsafe(this,q,Z=>br(C,Z),H)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return T.unsafe(this,i.n).is0()}toAffine(q){return I(this,q)}clearCofactor(){return o===pt?this:this.multiplyUnsafe(o)}toBytes(){const{x:q,y:H}=this.toAffine(),Z=n.toBytes(H);return Z[Z.length-1]|=q&pt?128:0,Z}toHex(){return _r(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(q){return br(C,q)}static msm(q,H){return cc(C,s,q,H)}_setWindowSize(q){this.precompute(q)}toRawBytes(){return this.toBytes()}}C.BASE=new C(i.Gx,i.Gy,pt,h(i.Gx*i.Gy)),C.ZERO=new C(ar,pt,pt,ar),C.Fp=n,C.Fn=s;const T=new ac(C,s.BITS);return C.BASE.precompute(8),C}function af(r,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');Bn(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=t,{BASE:s,Fp:i,Fn:o}=r,c=t.randomBytes||Hs,h=t.adjustScalarBytes||(L=>L),b=t.domain||((L,U,z)=>{if(Ar(z,"phflag"),U.length||z)throw new Error("Contexts/pre-hash are not supported");return L});function A(L){return o.create(ln(L))}function O(L){const U=Z.secretKey;L=Ke("private key",L,U);const z=Ke("hashed private key",e(L),2*U),V=h(z.slice(0,U)),g=z.slice(U,2*U),a=A(V);return{head:V,prefix:g,scalar:a}}function I(L){const{head:U,prefix:z,scalar:V}=O(L),g=s.multiply(V),a=g.toBytes();return{head:U,prefix:z,scalar:V,point:g,pointBytes:a}}function k(L){return I(L).pointBytes}function C(L=Uint8Array.of(),...U){const z=zt(...U);return A(e(b(z,Ke("context",L),!!n)))}function T(L,U,z={}){L=Ke("message",L),n&&(L=n(L));const{prefix:V,scalar:g,pointBytes:a}=I(U),d=C(z.context,V,L),m=s.multiply(d).toBytes(),_=C(z.context,m,a,L),E=o.create(d+_*g);if(!o.isValid(E))throw new Error("sign failed: invalid s");const B=zt(m,o.toBytes(E));return Dt(B,Z.signature,"result")}const F={zip215:!0};function q(L,U,z,V=F){const{context:g,zip215:a}=V,d=Z.signature;L=Ke("signature",L,d),U=Ke("message",U),z=Ke("publicKey",z,Z.publicKey),a!==void 0&&Ar(a,"zip215"),n&&(U=n(U));const m=d/2,_=L.subarray(0,m),E=ln(L.subarray(m,d));let B,M,v;try{B=r.fromBytes(z,a),M=r.fromBytes(_,a),v=s.multiplyUnsafe(E)}catch{return!1}if(!a&&B.isSmallOrder())return!1;const u=C(g,M.toBytes(),B.toBytes(),U);return M.add(B.multiplyUnsafe(u)).subtract(v).clearCofactor().is0()}const H=i.BYTES,Z={secretKey:H,publicKey:H,signature:2*H,seed:H};function te(L=c(Z.seed)){return Dt(L,Z.seed,"seed")}function X(L){const U=le.randomSecretKey(L);return{secretKey:U,publicKey:k(U)}}function oe(L){return kn(L)&&L.length===o.BYTES}function pe(L,U){try{return!!r.fromBytes(L,U)}catch{return!1}}const le={getExtendedPublicKey:I,randomSecretKey:te,isValidSecretKey:oe,isValidPublicKey:pe,toMontgomery(L){const{y:U}=r.fromBytes(L),z=Z.publicKey,V=z===32;if(!V&&z!==57)throw new Error("only defined for 25519 and 448");const g=V?i.div(pt+U,pt-U):i.div(U-pt,U+pt);return i.toBytes(g)},toMontgomerySecret(L){const U=Z.secretKey;Dt(L,U);const z=e(L.subarray(0,U));return h(z).subarray(0,U)},randomPrivateKey:te,precompute(L=8,U=r.BASE){return U.precompute(L,!1)}};return Object.freeze({keygen:X,getPublicKey:k,sign:T,verify:q,utils:le,Point:r,lengths:Z})}function cf(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Rr(e.n,r.nBitLength,!0),s={Fp:t,Fn:n,uvRatio:r.uvRatio},i={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:s,hash:r.hash,eddsaOpts:i}}function uf(r,e){const t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:r,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function lf(r){const{CURVE:e,curveOpts:t,hash:n,eddsaOpts:s}=cf(r),i=of(e,t),o=af(i,n,s);return uf(r,o)}const ff=BigInt(1),Zo=BigInt(2);BigInt(3);const df=BigInt(5),hf=BigInt(8),Xs=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),lc={p:Xs,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:hf,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function pf(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),s=BigInt(80),i=Xs,c=r*r%i*r%i,h=Ze(c,Zo,i)*c%i,b=Ze(h,ff,i)*r%i,A=Ze(b,df,i)*b%i,O=Ze(A,e,i)*A%i,I=Ze(O,t,i)*O%i,k=Ze(I,n,i)*I%i,C=Ze(k,s,i)*k%i,T=Ze(C,s,i)*k%i,F=Ze(T,e,i)*A%i;return{pow_p_5_8:Ze(F,Zo,i)*r%i,b2:c}}function mf(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const Ko=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function gf(r,e){const t=Xs,n=ht(e*e*e,t),s=ht(n*n*e,t),i=pf(r*s).pow_p_5_8;let o=ht(r*n*i,t);const c=ht(e*o*o,t),h=o,b=ht(o*Ko,t),A=c===r,O=c===ht(-r,t),I=c===ht(-r*Ko,t);return A&&(o=h),(O||I)&&(o=b),Gl(o,t)&&(o=ht(-o,t)),{isValid:A||O,value:o}}const yf=Rr(lc.p,{isLE:!0}),wf={...lc,Fp:yf,hash:ql,adjustScalarBytes:mf,uvRatio:gf},In=lf(wf);var Vn={exports:{}};const bf={},vf=Object.freeze(Object.defineProperty({__proto__:null,default:bf},Symbol.toStringTag,{value:"Module"})),_f=Fs(vf);var xf=Vn.exports,Wo;function fc(){return Wo||(Wo=1,(function(r){(function(e,t){function n(g,a){if(!g)throw new Error(a||"Assertion failed")}function s(g,a){g.super_=a;var d=function(){};d.prototype=a.prototype,g.prototype=new d,g.prototype.constructor=g}function i(g,a,d){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((a==="le"||a==="be")&&(d=a,a=10),this._init(g||0,a||10,d||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=_f.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,d){return a.cmp(d)>0?a:d},i.min=function(a,d){return a.cmp(d)<0?a:d},i.prototype._init=function(a,d,m){if(typeof a=="number")return this._initNumber(a,d,m);if(typeof a=="object")return this._initArray(a,d,m);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),a=a.toString().replace(/\s+/g,"");var _=0;a[0]==="-"&&(_++,this.negative=1),_<a.length&&(d===16?this._parseHex(a,_,m):(this._parseBase(a,d,_),m==="le"&&this._initArray(this.toArray(),d,m)))},i.prototype._initNumber=function(a,d,m){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),d,m)},i.prototype._initArray=function(a,d,m){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var E,B,M=0;if(m==="be")for(_=a.length-1,E=0;_>=0;_-=3)B=a[_]|a[_-1]<<8|a[_-2]<<16,this.words[E]|=B<<M&67108863,this.words[E+1]=B>>>26-M&67108863,M+=24,M>=26&&(M-=26,E++);else if(m==="le")for(_=0,E=0;_<a.length;_+=3)B=a[_]|a[_+1]<<8|a[_+2]<<16,this.words[E]|=B<<M&67108863,this.words[E+1]=B>>>26-M&67108863,M+=24,M>=26&&(M-=26,E++);return this._strip()};function c(g,a){var d=g.charCodeAt(a);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+g)}function h(g,a,d){var m=c(g,d);return d-1>=a&&(m|=c(g,d-1)<<4),m}i.prototype._parseHex=function(a,d,m){this.length=Math.ceil((a.length-d)/6),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var E=0,B=0,M;if(m==="be")for(_=a.length-1;_>=d;_-=2)M=h(a,d,_)<<E,this.words[B]|=M&67108863,E>=18?(E-=18,B+=1,this.words[B]|=M>>>26):E+=8;else{var v=a.length-d;for(_=v%2===0?d+1:d;_<a.length;_+=2)M=h(a,d,_)<<E,this.words[B]|=M&67108863,E>=18?(E-=18,B+=1,this.words[B]|=M>>>26):E+=8}this._strip()};function b(g,a,d,m){for(var _=0,E=0,B=Math.min(g.length,d),M=a;M<B;M++){var v=g.charCodeAt(M)-48;_*=m,v>=49?E=v-49+10:v>=17?E=v-17+10:E=v,n(v>=0&&E<m,"Invalid character"),_+=E}return _}i.prototype._parseBase=function(a,d,m){this.words=[0],this.length=1;for(var _=0,E=1;E<=67108863;E*=d)_++;_--,E=E/d|0;for(var B=a.length-m,M=B%_,v=Math.min(B,B-M)+m,u=0,l=m;l<v;l+=_)u=b(a,l,l+_,d),this.imuln(E),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(M!==0){var w=1;for(u=b(a,l,a.length,d),l=0;l<M;l++)w*=d;this.imuln(w),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var d=0;d<this.length;d++)a.words[d]=this.words[d];a.length=this.length,a.negative=this.negative,a.red=this.red};function A(g,a){g.words=a.words,g.length=a.length,g.negative=a.negative,g.red=a.red}if(i.prototype._move=function(a){A(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=O}catch{i.prototype.inspect=O}else i.prototype.inspect=O;function O(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,d){a=a||10,d=d|0||1;var m;if(a===16||a==="hex"){m="";for(var _=0,E=0,B=0;B<this.length;B++){var M=this.words[B],v=((M<<_|E)&16777215).toString(16);E=M>>>24-_&16777215,_+=2,_>=26&&(_-=26,B--),E!==0||B!==this.length-1?m=I[6-v.length]+v+m:m=v+m}for(E!==0&&(m=E.toString(16)+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(a===(a|0)&&a>=2&&a<=36){var u=k[a],l=C[a];m="";var w=this.clone();for(w.negative=0;!w.isZero();){var S=w.modrn(l).toString(a);w=w.idivn(l),w.isZero()?m=S+m:m=I[u-S.length]+S+m}for(this.isZero()&&(m="0"+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,d){return this.toArrayLike(o,a,d)}),i.prototype.toArray=function(a,d){return this.toArrayLike(Array,a,d)};var T=function(a,d){return a.allocUnsafe?a.allocUnsafe(d):new a(d)};i.prototype.toArrayLike=function(a,d,m){this._strip();var _=this.byteLength(),E=m||Math.max(1,_);n(_<=E,"byte array longer than desired length"),n(E>0,"Requested array length <= 0");var B=T(a,E),M=d==="le"?"LE":"BE";return this["_toArrayLike"+M](B,_),B},i.prototype._toArrayLikeLE=function(a,d){for(var m=0,_=0,E=0,B=0;E<this.length;E++){var M=this.words[E]<<B|_;a[m++]=M&255,m<a.length&&(a[m++]=M>>8&255),m<a.length&&(a[m++]=M>>16&255),B===6?(m<a.length&&(a[m++]=M>>24&255),_=0,B=0):(_=M>>>24,B+=2)}if(m<a.length)for(a[m++]=_;m<a.length;)a[m++]=0},i.prototype._toArrayLikeBE=function(a,d){for(var m=a.length-1,_=0,E=0,B=0;E<this.length;E++){var M=this.words[E]<<B|_;a[m--]=M&255,m>=0&&(a[m--]=M>>8&255),m>=0&&(a[m--]=M>>16&255),B===6?(m>=0&&(a[m--]=M>>24&255),_=0,B=0):(_=M>>>24,B+=2)}if(m>=0)for(a[m--]=_;m>=0;)a[m--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var d=a,m=0;return d>=4096&&(m+=13,d>>>=13),d>=64&&(m+=7,d>>>=7),d>=8&&(m+=4,d>>>=4),d>=2&&(m+=2,d>>>=2),m+d},i.prototype._zeroBits=function(a){if(a===0)return 26;var d=a,m=0;return(d&8191)===0&&(m+=13,d>>>=13),(d&127)===0&&(m+=7,d>>>=7),(d&15)===0&&(m+=4,d>>>=4),(d&3)===0&&(m+=2,d>>>=2),(d&1)===0&&m++,m},i.prototype.bitLength=function(){var a=this.words[this.length-1],d=this._countBits(a);return(this.length-1)*26+d};function F(g){for(var a=new Array(g.bitLength()),d=0;d<a.length;d++){var m=d/26|0,_=d%26;a[d]=g.words[m]>>>_&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,d=0;d<this.length;d++){var m=this._zeroBits(this.words[d]);if(a+=m,m!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var d=0;d<a.length;d++)this.words[d]=this.words[d]|a.words[d];return this._strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var d;this.length>a.length?d=a:d=this;for(var m=0;m<d.length;m++)this.words[m]=this.words[m]&a.words[m];return this.length=d.length,this._strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var d,m;this.length>a.length?(d=this,m=a):(d=a,m=this);for(var _=0;_<m.length;_++)this.words[_]=d.words[_]^m.words[_];if(this!==d)for(;_<d.length;_++)this.words[_]=d.words[_];return this.length=d.length,this._strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var d=Math.ceil(a/26)|0,m=a%26;this._expand(d),m>0&&d--;for(var _=0;_<d;_++)this.words[_]=~this.words[_]&67108863;return m>0&&(this.words[_]=~this.words[_]&67108863>>26-m),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,d){n(typeof a=="number"&&a>=0);var m=a/26|0,_=a%26;return this._expand(m+1),d?this.words[m]=this.words[m]|1<<_:this.words[m]=this.words[m]&~(1<<_),this._strip()},i.prototype.iadd=function(a){var d;if(this.negative!==0&&a.negative===0)return this.negative=0,d=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,d=this.isub(a),a.negative=1,d._normSign();var m,_;this.length>a.length?(m=this,_=a):(m=a,_=this);for(var E=0,B=0;B<_.length;B++)d=(m.words[B]|0)+(_.words[B]|0)+E,this.words[B]=d&67108863,E=d>>>26;for(;E!==0&&B<m.length;B++)d=(m.words[B]|0)+E,this.words[B]=d&67108863,E=d>>>26;if(this.length=m.length,E!==0)this.words[this.length]=E,this.length++;else if(m!==this)for(;B<m.length;B++)this.words[B]=m.words[B];return this},i.prototype.add=function(a){var d;return a.negative!==0&&this.negative===0?(a.negative=0,d=this.sub(a),a.negative^=1,d):a.negative===0&&this.negative!==0?(this.negative=0,d=a.sub(this),this.negative=1,d):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var d=this.iadd(a);return a.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var m=this.cmp(a);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _,E;m>0?(_=this,E=a):(_=a,E=this);for(var B=0,M=0;M<E.length;M++)d=(_.words[M]|0)-(E.words[M]|0)+B,B=d>>26,this.words[M]=d&67108863;for(;B!==0&&M<_.length;M++)d=(_.words[M]|0)+B,B=d>>26,this.words[M]=d&67108863;if(B===0&&M<_.length&&_!==this)for(;M<_.length;M++)this.words[M]=_.words[M];return this.length=Math.max(this.length,M),_!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function q(g,a,d){d.negative=a.negative^g.negative;var m=g.length+a.length|0;d.length=m,m=m-1|0;var _=g.words[0]|0,E=a.words[0]|0,B=_*E,M=B&67108863,v=B/67108864|0;d.words[0]=M;for(var u=1;u<m;u++){for(var l=v>>>26,w=v&67108863,S=Math.min(u,a.length-1),P=Math.max(0,u-g.length+1);P<=S;P++){var W=u-P|0;_=g.words[W]|0,E=a.words[P]|0,B=_*E+w,l+=B/67108864|0,w=B&67108863}d.words[u]=w|0,v=l|0}return v!==0?d.words[u]=v|0:d.length--,d._strip()}var H=function(a,d,m){var _=a.words,E=d.words,B=m.words,M=0,v,u,l,w=_[0]|0,S=w&8191,P=w>>>13,W=_[1]|0,ee=W&8191,se=W>>>13,Be=_[2]|0,Ie=Be&8191,Me=Be>>>13,Ut=_[3]|0,Te=Ut&8191,qe=Ut>>>13,Cn=_[4]|0,Ne=Cn&8191,ze=Cn>>>13,On=_[5]|0,Fe=On&8191,Oe=On>>>13,Tt=_[6]|0,Ue=Tt&8191,$e=Tt>>>13,Ft=_[7]|0,Ve=Ft&8191,y=Ft>>>13,f=_[8]|0,p=f&8191,x=f>>>13,N=_[9]|0,D=N&8191,K=N>>>13,ve=E[0]|0,be=ve&8191,ge=ve>>>13,Le=E[1]|0,de=Le&8191,Ge=Le>>>13,ho=E[2]|0,Je=ho&8191,Ye=ho>>>13,po=E[3]|0,Xe=po&8191,Qe=po>>>13,mo=E[4]|0,et=mo&8191,tt=mo>>>13,go=E[5]|0,rt=go&8191,nt=go>>>13,yo=E[6]|0,it=yo&8191,st=yo>>>13,wo=E[7]|0,ot=wo&8191,at=wo>>>13,bo=E[8]|0,ct=bo&8191,ut=bo>>>13,vo=E[9]|0,lt=vo&8191,ft=vo>>>13;m.negative=a.negative^d.negative,m.length=19,v=Math.imul(S,be),u=Math.imul(S,ge),u=u+Math.imul(P,be)|0,l=Math.imul(P,ge);var Ii=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,v=Math.imul(ee,be),u=Math.imul(ee,ge),u=u+Math.imul(se,be)|0,l=Math.imul(se,ge),v=v+Math.imul(S,de)|0,u=u+Math.imul(S,Ge)|0,u=u+Math.imul(P,de)|0,l=l+Math.imul(P,Ge)|0;var Ri=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,v=Math.imul(Ie,be),u=Math.imul(Ie,ge),u=u+Math.imul(Me,be)|0,l=Math.imul(Me,ge),v=v+Math.imul(ee,de)|0,u=u+Math.imul(ee,Ge)|0,u=u+Math.imul(se,de)|0,l=l+Math.imul(se,Ge)|0,v=v+Math.imul(S,Je)|0,u=u+Math.imul(S,Ye)|0,u=u+Math.imul(P,Je)|0,l=l+Math.imul(P,Ye)|0;var Mi=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,v=Math.imul(Te,be),u=Math.imul(Te,ge),u=u+Math.imul(qe,be)|0,l=Math.imul(qe,ge),v=v+Math.imul(Ie,de)|0,u=u+Math.imul(Ie,Ge)|0,u=u+Math.imul(Me,de)|0,l=l+Math.imul(Me,Ge)|0,v=v+Math.imul(ee,Je)|0,u=u+Math.imul(ee,Ye)|0,u=u+Math.imul(se,Je)|0,l=l+Math.imul(se,Ye)|0,v=v+Math.imul(S,Xe)|0,u=u+Math.imul(S,Qe)|0,u=u+Math.imul(P,Xe)|0,l=l+Math.imul(P,Qe)|0;var Ti=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,v=Math.imul(Ne,be),u=Math.imul(Ne,ge),u=u+Math.imul(ze,be)|0,l=Math.imul(ze,ge),v=v+Math.imul(Te,de)|0,u=u+Math.imul(Te,Ge)|0,u=u+Math.imul(qe,de)|0,l=l+Math.imul(qe,Ge)|0,v=v+Math.imul(Ie,Je)|0,u=u+Math.imul(Ie,Ye)|0,u=u+Math.imul(Me,Je)|0,l=l+Math.imul(Me,Ye)|0,v=v+Math.imul(ee,Xe)|0,u=u+Math.imul(ee,Qe)|0,u=u+Math.imul(se,Xe)|0,l=l+Math.imul(se,Qe)|0,v=v+Math.imul(S,et)|0,u=u+Math.imul(S,tt)|0,u=u+Math.imul(P,et)|0,l=l+Math.imul(P,tt)|0;var Ci=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,v=Math.imul(Fe,be),u=Math.imul(Fe,ge),u=u+Math.imul(Oe,be)|0,l=Math.imul(Oe,ge),v=v+Math.imul(Ne,de)|0,u=u+Math.imul(Ne,Ge)|0,u=u+Math.imul(ze,de)|0,l=l+Math.imul(ze,Ge)|0,v=v+Math.imul(Te,Je)|0,u=u+Math.imul(Te,Ye)|0,u=u+Math.imul(qe,Je)|0,l=l+Math.imul(qe,Ye)|0,v=v+Math.imul(Ie,Xe)|0,u=u+Math.imul(Ie,Qe)|0,u=u+Math.imul(Me,Xe)|0,l=l+Math.imul(Me,Qe)|0,v=v+Math.imul(ee,et)|0,u=u+Math.imul(ee,tt)|0,u=u+Math.imul(se,et)|0,l=l+Math.imul(se,tt)|0,v=v+Math.imul(S,rt)|0,u=u+Math.imul(S,nt)|0,u=u+Math.imul(P,rt)|0,l=l+Math.imul(P,nt)|0;var Oi=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,v=Math.imul(Ue,be),u=Math.imul(Ue,ge),u=u+Math.imul($e,be)|0,l=Math.imul($e,ge),v=v+Math.imul(Fe,de)|0,u=u+Math.imul(Fe,Ge)|0,u=u+Math.imul(Oe,de)|0,l=l+Math.imul(Oe,Ge)|0,v=v+Math.imul(Ne,Je)|0,u=u+Math.imul(Ne,Ye)|0,u=u+Math.imul(ze,Je)|0,l=l+Math.imul(ze,Ye)|0,v=v+Math.imul(Te,Xe)|0,u=u+Math.imul(Te,Qe)|0,u=u+Math.imul(qe,Xe)|0,l=l+Math.imul(qe,Qe)|0,v=v+Math.imul(Ie,et)|0,u=u+Math.imul(Ie,tt)|0,u=u+Math.imul(Me,et)|0,l=l+Math.imul(Me,tt)|0,v=v+Math.imul(ee,rt)|0,u=u+Math.imul(ee,nt)|0,u=u+Math.imul(se,rt)|0,l=l+Math.imul(se,nt)|0,v=v+Math.imul(S,it)|0,u=u+Math.imul(S,st)|0,u=u+Math.imul(P,it)|0,l=l+Math.imul(P,st)|0;var Li=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Li>>>26)|0,Li&=67108863,v=Math.imul(Ve,be),u=Math.imul(Ve,ge),u=u+Math.imul(y,be)|0,l=Math.imul(y,ge),v=v+Math.imul(Ue,de)|0,u=u+Math.imul(Ue,Ge)|0,u=u+Math.imul($e,de)|0,l=l+Math.imul($e,Ge)|0,v=v+Math.imul(Fe,Je)|0,u=u+Math.imul(Fe,Ye)|0,u=u+Math.imul(Oe,Je)|0,l=l+Math.imul(Oe,Ye)|0,v=v+Math.imul(Ne,Xe)|0,u=u+Math.imul(Ne,Qe)|0,u=u+Math.imul(ze,Xe)|0,l=l+Math.imul(ze,Qe)|0,v=v+Math.imul(Te,et)|0,u=u+Math.imul(Te,tt)|0,u=u+Math.imul(qe,et)|0,l=l+Math.imul(qe,tt)|0,v=v+Math.imul(Ie,rt)|0,u=u+Math.imul(Ie,nt)|0,u=u+Math.imul(Me,rt)|0,l=l+Math.imul(Me,nt)|0,v=v+Math.imul(ee,it)|0,u=u+Math.imul(ee,st)|0,u=u+Math.imul(se,it)|0,l=l+Math.imul(se,st)|0,v=v+Math.imul(S,ot)|0,u=u+Math.imul(S,at)|0,u=u+Math.imul(P,ot)|0,l=l+Math.imul(P,at)|0;var Ni=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,v=Math.imul(p,be),u=Math.imul(p,ge),u=u+Math.imul(x,be)|0,l=Math.imul(x,ge),v=v+Math.imul(Ve,de)|0,u=u+Math.imul(Ve,Ge)|0,u=u+Math.imul(y,de)|0,l=l+Math.imul(y,Ge)|0,v=v+Math.imul(Ue,Je)|0,u=u+Math.imul(Ue,Ye)|0,u=u+Math.imul($e,Je)|0,l=l+Math.imul($e,Ye)|0,v=v+Math.imul(Fe,Xe)|0,u=u+Math.imul(Fe,Qe)|0,u=u+Math.imul(Oe,Xe)|0,l=l+Math.imul(Oe,Qe)|0,v=v+Math.imul(Ne,et)|0,u=u+Math.imul(Ne,tt)|0,u=u+Math.imul(ze,et)|0,l=l+Math.imul(ze,tt)|0,v=v+Math.imul(Te,rt)|0,u=u+Math.imul(Te,nt)|0,u=u+Math.imul(qe,rt)|0,l=l+Math.imul(qe,nt)|0,v=v+Math.imul(Ie,it)|0,u=u+Math.imul(Ie,st)|0,u=u+Math.imul(Me,it)|0,l=l+Math.imul(Me,st)|0,v=v+Math.imul(ee,ot)|0,u=u+Math.imul(ee,at)|0,u=u+Math.imul(se,ot)|0,l=l+Math.imul(se,at)|0,v=v+Math.imul(S,ct)|0,u=u+Math.imul(S,ut)|0,u=u+Math.imul(P,ct)|0,l=l+Math.imul(P,ut)|0;var Ui=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,v=Math.imul(D,be),u=Math.imul(D,ge),u=u+Math.imul(K,be)|0,l=Math.imul(K,ge),v=v+Math.imul(p,de)|0,u=u+Math.imul(p,Ge)|0,u=u+Math.imul(x,de)|0,l=l+Math.imul(x,Ge)|0,v=v+Math.imul(Ve,Je)|0,u=u+Math.imul(Ve,Ye)|0,u=u+Math.imul(y,Je)|0,l=l+Math.imul(y,Ye)|0,v=v+Math.imul(Ue,Xe)|0,u=u+Math.imul(Ue,Qe)|0,u=u+Math.imul($e,Xe)|0,l=l+Math.imul($e,Qe)|0,v=v+Math.imul(Fe,et)|0,u=u+Math.imul(Fe,tt)|0,u=u+Math.imul(Oe,et)|0,l=l+Math.imul(Oe,tt)|0,v=v+Math.imul(Ne,rt)|0,u=u+Math.imul(Ne,nt)|0,u=u+Math.imul(ze,rt)|0,l=l+Math.imul(ze,nt)|0,v=v+Math.imul(Te,it)|0,u=u+Math.imul(Te,st)|0,u=u+Math.imul(qe,it)|0,l=l+Math.imul(qe,st)|0,v=v+Math.imul(Ie,ot)|0,u=u+Math.imul(Ie,at)|0,u=u+Math.imul(Me,ot)|0,l=l+Math.imul(Me,at)|0,v=v+Math.imul(ee,ct)|0,u=u+Math.imul(ee,ut)|0,u=u+Math.imul(se,ct)|0,l=l+Math.imul(se,ut)|0,v=v+Math.imul(S,lt)|0,u=u+Math.imul(S,ft)|0,u=u+Math.imul(P,lt)|0,l=l+Math.imul(P,ft)|0;var Pi=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,v=Math.imul(D,de),u=Math.imul(D,Ge),u=u+Math.imul(K,de)|0,l=Math.imul(K,Ge),v=v+Math.imul(p,Je)|0,u=u+Math.imul(p,Ye)|0,u=u+Math.imul(x,Je)|0,l=l+Math.imul(x,Ye)|0,v=v+Math.imul(Ve,Xe)|0,u=u+Math.imul(Ve,Qe)|0,u=u+Math.imul(y,Xe)|0,l=l+Math.imul(y,Qe)|0,v=v+Math.imul(Ue,et)|0,u=u+Math.imul(Ue,tt)|0,u=u+Math.imul($e,et)|0,l=l+Math.imul($e,tt)|0,v=v+Math.imul(Fe,rt)|0,u=u+Math.imul(Fe,nt)|0,u=u+Math.imul(Oe,rt)|0,l=l+Math.imul(Oe,nt)|0,v=v+Math.imul(Ne,it)|0,u=u+Math.imul(Ne,st)|0,u=u+Math.imul(ze,it)|0,l=l+Math.imul(ze,st)|0,v=v+Math.imul(Te,ot)|0,u=u+Math.imul(Te,at)|0,u=u+Math.imul(qe,ot)|0,l=l+Math.imul(qe,at)|0,v=v+Math.imul(Ie,ct)|0,u=u+Math.imul(Ie,ut)|0,u=u+Math.imul(Me,ct)|0,l=l+Math.imul(Me,ut)|0,v=v+Math.imul(ee,lt)|0,u=u+Math.imul(ee,ft)|0,u=u+Math.imul(se,lt)|0,l=l+Math.imul(se,ft)|0;var Fi=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,v=Math.imul(D,Je),u=Math.imul(D,Ye),u=u+Math.imul(K,Je)|0,l=Math.imul(K,Ye),v=v+Math.imul(p,Xe)|0,u=u+Math.imul(p,Qe)|0,u=u+Math.imul(x,Xe)|0,l=l+Math.imul(x,Qe)|0,v=v+Math.imul(Ve,et)|0,u=u+Math.imul(Ve,tt)|0,u=u+Math.imul(y,et)|0,l=l+Math.imul(y,tt)|0,v=v+Math.imul(Ue,rt)|0,u=u+Math.imul(Ue,nt)|0,u=u+Math.imul($e,rt)|0,l=l+Math.imul($e,nt)|0,v=v+Math.imul(Fe,it)|0,u=u+Math.imul(Fe,st)|0,u=u+Math.imul(Oe,it)|0,l=l+Math.imul(Oe,st)|0,v=v+Math.imul(Ne,ot)|0,u=u+Math.imul(Ne,at)|0,u=u+Math.imul(ze,ot)|0,l=l+Math.imul(ze,at)|0,v=v+Math.imul(Te,ct)|0,u=u+Math.imul(Te,ut)|0,u=u+Math.imul(qe,ct)|0,l=l+Math.imul(qe,ut)|0,v=v+Math.imul(Ie,lt)|0,u=u+Math.imul(Ie,ft)|0,u=u+Math.imul(Me,lt)|0,l=l+Math.imul(Me,ft)|0;var Di=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Di>>>26)|0,Di&=67108863,v=Math.imul(D,Xe),u=Math.imul(D,Qe),u=u+Math.imul(K,Xe)|0,l=Math.imul(K,Qe),v=v+Math.imul(p,et)|0,u=u+Math.imul(p,tt)|0,u=u+Math.imul(x,et)|0,l=l+Math.imul(x,tt)|0,v=v+Math.imul(Ve,rt)|0,u=u+Math.imul(Ve,nt)|0,u=u+Math.imul(y,rt)|0,l=l+Math.imul(y,nt)|0,v=v+Math.imul(Ue,it)|0,u=u+Math.imul(Ue,st)|0,u=u+Math.imul($e,it)|0,l=l+Math.imul($e,st)|0,v=v+Math.imul(Fe,ot)|0,u=u+Math.imul(Fe,at)|0,u=u+Math.imul(Oe,ot)|0,l=l+Math.imul(Oe,at)|0,v=v+Math.imul(Ne,ct)|0,u=u+Math.imul(Ne,ut)|0,u=u+Math.imul(ze,ct)|0,l=l+Math.imul(ze,ut)|0,v=v+Math.imul(Te,lt)|0,u=u+Math.imul(Te,ft)|0,u=u+Math.imul(qe,lt)|0,l=l+Math.imul(qe,ft)|0;var ji=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(ji>>>26)|0,ji&=67108863,v=Math.imul(D,et),u=Math.imul(D,tt),u=u+Math.imul(K,et)|0,l=Math.imul(K,tt),v=v+Math.imul(p,rt)|0,u=u+Math.imul(p,nt)|0,u=u+Math.imul(x,rt)|0,l=l+Math.imul(x,nt)|0,v=v+Math.imul(Ve,it)|0,u=u+Math.imul(Ve,st)|0,u=u+Math.imul(y,it)|0,l=l+Math.imul(y,st)|0,v=v+Math.imul(Ue,ot)|0,u=u+Math.imul(Ue,at)|0,u=u+Math.imul($e,ot)|0,l=l+Math.imul($e,at)|0,v=v+Math.imul(Fe,ct)|0,u=u+Math.imul(Fe,ut)|0,u=u+Math.imul(Oe,ct)|0,l=l+Math.imul(Oe,ut)|0,v=v+Math.imul(Ne,lt)|0,u=u+Math.imul(Ne,ft)|0,u=u+Math.imul(ze,lt)|0,l=l+Math.imul(ze,ft)|0;var qi=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(qi>>>26)|0,qi&=67108863,v=Math.imul(D,rt),u=Math.imul(D,nt),u=u+Math.imul(K,rt)|0,l=Math.imul(K,nt),v=v+Math.imul(p,it)|0,u=u+Math.imul(p,st)|0,u=u+Math.imul(x,it)|0,l=l+Math.imul(x,st)|0,v=v+Math.imul(Ve,ot)|0,u=u+Math.imul(Ve,at)|0,u=u+Math.imul(y,ot)|0,l=l+Math.imul(y,at)|0,v=v+Math.imul(Ue,ct)|0,u=u+Math.imul(Ue,ut)|0,u=u+Math.imul($e,ct)|0,l=l+Math.imul($e,ut)|0,v=v+Math.imul(Fe,lt)|0,u=u+Math.imul(Fe,ft)|0,u=u+Math.imul(Oe,lt)|0,l=l+Math.imul(Oe,ft)|0;var zi=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(zi>>>26)|0,zi&=67108863,v=Math.imul(D,it),u=Math.imul(D,st),u=u+Math.imul(K,it)|0,l=Math.imul(K,st),v=v+Math.imul(p,ot)|0,u=u+Math.imul(p,at)|0,u=u+Math.imul(x,ot)|0,l=l+Math.imul(x,at)|0,v=v+Math.imul(Ve,ct)|0,u=u+Math.imul(Ve,ut)|0,u=u+Math.imul(y,ct)|0,l=l+Math.imul(y,ut)|0,v=v+Math.imul(Ue,lt)|0,u=u+Math.imul(Ue,ft)|0,u=u+Math.imul($e,lt)|0,l=l+Math.imul($e,ft)|0;var $i=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+($i>>>26)|0,$i&=67108863,v=Math.imul(D,ot),u=Math.imul(D,at),u=u+Math.imul(K,ot)|0,l=Math.imul(K,at),v=v+Math.imul(p,ct)|0,u=u+Math.imul(p,ut)|0,u=u+Math.imul(x,ct)|0,l=l+Math.imul(x,ut)|0,v=v+Math.imul(Ve,lt)|0,u=u+Math.imul(Ve,ft)|0,u=u+Math.imul(y,lt)|0,l=l+Math.imul(y,ft)|0;var Vi=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,v=Math.imul(D,ct),u=Math.imul(D,ut),u=u+Math.imul(K,ct)|0,l=Math.imul(K,ut),v=v+Math.imul(p,lt)|0,u=u+Math.imul(p,ft)|0,u=u+Math.imul(x,lt)|0,l=l+Math.imul(x,ft)|0;var Zi=(M+v|0)+((u&8191)<<13)|0;M=(l+(u>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,v=Math.imul(D,lt),u=Math.imul(D,ft),u=u+Math.imul(K,lt)|0,l=Math.imul(K,ft);var Ki=(M+v|0)+((u&8191)<<13)|0;return M=(l+(u>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,B[0]=Ii,B[1]=Ri,B[2]=Mi,B[3]=Ti,B[4]=Ci,B[5]=Oi,B[6]=Li,B[7]=Ni,B[8]=Ui,B[9]=Pi,B[10]=Fi,B[11]=Di,B[12]=ji,B[13]=qi,B[14]=zi,B[15]=$i,B[16]=Vi,B[17]=Zi,B[18]=Ki,M!==0&&(B[19]=M,m.length++),m};Math.imul||(H=q);function Z(g,a,d){d.negative=a.negative^g.negative,d.length=g.length+a.length;for(var m=0,_=0,E=0;E<d.length-1;E++){var B=_;_=0;for(var M=m&67108863,v=Math.min(E,a.length-1),u=Math.max(0,E-g.length+1);u<=v;u++){var l=E-u,w=g.words[l]|0,S=a.words[u]|0,P=w*S,W=P&67108863;B=B+(P/67108864|0)|0,W=W+M|0,M=W&67108863,B=B+(W>>>26)|0,_+=B>>>26,B&=67108863}d.words[E]=M,m=B,B=_}return m!==0?d.words[E]=m:d.length--,d._strip()}function te(g,a,d){return Z(g,a,d)}i.prototype.mulTo=function(a,d){var m,_=this.length+a.length;return this.length===10&&a.length===10?m=H(this,a,d):_<63?m=q(this,a,d):_<1024?m=Z(this,a,d):m=te(this,a,d),m},i.prototype.mul=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),this.mulTo(a,d)},i.prototype.mulf=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),te(this,a,d)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var d=a<0;d&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var m=0,_=0;_<this.length;_++){var E=(this.words[_]|0)*a,B=(E&67108863)+(m&67108863);m>>=26,m+=E/67108864|0,m+=B>>>26,this.words[_]=B&67108863}return m!==0&&(this.words[_]=m,this.length++),this.length=a===0?1:this.length,d?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var d=F(a);if(d.length===0)return new i(1);for(var m=this,_=0;_<d.length&&d[_]===0;_++,m=m.sqr());if(++_<d.length)for(var E=m.sqr();_<d.length;_++,E=E.sqr())d[_]!==0&&(m=m.mul(E));return m},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var d=a%26,m=(a-d)/26,_=67108863>>>26-d<<26-d,E;if(d!==0){var B=0;for(E=0;E<this.length;E++){var M=this.words[E]&_,v=(this.words[E]|0)-M<<d;this.words[E]=v|B,B=M>>>26-d}B&&(this.words[E]=B,this.length++)}if(m!==0){for(E=this.length-1;E>=0;E--)this.words[E+m]=this.words[E];for(E=0;E<m;E++)this.words[E]=0;this.length+=m}return this._strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,d,m){n(typeof a=="number"&&a>=0);var _;d?_=(d-d%26)/26:_=0;var E=a%26,B=Math.min((a-E)/26,this.length),M=67108863^67108863>>>E<<E,v=m;if(_-=B,_=Math.max(0,_),v){for(var u=0;u<B;u++)v.words[u]=this.words[u];v.length=B}if(B!==0)if(this.length>B)for(this.length-=B,u=0;u<this.length;u++)this.words[u]=this.words[u+B];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(l!==0||u>=_);u--){var w=this.words[u]|0;this.words[u]=l<<26-E|w>>>E,l=w&M}return v&&l!==0&&(v.words[v.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,d,m){return n(this.negative===0),this.iushrn(a,d,m)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var d=a%26,m=(a-d)/26,_=1<<d;if(this.length<=m)return!1;var E=this.words[m];return!!(E&_)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var d=a%26,m=(a-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(d!==0&&m++,this.length=Math.min(m,this.length),d!==0){var _=67108863^67108863>>>d<<d;this.words[this.length-1]&=_}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,d,m){var _=a.length+m,E;this._expand(_);var B,M=0;for(E=0;E<a.length;E++){B=(this.words[E+m]|0)+M;var v=(a.words[E]|0)*d;B-=v&67108863,M=(B>>26)-(v/67108864|0),this.words[E+m]=B&67108863}for(;E<this.length-m;E++)B=(this.words[E+m]|0)+M,M=B>>26,this.words[E+m]=B&67108863;if(M===0)return this._strip();for(n(M===-1),M=0,E=0;E<this.length;E++)B=-(this.words[E]|0)+M,M=B>>26,this.words[E]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,d){var m=this.length-a.length,_=this.clone(),E=a,B=E.words[E.length-1]|0,M=this._countBits(B);m=26-M,m!==0&&(E=E.ushln(m),_.iushln(m),B=E.words[E.length-1]|0);var v=_.length-E.length,u;if(d!=="mod"){u=new i(null),u.length=v+1,u.words=new Array(u.length);for(var l=0;l<u.length;l++)u.words[l]=0}var w=_.clone()._ishlnsubmul(E,1,v);w.negative===0&&(_=w,u&&(u.words[v]=1));for(var S=v-1;S>=0;S--){var P=(_.words[E.length+S]|0)*67108864+(_.words[E.length+S-1]|0);for(P=Math.min(P/B|0,67108863),_._ishlnsubmul(E,P,S);_.negative!==0;)P--,_.negative=0,_._ishlnsubmul(E,1,S),_.isZero()||(_.negative^=1);u&&(u.words[S]=P)}return u&&u._strip(),_._strip(),d!=="div"&&m!==0&&_.iushrn(m),{div:u||null,mod:_}},i.prototype.divmod=function(a,d,m){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var _,E,B;return this.negative!==0&&a.negative===0?(B=this.neg().divmod(a,d),d!=="mod"&&(_=B.div.neg()),d!=="div"&&(E=B.mod.neg(),m&&E.negative!==0&&E.iadd(a)),{div:_,mod:E}):this.negative===0&&a.negative!==0?(B=this.divmod(a.neg(),d),d!=="mod"&&(_=B.div.neg()),{div:_,mod:B.mod}):(this.negative&a.negative)!==0?(B=this.neg().divmod(a.neg(),d),d!=="div"&&(E=B.mod.neg(),m&&E.negative!==0&&E.isub(a)),{div:B.div,mod:E}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?d==="div"?{div:this.divn(a.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,d)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var d=this.divmod(a);if(d.mod.isZero())return d.div;var m=d.div.negative!==0?d.mod.isub(a):d.mod,_=a.ushrn(1),E=a.andln(1),B=m.cmp(_);return B<0||E===1&&B===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(a){var d=a<0;d&&(a=-a),n(a<=67108863);for(var m=(1<<26)%a,_=0,E=this.length-1;E>=0;E--)_=(m*_+(this.words[E]|0))%a;return d?-_:_},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var d=a<0;d&&(a=-a),n(a<=67108863);for(var m=0,_=this.length-1;_>=0;_--){var E=(this.words[_]|0)+m*67108864;this.words[_]=E/a|0,m=E%a}return this._strip(),d?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var d=this,m=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var _=new i(1),E=new i(0),B=new i(0),M=new i(1),v=0;d.isEven()&&m.isEven();)d.iushrn(1),m.iushrn(1),++v;for(var u=m.clone(),l=d.clone();!d.isZero();){for(var w=0,S=1;(d.words[0]&S)===0&&w<26;++w,S<<=1);if(w>0)for(d.iushrn(w);w-- >0;)(_.isOdd()||E.isOdd())&&(_.iadd(u),E.isub(l)),_.iushrn(1),E.iushrn(1);for(var P=0,W=1;(m.words[0]&W)===0&&P<26;++P,W<<=1);if(P>0)for(m.iushrn(P);P-- >0;)(B.isOdd()||M.isOdd())&&(B.iadd(u),M.isub(l)),B.iushrn(1),M.iushrn(1);d.cmp(m)>=0?(d.isub(m),_.isub(B),E.isub(M)):(m.isub(d),B.isub(_),M.isub(E))}return{a:B,b:M,gcd:m.iushln(v)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var d=this,m=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var _=new i(1),E=new i(0),B=m.clone();d.cmpn(1)>0&&m.cmpn(1)>0;){for(var M=0,v=1;(d.words[0]&v)===0&&M<26;++M,v<<=1);if(M>0)for(d.iushrn(M);M-- >0;)_.isOdd()&&_.iadd(B),_.iushrn(1);for(var u=0,l=1;(m.words[0]&l)===0&&u<26;++u,l<<=1);if(u>0)for(m.iushrn(u);u-- >0;)E.isOdd()&&E.iadd(B),E.iushrn(1);d.cmp(m)>=0?(d.isub(m),_.isub(E)):(m.isub(d),E.isub(_))}var w;return d.cmpn(1)===0?w=_:w=E,w.cmpn(0)<0&&w.iadd(a),w},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var d=this.clone(),m=a.clone();d.negative=0,m.negative=0;for(var _=0;d.isEven()&&m.isEven();_++)d.iushrn(1),m.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;m.isEven();)m.iushrn(1);var E=d.cmp(m);if(E<0){var B=d;d=m,m=B}else if(E===0||m.cmpn(1)===0)break;d.isub(m)}while(!0);return m.iushln(_)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var d=a%26,m=(a-d)/26,_=1<<d;if(this.length<=m)return this._expand(m+1),this.words[m]|=_,this;for(var E=_,B=m;E!==0&&B<this.length;B++){var M=this.words[B]|0;M+=E,E=M>>>26,M&=67108863,this.words[B]=M}return E!==0&&(this.words[B]=E,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var d=a<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var m;if(this.length>1)m=1;else{d&&(a=-a),n(a<=67108863,"Number is too big");var _=this.words[0]|0;m=_===a?0:_<a?-1:1}return this.negative!==0?-m|0:m},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var d=this.ucmp(a);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var d=0,m=this.length-1;m>=0;m--){var _=this.words[m]|0,E=a.words[m]|0;if(_!==E){_<E?d=-1:_>E&&(d=1);break}}return d},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new z(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var X={k256:null,p224:null,p192:null,p25519:null};function oe(g,a){this.name=g,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}oe.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},oe.prototype.ireduce=function(a){var d=a,m;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),m=d.bitLength();while(m>this.n);var _=m<this.n?-1:d.ucmp(this.p);return _===0?(d.words[0]=0,d.length=1):_>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},oe.prototype.split=function(a,d){a.iushrn(this.n,0,d)},oe.prototype.imulK=function(a){return a.imul(this.k)};function pe(){oe.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(pe,oe),pe.prototype.split=function(a,d){for(var m=4194303,_=Math.min(a.length,9),E=0;E<_;E++)d.words[E]=a.words[E];if(d.length=_,a.length<=9){a.words[0]=0,a.length=1;return}var B=a.words[9];for(d.words[d.length++]=B&m,E=10;E<a.length;E++){var M=a.words[E]|0;a.words[E-10]=(M&m)<<4|B>>>22,B=M}B>>>=22,a.words[E-10]=B,B===0&&a.length>10?a.length-=10:a.length-=9},pe.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var d=0,m=0;m<a.length;m++){var _=a.words[m]|0;d+=_*977,a.words[m]=d&67108863,d=_*64+(d/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function le(){oe.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(le,oe);function L(){oe.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(L,oe);function U(){oe.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(U,oe),U.prototype.imulK=function(a){for(var d=0,m=0;m<a.length;m++){var _=(a.words[m]|0)*19+d,E=_&67108863;_>>>=26,a.words[m]=E,d=_}return d!==0&&(a.words[a.length++]=d),a},i._prime=function(a){if(X[a])return X[a];var d;if(a==="k256")d=new pe;else if(a==="p224")d=new le;else if(a==="p192")d=new L;else if(a==="p25519")d=new U;else throw new Error("Unknown prime "+a);return X[a]=d,d};function z(g){if(typeof g=="string"){var a=i._prime(g);this.m=a.p,this.prime=a}else n(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}z.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},z.prototype._verify2=function(a,d){n((a.negative|d.negative)===0,"red works only with positives"),n(a.red&&a.red===d.red,"red works only with red numbers")},z.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(A(a,a.umod(this.m)._forceRed(this)),a)},z.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},z.prototype.add=function(a,d){this._verify2(a,d);var m=a.add(d);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},z.prototype.iadd=function(a,d){this._verify2(a,d);var m=a.iadd(d);return m.cmp(this.m)>=0&&m.isub(this.m),m},z.prototype.sub=function(a,d){this._verify2(a,d);var m=a.sub(d);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},z.prototype.isub=function(a,d){this._verify2(a,d);var m=a.isub(d);return m.cmpn(0)<0&&m.iadd(this.m),m},z.prototype.shl=function(a,d){return this._verify1(a),this.imod(a.ushln(d))},z.prototype.imul=function(a,d){return this._verify2(a,d),this.imod(a.imul(d))},z.prototype.mul=function(a,d){return this._verify2(a,d),this.imod(a.mul(d))},z.prototype.isqr=function(a){return this.imul(a,a.clone())},z.prototype.sqr=function(a){return this.mul(a,a)},z.prototype.sqrt=function(a){if(a.isZero())return a.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var m=this.m.add(new i(1)).iushrn(2);return this.pow(a,m)}for(var _=this.m.subn(1),E=0;!_.isZero()&&_.andln(1)===0;)E++,_.iushrn(1);n(!_.isZero());var B=new i(1).toRed(this),M=B.redNeg(),v=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);this.pow(u,v).cmp(M)!==0;)u.redIAdd(M);for(var l=this.pow(u,_),w=this.pow(a,_.addn(1).iushrn(1)),S=this.pow(a,_),P=E;S.cmp(B)!==0;){for(var W=S,ee=0;W.cmp(B)!==0;ee++)W=W.redSqr();n(ee<P);var se=this.pow(l,new i(1).iushln(P-ee-1));w=w.redMul(se),l=se.redSqr(),S=S.redMul(l),P=ee}return w},z.prototype.invm=function(a){var d=a._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},z.prototype.pow=function(a,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return a.clone();var m=4,_=new Array(1<<m);_[0]=new i(1).toRed(this),_[1]=a;for(var E=2;E<_.length;E++)_[E]=this.mul(_[E-1],a);var B=_[0],M=0,v=0,u=d.bitLength()%26;for(u===0&&(u=26),E=d.length-1;E>=0;E--){for(var l=d.words[E],w=u-1;w>=0;w--){var S=l>>w&1;if(B!==_[0]&&(B=this.sqr(B)),S===0&&M===0){v=0;continue}M<<=1,M|=S,v++,!(v!==m&&(E!==0||w!==0))&&(B=this.mul(B,_[M]),v=0,M=0)}u=26}return B},z.prototype.convertTo=function(a){var d=a.umod(this.m);return d===a?d.clone():d},z.prototype.convertFrom=function(a){var d=a.clone();return d.red=null,d},i.mont=function(a){return new V(a)};function V(g){z.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(V,z),V.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},V.prototype.convertFrom=function(a){var d=this.imod(a.mul(this.rinv));return d.red=null,d},V.prototype.imul=function(a,d){if(a.isZero()||d.isZero())return a.words[0]=0,a.length=1,a;var m=a.imul(d),_=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(_).iushrn(this.shift),B=E;return E.cmp(this.m)>=0?B=E.isub(this.m):E.cmpn(0)<0&&(B=E.iadd(this.m)),B._forceRed(this)},V.prototype.mul=function(a,d){if(a.isZero()||d.isZero())return new i(0)._forceRed(this);var m=a.mul(d),_=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(_).iushrn(this.shift),B=E;return E.cmp(this.m)>=0?B=E.isub(this.m):E.cmpn(0)<0&&(B=E.iadd(this.m)),B._forceRed(this)},V.prototype.invm=function(a){var d=this.imod(a._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(r,xf)})(Vn)),Vn.exports}var Ef=fc();const Ho=Ds(Ef);var Dn={exports:{}};var Go;function Sf(){return Go||(Go=1,(function(r,e){var t=Ks(),n=t.Buffer;function s(o,c){for(var h in o)c[h]=o[h]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(s(t,e),e.Buffer=i);function i(o,c,h){return n(o,c,h)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,c,h){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,c,h)},i.alloc=function(o,c,h){if(typeof o!="number")throw new TypeError("Argument must be a number");var b=n(o);return c!==void 0?typeof h=="string"?b.fill(c,h):b.fill(c):b.fill(0),b},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(Dn,Dn.exports)),Dn.exports}var ts,Jo;function kf(){if(Jo)return ts;Jo=1;var r=Sf().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),c=o.charCodeAt(0);if(n[c]!==255)throw new TypeError(o+" is ambiguous");n[c]=i}var h=t.length,b=t.charAt(0),A=Math.log(h)/Math.log(256),O=Math.log(256)/Math.log(h);function I(T){if((Array.isArray(T)||T instanceof Uint8Array)&&(T=r.from(T)),!r.isBuffer(T))throw new TypeError("Expected Buffer");if(T.length===0)return"";for(var F=0,q=0,H=0,Z=T.length;H!==Z&&T[H]===0;)H++,F++;for(var te=(Z-H)*O+1>>>0,X=new Uint8Array(te);H!==Z;){for(var oe=T[H],pe=0,le=te-1;(oe!==0||pe<q)&&le!==-1;le--,pe++)oe+=256*X[le]>>>0,X[le]=oe%h>>>0,oe=oe/h>>>0;if(oe!==0)throw new Error("Non-zero carry");q=pe,H++}for(var L=te-q;L!==te&&X[L]===0;)L++;for(var U=b.repeat(F);L<te;++L)U+=t.charAt(X[L]);return U}function k(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return r.alloc(0);for(var F=0,q=0,H=0;T[F]===b;)q++,F++;for(var Z=(T.length-F)*A+1>>>0,te=new Uint8Array(Z);F<T.length;){var X=T.charCodeAt(F);if(X>255)return;var oe=n[X];if(oe===255)return;for(var pe=0,le=Z-1;(oe!==0||pe<H)&&le!==-1;le--,pe++)oe+=h*te[le]>>>0,te[le]=oe%256>>>0,oe=oe/256>>>0;if(oe!==0)throw new Error("Non-zero carry");H=pe,F++}for(var L=Z-H;L!==Z&&te[L]===0;)L++;var U=r.allocUnsafe(q+(Z-L));U.fill(0,0,q);for(var z=q;L!==Z;)U[z++]=te[L++];return U}function C(T){var F=k(T);if(F)return F;throw new Error("Non-base"+h+" character")}return{encode:I,decodeUnsafe:k,decode:C}}return ts=e,ts}var rs,Yo;function dc(){if(Yo)return rs;Yo=1;var r=kf(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return rs=r(e),rs}var Af=dc();const gt=Ds(Af),Xo=Va;var Re={};function Jt(r,e,t){return e<=r&&r<=t}function vi(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function Bf(r){for(var e=String(r),t=e.length,n=0,s=[];n<t;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===t-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var c=i&1023,h=o&1023;s.push(65536+(c<<10)+h),n+=1}else s.push(65533)}n+=1}return s}function If(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var ai=-1;function Qs(r){this.tokens=[].slice.call(r)}Qs.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ai},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var Jr=-1;function ns(r,e){if(r)throw TypeError("Decoder error");return e||65533}var ci="utf-8";function ui(r,e){if(!(this instanceof ui))return new ui(r,e);if(r=r!==void 0?String(r).toLowerCase():ci,r!==ci)throw new Error("Encoding not supported. Only utf-8 is supported");e=vi(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ui.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=vi(t),this._streaming||(this._decoder=new Rf({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new Qs(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Jr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Jr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),If(i)}};function li(r,e){if(!(this instanceof li))return new li(r,e);if(r=r!==void 0?String(r).toLowerCase():ci,r!==ci)throw new Error("Encoding not supported. Only utf-8 is supported");e=vi(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}li.prototype={encode:function(e,t){e=e?String(e):"",t=vi(t),this._streaming||(this._encoder=new Mf(this._options)),this._streaming=!!t.stream;for(var n=[],s=new Qs(Bf(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Jr);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Jr;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function Rf(r){var e=r.fatal,t=0,n=0,s=0,i=128,o=191;this.handler=function(c,h){if(h===ai&&s!==0)return s=0,ns(e);if(h===ai)return Jr;if(s===0){if(Jt(h,0,127))return h;if(Jt(h,194,223))s=1,t=h-192;else if(Jt(h,224,239))h===224&&(i=160),h===237&&(o=159),s=2,t=h-224;else if(Jt(h,240,244))h===240&&(i=144),h===244&&(o=143),s=3,t=h-240;else return ns(e);return t=t<<6*s,null}if(!Jt(h,i,o))return t=s=n=0,i=128,o=191,c.prepend(h),ns(e);if(i=128,o=191,n+=1,t+=h-128<<6*(s-n),n!==s)return null;var b=t;return t=s=n=0,b}}function Mf(r){r.fatal,this.handler=function(e,t){if(t===ai)return Jr;if(Jt(t,0,127))return t;var n,s;Jt(t,128,2047)?(n=1,s=192):Jt(t,2048,65535)?(n=2,s=224):Jt(t,65536,1114111)&&(n=3,s=240);for(var i=[(t>>6*n)+s];n>0;){var o=t>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Tf=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ui,TextEncoder:li},Symbol.toStringTag,{value:"Module"})),Cf=Fs(Tf);var Qo;function Of(){if(Qo)return Re;Qo=1;var r=Re&&Re.__createBinding||(Object.create?(function(L,U,z,V){V===void 0&&(V=z),Object.defineProperty(L,V,{enumerable:!0,get:function(){return U[z]}})}):(function(L,U,z,V){V===void 0&&(V=z),L[V]=U[z]})),e=Re&&Re.__setModuleDefault||(Object.create?(function(L,U){Object.defineProperty(L,"default",{enumerable:!0,value:U})}):function(L,U){L.default=U}),t=Re&&Re.__decorate||function(L,U,z,V){var g=arguments.length,a=g<3?U:V===null?V=Object.getOwnPropertyDescriptor(U,z):V,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(L,U,z,V);else for(var m=L.length-1;m>=0;m--)(d=L[m])&&(a=(g<3?d(a):g>3?d(U,z,a):d(U,z))||a);return g>3&&a&&Object.defineProperty(U,z,a),a},n=Re&&Re.__importStar||function(L){if(L&&L.__esModule)return L;var U={};if(L!=null)for(var z in L)z!=="default"&&Object.hasOwnProperty.call(L,z)&&r(U,L,z);return e(U,L),U},s=Re&&Re.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(Re,"__esModule",{value:!0}),Re.deserializeUnchecked=Re.deserialize=Re.serialize=Re.BinaryReader=Re.BinaryWriter=Re.BorshError=Re.baseDecode=Re.baseEncode=void 0;const i=s(fc()),o=s(dc()),c=n(Cf),h=typeof TextDecoder!="function"?c.TextDecoder:TextDecoder,b=new h("utf-8",{fatal:!0});function A(L){return typeof L=="string"&&(L=Buffer.from(L,"utf8")),o.default.encode(Buffer.from(L))}Re.baseEncode=A;function O(L){return Buffer.from(o.default.decode(L))}Re.baseDecode=O;const I=1024;class k extends Error{constructor(U){super(U),this.fieldPath=[],this.originalMessage=U}addToFieldPath(U){this.fieldPath.splice(0,0,U),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Re.BorshError=k;class C{constructor(){this.buf=Buffer.alloc(I),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(I)]))}writeU8(U){this.maybeResize(),this.buf.writeUInt8(U,this.length),this.length+=1}writeU16(U){this.maybeResize(),this.buf.writeUInt16LE(U,this.length),this.length+=2}writeU32(U){this.maybeResize(),this.buf.writeUInt32LE(U,this.length),this.length+=4}writeU64(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",8)))}writeU128(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",16)))}writeU256(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",32)))}writeU512(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",64)))}writeBuffer(U){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),U,Buffer.alloc(I)]),this.length+=U.length}writeString(U){this.maybeResize();const z=Buffer.from(U,"utf8");this.writeU32(z.length),this.writeBuffer(z)}writeFixedArray(U){this.writeBuffer(Buffer.from(U))}writeArray(U,z){this.maybeResize(),this.writeU32(U.length);for(const V of U)this.maybeResize(),z(V)}toArray(){return this.buf.subarray(0,this.length)}}Re.BinaryWriter=C;function T(L,U,z){const V=z.value;z.value=function(...g){try{return V.apply(this,g)}catch(a){if(a instanceof RangeError){const d=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(d)>=0)throw new k("Reached the end of buffer when deserializing")}throw a}}}class F{constructor(U){this.buf=U,this.offset=0}readU8(){const U=this.buf.readUInt8(this.offset);return this.offset+=1,U}readU16(){const U=this.buf.readUInt16LE(this.offset);return this.offset+=2,U}readU32(){const U=this.buf.readUInt32LE(this.offset);return this.offset+=4,U}readU64(){const U=this.readBuffer(8);return new i.default(U,"le")}readU128(){const U=this.readBuffer(16);return new i.default(U,"le")}readU256(){const U=this.readBuffer(32);return new i.default(U,"le")}readU512(){const U=this.readBuffer(64);return new i.default(U,"le")}readBuffer(U){if(this.offset+U>this.buf.length)throw new k(`Expected buffer length ${U} isn't within bounds`);const z=this.buf.slice(this.offset,this.offset+U);return this.offset+=U,z}readString(){const U=this.readU32(),z=this.readBuffer(U);try{return b.decode(z)}catch(V){throw new k(`Error decoding UTF-8 string: ${V}`)}}readFixedArray(U){return new Uint8Array(this.readBuffer(U))}readArray(U){const z=this.readU32(),V=Array();for(let g=0;g<z;++g)V.push(U());return V}}t([T],F.prototype,"readU8",null),t([T],F.prototype,"readU16",null),t([T],F.prototype,"readU32",null),t([T],F.prototype,"readU64",null),t([T],F.prototype,"readU128",null),t([T],F.prototype,"readU256",null),t([T],F.prototype,"readU512",null),t([T],F.prototype,"readString",null),t([T],F.prototype,"readFixedArray",null),t([T],F.prototype,"readArray",null),Re.BinaryReader=F;function q(L){return L.charAt(0).toUpperCase()+L.slice(1)}function H(L,U,z,V,g){try{if(typeof V=="string")g[`write${q(V)}`](z);else if(V instanceof Array)if(typeof V[0]=="number"){if(z.length!==V[0])throw new k(`Expecting byte array of length ${V[0]}, but got ${z.length} bytes`);g.writeFixedArray(z)}else if(V.length===2&&typeof V[1]=="number"){if(z.length!==V[1])throw new k(`Expecting byte array of length ${V[1]}, but got ${z.length} bytes`);for(let a=0;a<V[1];a++)H(L,null,z[a],V[0],g)}else g.writeArray(z,a=>{H(L,U,a,V[0],g)});else if(V.kind!==void 0)switch(V.kind){case"option":{z==null?g.writeU8(0):(g.writeU8(1),H(L,U,z,V.type,g));break}case"map":{g.writeU32(z.size),z.forEach((a,d)=>{H(L,U,d,V.key,g),H(L,U,a,V.value,g)});break}default:throw new k(`FieldType ${V} unrecognized`)}else Z(L,z,g)}catch(a){throw a instanceof k&&a.addToFieldPath(U),a}}function Z(L,U,z){if(typeof U.borshSerialize=="function"){U.borshSerialize(z);return}const V=L.get(U.constructor);if(!V)throw new k(`Class ${U.constructor.name} is missing in schema`);if(V.kind==="struct")V.fields.map(([g,a])=>{H(L,g,U[g],a,z)});else if(V.kind==="enum"){const g=U[V.field];for(let a=0;a<V.values.length;++a){const[d,m]=V.values[a];if(d===g){z.writeU8(a),H(L,d,U[d],m,z);break}}}else throw new k(`Unexpected schema kind: ${V.kind} for ${U.constructor.name}`)}function te(L,U,z=C){const V=new z;return Z(L,U,V),V.toArray()}Re.serialize=te;function X(L,U,z,V){try{if(typeof z=="string")return V[`read${q(z)}`]();if(z instanceof Array){if(typeof z[0]=="number")return V.readFixedArray(z[0]);if(typeof z[1]=="number"){const g=[];for(let a=0;a<z[1];a++)g.push(X(L,null,z[0],V));return g}else return V.readArray(()=>X(L,U,z[0],V))}if(z.kind==="option")return V.readU8()?X(L,U,z.type,V):void 0;if(z.kind==="map"){let g=new Map;const a=V.readU32();for(let d=0;d<a;d++){const m=X(L,U,z.key,V),_=X(L,U,z.value,V);g.set(m,_)}return g}return oe(L,z,V)}catch(g){throw g instanceof k&&g.addToFieldPath(U),g}}function oe(L,U,z){if(typeof U.borshDeserialize=="function")return U.borshDeserialize(z);const V=L.get(U);if(!V)throw new k(`Class ${U.name} is missing in schema`);if(V.kind==="struct"){const g={};for(const[a,d]of L.get(U).fields)g[a]=X(L,a,d,z);return new U(g)}if(V.kind==="enum"){const g=z.readU8();if(g>=V.values.length)throw new k(`Enum index: ${g} is out of range`);const[a,d]=V.values[g],m=X(L,a,d,z);return new U({[a]:m})}throw new k(`Unexpected schema kind: ${V.kind} for ${U.constructor.name}`)}function pe(L,U,z,V=F){const g=new V(z),a=oe(L,U,g);if(g.offset<z.length)throw new k(`Unexpected ${z.length-g.offset} bytes after deserialized data`);return a}Re.deserialize=pe;function le(L,U,z,V=F){const g=new V(z);return oe(L,U,g)}return Re.deserializeUnchecked=le,Re}var is=Of(),$={},ea;function Lf(){if(ea)return $;ea=1,Object.defineProperty($,"__esModule",{value:!0}),$.s16=$.s8=$.nu64be=$.u48be=$.u40be=$.u32be=$.u24be=$.u16be=$.nu64=$.u48=$.u40=$.u32=$.u24=$.u16=$.u8=$.offset=$.greedy=$.Constant=$.UTF8=$.CString=$.Blob=$.Boolean=$.BitField=$.BitStructure=$.VariantLayout=$.Union=$.UnionLayoutDiscriminator=$.UnionDiscriminator=$.Structure=$.Sequence=$.DoubleBE=$.Double=$.FloatBE=$.Float=$.NearInt64BE=$.NearInt64=$.NearUInt64BE=$.NearUInt64=$.IntBE=$.Int=$.UIntBE=$.UInt=$.OffsetLayout=$.GreedyCount=$.ExternalLayout=$.bindConstructorLayout=$.nameWithProperty=$.Layout=$.uint8ArrayToBuffer=$.checkUint8Array=void 0,$.constant=$.utf8=$.cstr=$.blob=$.unionLayoutDiscriminator=$.union=$.seq=$.bits=$.struct=$.f64be=$.f64=$.f32be=$.f32=$.ns64be=$.s48be=$.s40be=$.s32be=$.s24be=$.s16be=$.ns64=$.s48=$.s40=$.s32=$.s24=void 0;const r=Ks();function e(u){if(!(u instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}$.checkUint8Array=e;function t(u){return e(u),r.Buffer.from(u.buffer,u.byteOffset,u.length)}$.uint8ArrayToBuffer=t;let n=class{constructor(l,w){if(!Number.isInteger(l))throw new TypeError("span must be an integer");this.span=l,this.property=w}makeDestinationObject(){return{}}getSpan(l,w){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(l){const w=Object.create(this.constructor.prototype);return Object.assign(w,this),w.property=l,w}fromArray(l){}};$.Layout=n;function s(u,l){return l.property?u+"["+l.property+"]":u}$.nameWithProperty=s;function i(u,l){if(typeof u!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(u,"layout_"))throw new Error("Class is already bound to a layout");if(!(l&&l instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(l,"boundConstructor_"))throw new Error("layout is already bound to a constructor");u.layout_=l,l.boundConstructor_=u,l.makeDestinationObject=(()=>new u),Object.defineProperty(u.prototype,"encode",{value(w,S){return l.encode(this,w,S)},writable:!0}),Object.defineProperty(u,"decode",{value(w,S){return l.decode(w,S)},writable:!0})}$.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}$.ExternalLayout=o;class c extends o{constructor(l=1,w){if(!Number.isInteger(l)||0>=l)throw new TypeError("elementSpan must be a (positive) integer");super(-1,w),this.elementSpan=l}isCount(){return!0}decode(l,w=0){e(l);const S=l.length-w;return Math.floor(S/this.elementSpan)}encode(l,w,S){return 0}}$.GreedyCount=c;class h extends o{constructor(l,w=0,S){if(!(l instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(w))throw new TypeError("offset must be integer or undefined");super(l.span,S||l.property),this.layout=l,this.offset=w}isCount(){return this.layout instanceof b||this.layout instanceof A}decode(l,w=0){return this.layout.decode(l,w+this.offset)}encode(l,w,S=0){return this.layout.encode(l,w,S+this.offset)}}$.OffsetLayout=h;class b extends n{constructor(l,w){if(super(l,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,w=0){return t(l).readUIntLE(w,this.span)}encode(l,w,S=0){return t(w).writeUIntLE(l,S,this.span),this.span}}$.UInt=b;class A extends n{constructor(l,w){if(super(l,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,w=0){return t(l).readUIntBE(w,this.span)}encode(l,w,S=0){return t(w).writeUIntBE(l,S,this.span),this.span}}$.UIntBE=A;class O extends n{constructor(l,w){if(super(l,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,w=0){return t(l).readIntLE(w,this.span)}encode(l,w,S=0){return t(w).writeIntLE(l,S,this.span),this.span}}$.Int=O;class I extends n{constructor(l,w){if(super(l,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,w=0){return t(l).readIntBE(w,this.span)}encode(l,w,S=0){return t(w).writeIntBE(l,S,this.span),this.span}}$.IntBE=I;const k=Math.pow(2,32);function C(u){const l=Math.floor(u/k),w=u-l*k;return{hi32:l,lo32:w}}function T(u,l){return u*k+l}class F extends n{constructor(l){super(8,l)}decode(l,w=0){const S=t(l),P=S.readUInt32LE(w),W=S.readUInt32LE(w+4);return T(W,P)}encode(l,w,S=0){const P=C(l),W=t(w);return W.writeUInt32LE(P.lo32,S),W.writeUInt32LE(P.hi32,S+4),8}}$.NearUInt64=F;class q extends n{constructor(l){super(8,l)}decode(l,w=0){const S=t(l),P=S.readUInt32BE(w),W=S.readUInt32BE(w+4);return T(P,W)}encode(l,w,S=0){const P=C(l),W=t(w);return W.writeUInt32BE(P.hi32,S),W.writeUInt32BE(P.lo32,S+4),8}}$.NearUInt64BE=q;class H extends n{constructor(l){super(8,l)}decode(l,w=0){const S=t(l),P=S.readUInt32LE(w),W=S.readInt32LE(w+4);return T(W,P)}encode(l,w,S=0){const P=C(l),W=t(w);return W.writeUInt32LE(P.lo32,S),W.writeInt32LE(P.hi32,S+4),8}}$.NearInt64=H;class Z extends n{constructor(l){super(8,l)}decode(l,w=0){const S=t(l),P=S.readInt32BE(w),W=S.readUInt32BE(w+4);return T(P,W)}encode(l,w,S=0){const P=C(l),W=t(w);return W.writeInt32BE(P.hi32,S),W.writeUInt32BE(P.lo32,S+4),8}}$.NearInt64BE=Z;class te extends n{constructor(l){super(4,l)}decode(l,w=0){return t(l).readFloatLE(w)}encode(l,w,S=0){return t(w).writeFloatLE(l,S),4}}$.Float=te;class X extends n{constructor(l){super(4,l)}decode(l,w=0){return t(l).readFloatBE(w)}encode(l,w,S=0){return t(w).writeFloatBE(l,S),4}}$.FloatBE=X;class oe extends n{constructor(l){super(8,l)}decode(l,w=0){return t(l).readDoubleLE(w)}encode(l,w,S=0){return t(w).writeDoubleLE(l,S),8}}$.Double=oe;class pe extends n{constructor(l){super(8,l)}decode(l,w=0){return t(l).readDoubleBE(w)}encode(l,w,S=0){return t(w).writeDoubleBE(l,S),8}}$.DoubleBE=pe;class le extends n{constructor(l,w,S){if(!(l instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(w instanceof o&&w.isCount()||Number.isInteger(w)&&0<=w))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let P=-1;!(w instanceof o)&&0<l.span&&(P=w*l.span),super(P,S),this.elementLayout=l,this.count=w}getSpan(l,w=0){if(0<=this.span)return this.span;let S=0,P=this.count;if(P instanceof o&&(P=P.decode(l,w)),0<this.elementLayout.span)S=P*this.elementLayout.span;else{let W=0;for(;W<P;)S+=this.elementLayout.getSpan(l,w+S),++W}return S}decode(l,w=0){const S=[];let P=0,W=this.count;for(W instanceof o&&(W=W.decode(l,w));P<W;)S.push(this.elementLayout.decode(l,w)),w+=this.elementLayout.getSpan(l,w),P+=1;return S}encode(l,w,S=0){const P=this.elementLayout,W=l.reduce((ee,se)=>ee+P.encode(se,w,S+ee),0);return this.count instanceof o&&this.count.encode(l.length,w,S),W}}$.Sequence=le;class L extends n{constructor(l,w,S){if(!(Array.isArray(l)&&l.reduce((W,ee)=>W&&ee instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof w=="boolean"&&S===void 0&&(S=w,w=void 0);for(const W of l)if(0>W.span&&W.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let P=-1;try{P=l.reduce((W,ee)=>W+ee.getSpan(),0)}catch{}super(P,w),this.fields=l,this.decodePrefixes=!!S}getSpan(l,w=0){if(0<=this.span)return this.span;let S=0;try{S=this.fields.reduce((P,W)=>{const ee=W.getSpan(l,w);return w+=ee,P+ee},0)}catch{throw new RangeError("indeterminate span")}return S}decode(l,w=0){e(l);const S=this.makeDestinationObject();for(const P of this.fields)if(P.property!==void 0&&(S[P.property]=P.decode(l,w)),w+=P.getSpan(l,w),this.decodePrefixes&&l.length===w)break;return S}encode(l,w,S=0){const P=S;let W=0,ee=0;for(const se of this.fields){let Be=se.span;if(ee=0<Be?Be:0,se.property!==void 0){const Ie=l[se.property];Ie!==void 0&&(ee=se.encode(Ie,w,S),0>Be&&(Be=se.getSpan(w,S)))}W=S,S+=Be}return W+ee-P}fromArray(l){const w=this.makeDestinationObject();for(const S of this.fields)S.property!==void 0&&0<l.length&&(w[S.property]=l.shift());return w}layoutFor(l){if(typeof l!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===l)return w}offsetOf(l){if(typeof l!="string")throw new TypeError("property must be string");let w=0;for(const S of this.fields){if(S.property===l)return w;0>S.span?w=-1:0<=w&&(w+=S.span)}}}$.Structure=L;class U{constructor(l){this.property=l}decode(l,w){throw new Error("UnionDiscriminator is abstract")}encode(l,w,S){throw new Error("UnionDiscriminator is abstract")}}$.UnionDiscriminator=U;class z extends U{constructor(l,w){if(!(l instanceof o&&l.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(w||l.property||"variant"),this.layout=l}decode(l,w){return this.layout.decode(l,w)}encode(l,w,S){return this.layout.encode(l,w,S)}}$.UnionLayoutDiscriminator=z;class V extends n{constructor(l,w,S){let P;if(l instanceof b||l instanceof A)P=new z(new h(l));else if(l instanceof o&&l.isCount())P=new z(l);else if(l instanceof U)P=l;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(w===void 0&&(w=null),!(w===null||w instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(w!==null){if(0>w.span)throw new Error("defaultLayout must have constant span");w.property===void 0&&(w=w.replicate("content"))}let W=-1;w&&(W=w.span,0<=W&&(l instanceof b||l instanceof A)&&(W+=P.layout.span)),super(W,S),this.discriminator=P,this.usesPrefixDiscriminator=l instanceof b||l instanceof A,this.defaultLayout=w,this.registry={};let ee=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(se){return ee(se)},this.configGetSourceVariant=function(se){ee=se.bind(this)}}getSpan(l,w=0){if(0<=this.span)return this.span;const S=this.getVariant(l,w);if(!S)throw new Error("unable to determine span for unrecognized variant");return S.getSpan(l,w)}defaultGetSourceVariant(l){if(Object.prototype.hasOwnProperty.call(l,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(l,this.defaultLayout.property))return;const w=this.registry[l[this.discriminator.property]];if(w&&(!w.layout||w.property&&Object.prototype.hasOwnProperty.call(l,w.property)))return w}else for(const w in this.registry){const S=this.registry[w];if(S.property&&Object.prototype.hasOwnProperty.call(l,S.property))return S}throw new Error("unable to infer src variant")}decode(l,w=0){let S;const P=this.discriminator,W=P.decode(l,w),ee=this.registry[W];if(ee===void 0){const se=this.defaultLayout;let Be=0;this.usesPrefixDiscriminator&&(Be=P.layout.span),S=this.makeDestinationObject(),S[P.property]=W,S[se.property]=se.decode(l,w+Be)}else S=ee.decode(l,w);return S}encode(l,w,S=0){const P=this.getSourceVariant(l);if(P===void 0){const W=this.discriminator,ee=this.defaultLayout;let se=0;return this.usesPrefixDiscriminator&&(se=W.layout.span),W.encode(l[W.property],w,S),se+ee.encode(l[ee.property],w,S+se)}return P.encode(l,w,S)}addVariant(l,w,S){const P=new g(this,l,w,S);return this.registry[l]=P,P}getVariant(l,w=0){let S;return l instanceof Uint8Array?S=this.discriminator.decode(l,w):S=l,this.registry[S]}}$.Union=V;class g extends n{constructor(l,w,S,P){if(!(l instanceof V))throw new TypeError("union must be a Union");if(!Number.isInteger(w)||0>w)throw new TypeError("variant must be a (non-negative) integer");if(typeof S=="string"&&P===void 0&&(P=S,S=null),S){if(!(S instanceof n))throw new TypeError("layout must be a Layout");if(l.defaultLayout!==null&&0<=S.span&&S.span>l.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof P!="string")throw new TypeError("variant must have a String property")}let W=l.span;0>l.span&&(W=S?S.span:0,0<=W&&l.usesPrefixDiscriminator&&(W+=l.discriminator.layout.span)),super(W,P),this.union=l,this.variant=w,this.layout=S||null}getSpan(l,w=0){if(0<=this.span)return this.span;let S=0;this.union.usesPrefixDiscriminator&&(S=this.union.discriminator.layout.span);let P=0;return this.layout&&(P=this.layout.getSpan(l,w+S)),S+P}decode(l,w=0){const S=this.makeDestinationObject();if(this!==this.union.getVariant(l,w))throw new Error("variant mismatch");let P=0;return this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span),this.layout?S[this.property]=this.layout.decode(l,w+P):this.property?S[this.property]=!0:this.union.usesPrefixDiscriminator&&(S[this.union.discriminator.property]=this.variant),S}encode(l,w,S=0){let P=0;if(this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(l,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,w,S);let W=P;if(this.layout&&(this.layout.encode(l[this.property],w,S+P),W+=this.layout.getSpan(w,S+P),0<=this.union.span&&W>this.union.span))throw new Error("encoded variant overruns containing union");return W}fromArray(l){if(this.layout)return this.layout.fromArray(l)}}$.VariantLayout=g;function a(u){return 0>u&&(u+=4294967296),u}class d extends n{constructor(l,w,S){if(!(l instanceof b||l instanceof A))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof w=="string"&&S===void 0&&(S=w,w=!1),4<l.span)throw new RangeError("word cannot exceed 32 bits");super(l.span,S),this.word=l,this.msb=!!w,this.fields=[];let P=0;this._packedSetValue=function(W){return P=a(W),this},this._packedGetValue=function(){return P}}decode(l,w=0){const S=this.makeDestinationObject(),P=this.word.decode(l,w);this._packedSetValue(P);for(const W of this.fields)W.property!==void 0&&(S[W.property]=W.decode(l));return S}encode(l,w,S=0){const P=this.word.decode(w,S);this._packedSetValue(P);for(const W of this.fields)if(W.property!==void 0){const ee=l[W.property];ee!==void 0&&W.encode(ee)}return this.word.encode(this._packedGetValue(),w,S)}addField(l,w){const S=new m(this,l,w);return this.fields.push(S),S}addBoolean(l){const w=new _(this,l);return this.fields.push(w),w}fieldFor(l){if(typeof l!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===l)return w}}$.BitStructure=d;class m{constructor(l,w,S){if(!(l instanceof d))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(w)||0>=w)throw new TypeError("bits must be positive integer");const P=8*l.span,W=l.fields.reduce((ee,se)=>ee+se.bits,0);if(w+W>P)throw new Error("bits too long for span remainder ("+(P-W)+" of "+P+" remain)");this.container=l,this.bits=w,this.valueMask=(1<<w)-1,w===32&&(this.valueMask=4294967295),this.start=W,this.container.msb&&(this.start=P-W-w),this.wordMask=a(this.valueMask<<this.start),this.property=S}decode(l,w){const S=this.container._packedGetValue();return a(S&this.wordMask)>>>this.start}encode(l){if(typeof l!="number"||!Number.isInteger(l)||l!==a(l&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const w=this.container._packedGetValue(),S=a(l<<this.start);this.container._packedSetValue(a(w&~this.wordMask)|S)}}$.BitField=m;class _ extends m{constructor(l,w){super(l,1,w)}decode(l,w){return!!super.decode(l,w)}encode(l){typeof l=="boolean"&&(l=+l),super.encode(l)}}$.Boolean=_;class E extends n{constructor(l,w){if(!(l instanceof o&&l.isCount()||Number.isInteger(l)&&0<=l))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let S=-1;l instanceof o||(S=l),super(S,w),this.length=l}getSpan(l,w){let S=this.span;return 0>S&&(S=this.length.decode(l,w)),S}decode(l,w=0){let S=this.span;return 0>S&&(S=this.length.decode(l,w)),t(l).slice(w,w+S)}encode(l,w,S){let P=this.length;if(this.length instanceof o&&(P=l.length),!(l instanceof Uint8Array&&P===l.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+P+") Uint8Array as src");if(S+P>w.length)throw new RangeError("encoding overruns Uint8Array");const W=t(l);return t(w).write(W.toString("hex"),S,P,"hex"),this.length instanceof o&&this.length.encode(P,w,S),P}}$.Blob=E;class B extends n{constructor(l){super(-1,l)}getSpan(l,w=0){e(l);let S=w;for(;S<l.length&&l[S]!==0;)S+=1;return 1+S-w}decode(l,w=0){const S=this.getSpan(l,w);return t(l).slice(w,w+S-1).toString("utf-8")}encode(l,w,S=0){typeof l!="string"&&(l=String(l));const P=r.Buffer.from(l,"utf8"),W=P.length;if(S+W>w.length)throw new RangeError("encoding overruns Buffer");const ee=t(w);return P.copy(ee,S),ee[S+W]=0,W+1}}$.CString=B;class M extends n{constructor(l,w){if(typeof l=="string"&&w===void 0&&(w=l,l=void 0),l===void 0)l=-1;else if(!Number.isInteger(l))throw new TypeError("maxSpan must be an integer");super(-1,w),this.maxSpan=l}getSpan(l,w=0){return e(l),l.length-w}decode(l,w=0){const S=this.getSpan(l,w);if(0<=this.maxSpan&&this.maxSpan<S)throw new RangeError("text length exceeds maxSpan");return t(l).slice(w,w+S).toString("utf-8")}encode(l,w,S=0){typeof l!="string"&&(l=String(l));const P=r.Buffer.from(l,"utf8"),W=P.length;if(0<=this.maxSpan&&this.maxSpan<W)throw new RangeError("text length exceeds maxSpan");if(S+W>w.length)throw new RangeError("encoding overruns Buffer");return P.copy(t(w),S),W}}$.UTF8=M;class v extends n{constructor(l,w){super(0,w),this.value=l}decode(l,w){return this.value}encode(l,w,S){return 0}}return $.Constant=v,$.greedy=((u,l)=>new c(u,l)),$.offset=((u,l,w)=>new h(u,l,w)),$.u8=(u=>new b(1,u)),$.u16=(u=>new b(2,u)),$.u24=(u=>new b(3,u)),$.u32=(u=>new b(4,u)),$.u40=(u=>new b(5,u)),$.u48=(u=>new b(6,u)),$.nu64=(u=>new F(u)),$.u16be=(u=>new A(2,u)),$.u24be=(u=>new A(3,u)),$.u32be=(u=>new A(4,u)),$.u40be=(u=>new A(5,u)),$.u48be=(u=>new A(6,u)),$.nu64be=(u=>new q(u)),$.s8=(u=>new O(1,u)),$.s16=(u=>new O(2,u)),$.s24=(u=>new O(3,u)),$.s32=(u=>new O(4,u)),$.s40=(u=>new O(5,u)),$.s48=(u=>new O(6,u)),$.ns64=(u=>new H(u)),$.s16be=(u=>new I(2,u)),$.s24be=(u=>new I(3,u)),$.s32be=(u=>new I(4,u)),$.s40be=(u=>new I(5,u)),$.s48be=(u=>new I(6,u)),$.ns64be=(u=>new Z(u)),$.f32=(u=>new te(u)),$.f32be=(u=>new X(u)),$.f64=(u=>new oe(u)),$.f64be=(u=>new pe(u)),$.struct=((u,l,w)=>new L(u,l,w)),$.bits=((u,l,w)=>new d(u,l,w)),$.seq=((u,l,w)=>new le(u,l,w)),$.union=((u,l,w)=>new V(u,l,w)),$.unionLayoutDiscriminator=((u,l)=>new z(u,l)),$.blob=((u,l)=>new E(u,l)),$.cstr=(u=>new B(u)),$.utf8=((u,l)=>new M(u,l)),$.constant=((u,l)=>new v(u,l)),$}var R=Lf(),Nf=8078e3,Uf=8078001,Pf=8078004,Ff=8078005,Df=8078006,jf=8078011;function hc(r){return Array.isArray(r)?"%5B"+r.map(hc).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function qf([r,e]){return`${r}=${hc(e)}`}function zf(r){const e=Object.entries(r).map(qf).join("&");return btoa(e)}function $f(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${zf(e)}'`),`${t}\``}}var $r=class extends Error{cause=this.cause;context;constructor(...[r,e]){let t,n;if(e){const{cause:i,...o}=e;i&&(n={cause:i}),Object.keys(o).length>0&&(t=o)}const s=$f(r,t);super(s,n),this.context={__code:r,...t},this.name="SolanaError"}};function Vf(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function Zf(r){return Object.freeze({...r,encode:e=>{const t=new Uint8Array(Vf(e,r));return r.write(e,t,0),t}})}function Kf(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function Pr(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function Wf(r,e){if(Pr(r)!==Pr(e))throw new $r(Pf);if(Pr(r)&&Pr(e)&&r.fixedSize!==e.fixedSize)throw new $r(Ff,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!Pr(r)&&!Pr(e)&&r.maxSize!==e.maxSize)throw new $r(Df,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function Hf(r,e,t=0){if(e.length-t<=0)throw new $r(Nf,{codecDescription:r})}function Gf(r,e,t,n=0){const s=t.length-n;if(s<e)throw new $r(Uf,{bytesLength:s,codecDescription:r,expected:e})}function Jf(r,e,t,n){if(n<e||n>t)throw new $r(jf,{codecDescription:r,max:t,min:e,value:n})}function pc(r){return r?.endian!==1}function Yf(r){return Zf({fixedSize:r.size,write(e,t,n){r.range&&Jf(r.name,r.range[0],r.range[1],e);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),e,pc(r.config)),t.set(new Uint8Array(s),n),n+r.size}})}function Xf(r){return Kf({fixedSize:r.size,read(e,t=0){Hf(r.name,e,t),Gf(r.name,r.size,e,t);const n=new DataView(Qf(e,t,r.size));return[r.get(n,pc(r.config)),t+r.size]}})}function Qf(r,e,t){const n=r.byteOffset+(e??0),s=t??r.byteLength;return r.buffer.slice(n,n+s)}var ed=(r={})=>Yf({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),td=(r={})=>Xf({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),rd=(r={})=>Wf(ed(r),td(r));class nd extends TypeError{constructor(e,t){let n;const{message:s,explanation:i,...o}=e,{path:c}=e,h=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??h),i!=null&&(this.cause=h),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function id(r){return Rn(r)&&typeof r[Symbol.iterator]=="function"}function Rn(r){return typeof r=="object"&&r!=null}function fi(r){return Rn(r)&&!Array.isArray(r)}function jt(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function sd(r){const{done:e,value:t}=r.next();return e?void 0:t}function od(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=e,{type:o}=t,{refinement:c,message:h=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${jt(n)}\``}=r;return{value:n,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...r,message:h}}function*ta(r,e,t,n){id(r)||(r=[r]);for(const s of r){const i=od(s,e,t,n);i&&(yield i)}}function*eo(r,e,t={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=t,c={path:n,branch:s,mask:o};i&&(r=e.coercer(r,c));let h="valid";for(const b of e.validator(r,c))b.explanation=t.message,h="not_valid",yield[b,void 0];for(let[b,A,O]of e.entries(r,c)){const I=eo(A,O,{path:b===void 0?n:[...n,b],branch:b===void 0?s:[...s,A],coerce:i,mask:o,message:t.message});for(const k of I)k[0]?(h=k[0].refinement!=null?"not_refined":"not_valid",yield[k[0],void 0]):i&&(A=k[1],b===void 0?r=A:r instanceof Map?r.set(b,A):r instanceof Set?r.add(A):Rn(r)&&(A!==void 0||b in r)&&(r[b]=A))}if(h!=="not_valid")for(const b of e.refiner(r,c))b.explanation=t.message,h="not_refined",yield[b,void 0];h==="valid"&&(yield[void 0,r])}let Zt=class{constructor(e){const{type:t,schema:n,validator:s,refiner:i,coercer:o=h=>h,entries:c=function*(){}}=e;this.type=t,this.schema=n,this.entries=c,this.coercer=o,s?this.validator=(h,b)=>{const A=s(h,b);return ta(A,b,this,h)}:this.validator=()=>[],i?this.refiner=(h,b)=>{const A=i(h,b);return ta(A,b,this,h)}:this.refiner=()=>[]}assert(e,t){return ad(e,this,t)}create(e,t){return Q(e,this,t)}is(e){return mc(e,this)}mask(e,t){return cd(e,this,t)}validate(e,t={}){return Mn(e,this,t)}};function ad(r,e,t){const n=Mn(r,e,{message:t});if(n[0])throw n[0]}function Q(r,e,t){const n=Mn(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function cd(r,e,t){const n=Mn(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function mc(r,e){return!Mn(r,e)[0]}function Mn(r,e,t={}){const n=eo(r,e,t),s=sd(n);return s[0]?[new nd(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Mr(r,e){return new Zt({type:r,schema:null,validator:e})}function ud(){return Mr("any",()=>!0)}function re(r){return new Zt({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${jt(e)}`}})}function Vt(){return Mr("boolean",r=>typeof r=="boolean")}function to(r){return Mr("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${jt(e)}`)}function De(r){const e=jt(r),t=typeof r;return new Zt({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${jt(n)}`}})}function ld(){return Mr("never",()=>!1)}function ne(r){return new Zt({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function j(){return Mr("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${jt(r)}`)}function fe(r){return new Zt({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function gc(r,e){return new Zt({type:"record",schema:null,*entries(t){if(Rn(t))for(const n in t){const s=t[n];yield[n,n,r],yield[n,s,e]}},validator(t){return fi(t)||`Expected an object, but received: ${jt(t)}`},coercer(t){return fi(t)?{...t}:t}})}function Y(){return Mr("string",r=>typeof r=="string"||`Expected a string, but received: ${jt(r)}`)}function ro(r){const e=ld();return new Zt({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let s=0;s<n;s++)yield[s,t[s],r[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${jt(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function G(r){const e=Object.keys(r);return new Zt({type:"type",schema:r,*entries(t){if(Rn(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return fi(t)||`Expected an object, but received: ${jt(t)}`},coercer(t){return fi(t)?{...t}:t}})}function Bt(r){const e=r.map(t=>t.type).join(" | ");return new Zt({type:"union",schema:null,coercer(t,n){for(const s of r){const[i,o]=s.validate(t,{coerce:!0,mask:n.mask});if(!i)return o}return t},validator(t,n){const s=[];for(const i of r){const[...o]=eo(t,i,n),[c]=o;if(c[0])for(const[h]of o)h&&s.push(h);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${jt(t)}`,...s]}})}function tn(){return Mr("unknown",()=>!0)}function Tn(r,e,t){return new Zt({...r,coercer:(n,s)=>mc(n,e)?r.coercer(t(n,s),s):r.coercer(n,s)})}var jn,fd=new Uint8Array(16);function yc(){if(!jn&&(jn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!jn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jn(fd)}const dd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function _i(r){return typeof r=="string"&&dd.test(r)}var mt=[];for(var ss=0;ss<256;++ss)mt.push((ss+256).toString(16).substr(1));function xi(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(mt[r[e+0]]+mt[r[e+1]]+mt[r[e+2]]+mt[r[e+3]]+"-"+mt[r[e+4]]+mt[r[e+5]]+"-"+mt[r[e+6]]+mt[r[e+7]]+"-"+mt[r[e+8]]+mt[r[e+9]]+"-"+mt[r[e+10]]+mt[r[e+11]]+mt[r[e+12]]+mt[r[e+13]]+mt[r[e+14]]+mt[r[e+15]]).toLowerCase();if(!_i(t))throw TypeError("Stringified UUID is invalid");return t}var ra,os,as=0,cs=0;function hd(r,e,t){var n=e&&t||0,s=e||new Array(16);r=r||{};var i=r.node||ra,o=r.clockseq!==void 0?r.clockseq:os;if(i==null||o==null){var c=r.random||(r.rng||yc)();i==null&&(i=ra=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=os=(c[6]<<8|c[7])&16383)}var h=r.msecs!==void 0?r.msecs:Date.now(),b=r.nsecs!==void 0?r.nsecs:cs+1,A=h-as+(b-cs)/1e4;if(A<0&&r.clockseq===void 0&&(o=o+1&16383),(A<0||h>as)&&r.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");as=h,cs=b,os=o,h+=122192928e5;var O=((h&268435455)*1e4+b)%4294967296;s[n++]=O>>>24&255,s[n++]=O>>>16&255,s[n++]=O>>>8&255,s[n++]=O&255;var I=h/4294967296*1e4&268435455;s[n++]=I>>>8&255,s[n++]=I&255,s[n++]=I>>>24&15|16,s[n++]=I>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var k=0;k<6;++k)s[n+k]=i[k];return e||xi(s)}function wc(r){if(!_i(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function pd(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var md="6ba7b810-9dad-11d1-80b4-00c04fd430c8",gd="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function bc(r,e,t){function n(s,i,o,c){if(typeof s=="string"&&(s=pd(s)),typeof i=="string"&&(i=wc(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+s.length);if(h.set(i),h.set(s,i.length),h=t(h),h[6]=h[6]&15|e,h[8]=h[8]&63|128,o){c=c||0;for(var b=0;b<16;++b)o[c+b]=h[b];return o}return xi(h)}try{n.name=r}catch{}return n.DNS=md,n.URL=gd,n}function yd(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return wd(bd(vd(r),r.length*8))}function wd(r){for(var e=[],t=r.length*32,n="0123456789abcdef",s=0;s<t;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(o)}return e}function vc(r){return(r+64>>>9<<4)+14+1}function bd(r,e){r[e>>5]|=128<<e%32,r[vc(e)-1]=e;for(var t=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var c=t,h=n,b=s,A=i;t=vt(t,n,s,i,r[o],7,-680876936),i=vt(i,t,n,s,r[o+1],12,-389564586),s=vt(s,i,t,n,r[o+2],17,606105819),n=vt(n,s,i,t,r[o+3],22,-1044525330),t=vt(t,n,s,i,r[o+4],7,-176418897),i=vt(i,t,n,s,r[o+5],12,1200080426),s=vt(s,i,t,n,r[o+6],17,-1473231341),n=vt(n,s,i,t,r[o+7],22,-45705983),t=vt(t,n,s,i,r[o+8],7,1770035416),i=vt(i,t,n,s,r[o+9],12,-1958414417),s=vt(s,i,t,n,r[o+10],17,-42063),n=vt(n,s,i,t,r[o+11],22,-1990404162),t=vt(t,n,s,i,r[o+12],7,1804603682),i=vt(i,t,n,s,r[o+13],12,-40341101),s=vt(s,i,t,n,r[o+14],17,-1502002290),n=vt(n,s,i,t,r[o+15],22,1236535329),t=_t(t,n,s,i,r[o+1],5,-165796510),i=_t(i,t,n,s,r[o+6],9,-1069501632),s=_t(s,i,t,n,r[o+11],14,643717713),n=_t(n,s,i,t,r[o],20,-373897302),t=_t(t,n,s,i,r[o+5],5,-701558691),i=_t(i,t,n,s,r[o+10],9,38016083),s=_t(s,i,t,n,r[o+15],14,-660478335),n=_t(n,s,i,t,r[o+4],20,-405537848),t=_t(t,n,s,i,r[o+9],5,568446438),i=_t(i,t,n,s,r[o+14],9,-1019803690),s=_t(s,i,t,n,r[o+3],14,-187363961),n=_t(n,s,i,t,r[o+8],20,1163531501),t=_t(t,n,s,i,r[o+13],5,-1444681467),i=_t(i,t,n,s,r[o+2],9,-51403784),s=_t(s,i,t,n,r[o+7],14,1735328473),n=_t(n,s,i,t,r[o+12],20,-1926607734),t=xt(t,n,s,i,r[o+5],4,-378558),i=xt(i,t,n,s,r[o+8],11,-2022574463),s=xt(s,i,t,n,r[o+11],16,1839030562),n=xt(n,s,i,t,r[o+14],23,-35309556),t=xt(t,n,s,i,r[o+1],4,-1530992060),i=xt(i,t,n,s,r[o+4],11,1272893353),s=xt(s,i,t,n,r[o+7],16,-155497632),n=xt(n,s,i,t,r[o+10],23,-1094730640),t=xt(t,n,s,i,r[o+13],4,681279174),i=xt(i,t,n,s,r[o],11,-358537222),s=xt(s,i,t,n,r[o+3],16,-722521979),n=xt(n,s,i,t,r[o+6],23,76029189),t=xt(t,n,s,i,r[o+9],4,-640364487),i=xt(i,t,n,s,r[o+12],11,-421815835),s=xt(s,i,t,n,r[o+15],16,530742520),n=xt(n,s,i,t,r[o+2],23,-995338651),t=Et(t,n,s,i,r[o],6,-198630844),i=Et(i,t,n,s,r[o+7],10,1126891415),s=Et(s,i,t,n,r[o+14],15,-1416354905),n=Et(n,s,i,t,r[o+5],21,-57434055),t=Et(t,n,s,i,r[o+12],6,1700485571),i=Et(i,t,n,s,r[o+3],10,-1894986606),s=Et(s,i,t,n,r[o+10],15,-1051523),n=Et(n,s,i,t,r[o+1],21,-2054922799),t=Et(t,n,s,i,r[o+8],6,1873313359),i=Et(i,t,n,s,r[o+15],10,-30611744),s=Et(s,i,t,n,r[o+6],15,-1560198380),n=Et(n,s,i,t,r[o+13],21,1309151649),t=Et(t,n,s,i,r[o+4],6,-145523070),i=Et(i,t,n,s,r[o+11],10,-1120210379),s=Et(s,i,t,n,r[o+2],15,718787259),n=Et(n,s,i,t,r[o+9],21,-343485551),t=dr(t,c),n=dr(n,h),s=dr(s,b),i=dr(i,A)}return[t,n,s,i]}function vd(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(vc(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function dr(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function _d(r,e){return r<<e|r>>>32-e}function Ei(r,e,t,n,s,i){return dr(_d(dr(dr(e,r),dr(n,i)),s),t)}function vt(r,e,t,n,s,i,o){return Ei(e&t|~e&n,r,e,s,i,o)}function _t(r,e,t,n,s,i,o){return Ei(e&n|t&~n,r,e,s,i,o)}function xt(r,e,t,n,s,i,o){return Ei(e^t^n,r,e,s,i,o)}function Et(r,e,t,n,s,i,o){return Ei(t^(e|~n),r,e,s,i,o)}var xd=bc("v3",48,yd);function Ed(r,e,t){r=r||{};var n=r.random||(r.rng||yc)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=n[s];return e}return xi(n)}function Sd(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function us(r,e){return r<<e|r>>>32-e}function kd(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),c=new Array(o),h=0;h<o;++h){for(var b=new Uint32Array(16),A=0;A<16;++A)b[A]=r[h*64+A*4]<<24|r[h*64+A*4+1]<<16|r[h*64+A*4+2]<<8|r[h*64+A*4+3];c[h]=b}c[o-1][14]=(r.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(r.length-1)*8&4294967295;for(var O=0;O<o;++O){for(var I=new Uint32Array(80),k=0;k<16;++k)I[k]=c[O][k];for(var C=16;C<80;++C)I[C]=us(I[C-3]^I[C-8]^I[C-14]^I[C-16],1);for(var T=t[0],F=t[1],q=t[2],H=t[3],Z=t[4],te=0;te<80;++te){var X=Math.floor(te/20),oe=us(T,5)+Sd(X,F,q,H)+Z+e[X]+I[te]>>>0;Z=H,H=q,q=us(F,30)>>>0,F=T,T=oe}t[0]=t[0]+T>>>0,t[1]=t[1]+F>>>0,t[2]=t[2]+q>>>0,t[3]=t[3]+H>>>0,t[4]=t[4]+Z>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Ad=bc("v5",80,kd);const Bd="00000000-0000-0000-0000-000000000000";function Id(r){if(!_i(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const Rd=Object.freeze(Object.defineProperty({__proto__:null,NIL:Bd,parse:wc,stringify:xi,v1:hd,v3:xd,v4:Ed,v5:Ad,validate:_i,version:Id},Symbol.toStringTag,{value:"Module"})),_c=Fs(Rd);var ls,na;function Md(){if(na)return ls;na=1;const r=_c.v4;return ls=function(t,n,s,i){if(typeof t!="string")throw new TypeError(t+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const c={method:t};if(o===2&&(c.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");c.params=n}if(typeof s>"u"){const h=typeof i.generator=="function"?i.generator:function(){return r()};c.id=h(c,i)}else o===2&&s===null?i.notificationIdNull&&(c.id=null):c.id=s;return c},ls}var fs,ia;function Td(){if(ia)return fs;ia=1;const r=_c.v4,e=Md(),t=function(n,s){if(!(this instanceof t))return new t(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return r()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return fs=t,t.prototype.request=function(n,s,i,o){const c=this;let h=null;const b=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&b)throw new TypeError("JSON-RPC 1.0 does not support batching");if(b||!b&&n&&typeof n=="object"&&typeof s=="function")o=s,h=n;else{typeof i=="function"&&(o=i,i=void 0);const I=typeof o=="function";try{h=e(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(k){if(I){o(k);return}throw k}if(!I)return h}let O;try{O=JSON.stringify(h,this.options.replacer)}catch(I){o(I);return}return this.callServer(O,function(I,k){c._parseResponse(I,k,o)}),h},t.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s){i();return}let o;try{o=JSON.parse(s,this.options.reviver)}catch(c){i(c);return}if(i.length===3)if(Array.isArray(o)){const c=function(b){return typeof b.error<"u"},h=function(b){return!c(b)};i(null,o.filter(c),o.filter(h));return}else{i(null,o.error,o.result);return}i(null,o)},fs}var Cd=Td();const Od=Ds(Cd);var Ld=class extends wi{socket;constructor(r,e){super(),this.socket=new window.WebSocket(r,e.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=t=>this.emit("message",t.data),this.socket.onerror=t=>this.emit("error",t),this.socket.onclose=t=>{this.emit("close",t.code,t.reason)}}send(r,e,t){const n=t||e;try{this.socket.send(r),n()}catch(s){n(s)}}close(r,e){this.socket.close(r,e)}addEventListener(r,e,t){this.socket.addEventListener(r,e,t)}};function Nd(r,e){return new Ld(r,e)}var Ud=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Pd=class extends wi{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(r,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:n=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},c,h){super(),this.webSocketFactory=r,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),h?this.dataPack=h:this.dataPack=new Ud,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(r,e,t,n){return!n&&typeof t=="object"&&(n=t,t=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(r,e),c={jsonrpc:"2.0",method:r,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(c),n,h=>{if(h)return i(h);this.queue[o]={promise:[s,i]},t&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},t))})})}async login(r){const e=await this.call("rpc.login",r);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(r,e){return new Promise((t,n)=>{if(!this.ready)return n(new Error("socket not ready"));const s={jsonrpc:"2.0",method:r,params:e};this.socket.send(this.dataPack.encode(s),i=>{if(i)return n(i);t()})})}async subscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.on",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed subscribing to an event '"+r+"' with: "+e[r]);return e}async unsubscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.off",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(r,e){this.socket&&this.socket.close(r||1e3,e)}setAutoReconnect(r){this.reconnect=r}setReconnectInterval(r){this.reconnect_interval=r}setMaxReconnects(r){this.max_reconnects=r}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(r,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(r,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=xe.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const n=[t.notification];if(t.params.constructor===Object)n.push(t.params);else for(let s=0;s<t.params.length;s++)n.push(t.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",t,n),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(r,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",t,n),1))})}};class xc extends ja{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Fa(e);const n=Ws(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Hr(i)}update(e){return ni(this),this.iHash.update(e),this}digestInto(e){ni(this),Ir(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ec=(r,e,t)=>new xc(r,e).update(t).digest();Ec.create=(r,e)=>new xc(r,e);const sa=(r,e)=>(r+(r>=0?e:-e)/Sc)/e;function Fd(r,e,t){const[[n,s],[i,o]]=e,c=sa(o*r,t),h=sa(-s*r,t);let b=r-c*n-h*i,A=-c*s-h*o;const O=b<Qt,I=A<Qt;O&&(b=-b),I&&(A=-A);const k=An(Math.ceil(Wa(t)/2))+Vr;if(b<Qt||b>=k||A<Qt||A>=k)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:O,k1:b,k2neg:I,k2:A}}function Is(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function ds(r,e){const t={};for(let n of Object.keys(e))t[n]=r[n]===void 0?e[n]:r[n];return Ar(t.lowS,"lowS"),Ar(t.prehash,"prehash"),t.format!==void 0&&Is(t.format),t}class Dd extends Error{constructor(e=""){super(e)}}const Gt={Err:Dd,_tlv:{encode:(r,e)=>{const{Err:t}=Gt;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,s=Fn(n);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=n>127?Fn(s.length/2|128):"";return Fn(r)+i+s+e},decode(r,e){const{Err:t}=Gt;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const h=s&127;if(!h)throw new t("tlv.decode(long): indefinite length not supported");if(h>4)throw new t("tlv.decode(long): byte length is too big");const b=e.subarray(n,n+h);if(b.length!==h)throw new t("tlv.decode: length bytes not complete");if(b[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const A of b)o=o<<8|A;if(n+=h,o<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(n,n+o);if(c.length!==o)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=Gt;if(r<Qt)throw new e("integer: negative integers are not allowed");let t=Fn(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=Gt;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return bi(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=Gt,s=Ke("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:h}=n.decode(2,i),{v:b,l:A}=n.decode(2,h);if(A.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(b)}},hexFromSig(r){const{_tlv:e,_int:t}=Gt,n=e.encode(2,t.encode(r.r)),s=e.encode(2,t.encode(r.s)),i=n+s;return e.encode(48,i)}},Qt=BigInt(0),Vr=BigInt(1),Sc=BigInt(2),qn=BigInt(3),jd=BigInt(4);function qr(r,e){const{BYTES:t}=r;let n;if(typeof e=="bigint")n=e;else{let s=Ke("private key",e);try{n=r.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function qd(r,e={}){const t=uc("weierstrass",r,e),{Fp:n,Fn:s}=t;let i=t.CURVE;const{h:o,n:c}=i;Bn(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:h}=e;if(h&&(!n.is0(i.a)||typeof h.beta!="bigint"||!Array.isArray(h.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const b=Ac(n,s);function A(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function O(V,g,a){const{x:d,y:m}=g.toAffine(),_=n.toBytes(d);if(Ar(a,"isCompressed"),a){A();const E=!n.isOdd(m);return zt(kc(E),_)}else return zt(Uint8Array.of(4),_,n.toBytes(m))}function I(V){Dt(V,void 0,"Point");const{publicKey:g,publicKeyUncompressed:a}=b,d=V.length,m=V[0],_=V.subarray(1);if(d===g&&(m===2||m===3)){const E=n.fromBytes(_);if(!n.isValid(E))throw new Error("bad point: is not on curve, wrong x");const B=T(E);let M;try{M=n.sqrt(B)}catch(l){const w=l instanceof Error?": "+l.message:"";throw new Error("bad point: is not on curve, sqrt error"+w)}A();const v=n.isOdd(M);return(m&1)===1!==v&&(M=n.neg(M)),{x:E,y:M}}else if(d===a&&m===4){const E=n.BYTES,B=n.fromBytes(_.subarray(0,E)),M=n.fromBytes(_.subarray(E,E*2));if(!F(B,M))throw new Error("bad point: is not on curve");return{x:B,y:M}}else throw new Error(`bad point: got length ${d}, expected compressed=${g} or uncompressed=${a}`)}const k=e.toBytes||O,C=e.fromBytes||I;function T(V){const g=n.sqr(V),a=n.mul(g,V);return n.add(n.add(a,n.mul(V,i.a)),i.b)}function F(V,g){const a=n.sqr(g),d=T(V);return n.eql(a,d)}if(!F(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const q=n.mul(n.pow(i.a,qn),jd),H=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(q,H)))throw new Error("bad curve params: a or b");function Z(V,g,a=!1){if(!n.isValid(g)||a&&n.is0(g))throw new Error(`bad point coordinate ${V}`);return g}function te(V){if(!(V instanceof L))throw new Error("ProjectivePoint expected")}function X(V){if(!h||!h.basises)throw new Error("no endo");return Fd(V,h.basises,s.ORDER)}const oe=si((V,g)=>{const{X:a,Y:d,Z:m}=V;if(n.eql(m,n.ONE))return{x:a,y:d};const _=V.is0();g==null&&(g=_?n.ONE:n.inv(m));const E=n.mul(a,g),B=n.mul(d,g),M=n.mul(m,g);if(_)return{x:n.ZERO,y:n.ZERO};if(!n.eql(M,n.ONE))throw new Error("invZ was invalid");return{x:E,y:B}}),pe=si(V=>{if(V.is0()){if(e.allowInfinityPoint&&!n.is0(V.Y))return;throw new Error("bad point: ZERO")}const{x:g,y:a}=V.toAffine();if(!n.isValid(g)||!n.isValid(a))throw new Error("bad point: x or y not field elements");if(!F(g,a))throw new Error("bad point: equation left != right");if(!V.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function le(V,g,a,d,m){return a=new L(n.mul(a.X,V),a.Y,a.Z),g=oi(d,g),a=oi(m,a),g.add(a)}class L{constructor(g,a,d){this.X=Z("x",g),this.Y=Z("y",a,!0),this.Z=Z("z",d),Object.freeze(this)}static CURVE(){return i}static fromAffine(g){const{x:a,y:d}=g||{};if(!g||!n.isValid(a)||!n.isValid(d))throw new Error("invalid affine point");if(g instanceof L)throw new Error("projective point not allowed");return n.is0(a)&&n.is0(d)?L.ZERO:new L(a,d,n.ONE)}static fromBytes(g){const a=L.fromAffine(C(Dt(g,void 0,"point")));return a.assertValidity(),a}static fromHex(g){return L.fromBytes(Ke("pointHex",g))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(g=8,a=!0){return z.createCache(this,g),a||this.multiply(qn),this}assertValidity(){pe(this)}hasEvenY(){const{y:g}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(g)}equals(g){te(g);const{X:a,Y:d,Z:m}=this,{X:_,Y:E,Z:B}=g,M=n.eql(n.mul(a,B),n.mul(_,m)),v=n.eql(n.mul(d,B),n.mul(E,m));return M&&v}negate(){return new L(this.X,n.neg(this.Y),this.Z)}double(){const{a:g,b:a}=i,d=n.mul(a,qn),{X:m,Y:_,Z:E}=this;let B=n.ZERO,M=n.ZERO,v=n.ZERO,u=n.mul(m,m),l=n.mul(_,_),w=n.mul(E,E),S=n.mul(m,_);return S=n.add(S,S),v=n.mul(m,E),v=n.add(v,v),B=n.mul(g,v),M=n.mul(d,w),M=n.add(B,M),B=n.sub(l,M),M=n.add(l,M),M=n.mul(B,M),B=n.mul(S,B),v=n.mul(d,v),w=n.mul(g,w),S=n.sub(u,w),S=n.mul(g,S),S=n.add(S,v),v=n.add(u,u),u=n.add(v,u),u=n.add(u,w),u=n.mul(u,S),M=n.add(M,u),w=n.mul(_,E),w=n.add(w,w),u=n.mul(w,S),B=n.sub(B,u),v=n.mul(w,l),v=n.add(v,v),v=n.add(v,v),new L(B,M,v)}add(g){te(g);const{X:a,Y:d,Z:m}=this,{X:_,Y:E,Z:B}=g;let M=n.ZERO,v=n.ZERO,u=n.ZERO;const l=i.a,w=n.mul(i.b,qn);let S=n.mul(a,_),P=n.mul(d,E),W=n.mul(m,B),ee=n.add(a,d),se=n.add(_,E);ee=n.mul(ee,se),se=n.add(S,P),ee=n.sub(ee,se),se=n.add(a,m);let Be=n.add(_,B);return se=n.mul(se,Be),Be=n.add(S,W),se=n.sub(se,Be),Be=n.add(d,m),M=n.add(E,B),Be=n.mul(Be,M),M=n.add(P,W),Be=n.sub(Be,M),u=n.mul(l,se),M=n.mul(w,W),u=n.add(M,u),M=n.sub(P,u),u=n.add(P,u),v=n.mul(M,u),P=n.add(S,S),P=n.add(P,S),W=n.mul(l,W),se=n.mul(w,se),P=n.add(P,W),W=n.sub(S,W),W=n.mul(l,W),se=n.add(se,W),S=n.mul(P,se),v=n.add(v,S),S=n.mul(Be,se),M=n.mul(ee,M),M=n.sub(M,S),S=n.mul(ee,P),u=n.mul(Be,u),u=n.add(u,S),new L(M,v,u)}subtract(g){return this.add(g.negate())}is0(){return this.equals(L.ZERO)}multiply(g){const{endo:a}=e;if(!s.isValidNot0(g))throw new Error("invalid scalar: out of range");let d,m;const _=E=>z.cached(this,E,B=>br(L,B));if(a){const{k1neg:E,k1:B,k2neg:M,k2:v}=X(g),{p:u,f:l}=_(B),{p:w,f:S}=_(v);m=l.add(S),d=le(a.beta,u,w,E,M)}else{const{p:E,f:B}=_(g);d=E,m=B}return br(L,[d,m])[0]}multiplyUnsafe(g){const{endo:a}=e,d=this;if(!s.isValid(g))throw new Error("invalid scalar: out of range");if(g===Qt||d.is0())return L.ZERO;if(g===Vr)return d;if(z.hasCache(this))return this.multiply(g);if(a){const{k1neg:m,k1:_,k2neg:E,k2:B}=X(g),{p1:M,p2:v}=rf(L,d,_,B);return le(a.beta,M,v,m,E)}else return z.unsafe(d,g)}multiplyAndAddUnsafe(g,a,d){const m=this.multiplyUnsafe(a).add(g.multiplyUnsafe(d));return m.is0()?void 0:m}toAffine(g){return oe(this,g)}isTorsionFree(){const{isTorsionFree:g}=e;return o===Vr?!0:g?g(L,this):z.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:g}=e;return o===Vr?this:g?g(L,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(g=!0){return Ar(g,"isCompressed"),this.assertValidity(),k(L,this,g)}toHex(g=!0){return _r(this.toBytes(g))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(g=!0){return this.toBytes(g)}_setWindowSize(g){this.precompute(g)}static normalizeZ(g){return br(L,g)}static msm(g,a){return cc(L,s,g,a)}static fromPrivateKey(g){return L.BASE.multiply(qr(s,g))}}L.BASE=new L(i.Gx,i.Gy,n.ONE),L.ZERO=new L(n.ZERO,n.ONE,n.ZERO),L.Fp=n,L.Fn=s;const U=s.BITS,z=new ac(L,e.endo?Math.ceil(U/2):U);return L.BASE.precompute(8),L}function kc(r){return Uint8Array.of(r?2:3)}function Ac(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function zd(r,e={}){const{Fn:t}=r,n=e.randomBytes||Hs,s=Object.assign(Ac(r.Fp,t),{seed:ic(t.ORDER)});function i(k){try{return!!qr(t,k)}catch{return!1}}function o(k,C){const{publicKey:T,publicKeyUncompressed:F}=s;try{const q=k.length;return C===!0&&q!==T||C===!1&&q!==F?!1:!!r.fromBytes(k)}catch{return!1}}function c(k=n(s.seed)){return Ql(Dt(k,s.seed,"seed"),t.ORDER)}function h(k,C=!0){return r.BASE.multiply(qr(t,k)).toBytes(C)}function b(k){const C=c(k);return{secretKey:C,publicKey:h(C)}}function A(k){if(typeof k=="bigint")return!1;if(k instanceof r)return!0;const{secretKey:C,publicKey:T,publicKeyUncompressed:F}=s;if(t.allowedLengths||C===T)return;const q=Ke("key",k).length;return q===T||q===F}function O(k,C,T=!0){if(A(k)===!0)throw new Error("first arg must be private key");if(A(C)===!1)throw new Error("second arg must be public key");const F=qr(t,k);return r.fromHex(C).multiply(F).toBytes(T)}return Object.freeze({getPublicKey:h,getSharedSecret:O,keygen:b,Point:r,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:i,randomPrivateKey:c,normPrivateKeyToScalar:k=>qr(t,k),precompute(k=8,C=r.BASE){return C.precompute(k,!1)}},lengths:s})}function $d(r,e,t={}){Fa(e),Bn(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||Hs,s=t.hmac||((a,...d)=>Ec(e,a,zt(...d))),{Fp:i,Fn:o}=r,{ORDER:c,BITS:h}=o,{keygen:b,getPublicKey:A,getSharedSecret:O,utils:I,lengths:k}=zd(r,t),C={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},T="compact";function F(a){const d=c>>Vr;return a>d}function q(a,d){if(!o.isValidNot0(d))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return d}function H(a,d){Is(d);const m=k.signature,_=d==="compact"?m:d==="recovered"?m+1:void 0;return Dt(a,_,`${d} signature`)}class Z{constructor(d,m,_){this.r=q("r",d),this.s=q("s",m),_!=null&&(this.recovery=_),Object.freeze(this)}static fromBytes(d,m=T){H(d,m);let _;if(m==="der"){const{r:v,s:u}=Gt.toSig(Dt(d));return new Z(v,u)}m==="recovered"&&(_=d[0],m="compact",d=d.subarray(1));const E=o.BYTES,B=d.subarray(0,E),M=d.subarray(E,E*2);return new Z(o.fromBytes(B),o.fromBytes(M),_)}static fromHex(d,m){return this.fromBytes(ii(d),m)}addRecoveryBit(d){return new Z(this.r,this.s,d)}recoverPublicKey(d){const m=i.ORDER,{r:_,s:E,recovery:B}=this;if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");if(c*Sc<m&&B>1)throw new Error("recovery id is ambiguous for h>1 curve");const v=B===2||B===3?_+c:_;if(!i.isValid(v))throw new Error("recovery id 2 or 3 invalid");const u=i.toBytes(v),l=r.fromBytes(zt(kc((B&1)===0),u)),w=o.inv(v),S=X(Ke("msgHash",d)),P=o.create(-S*w),W=o.create(E*w),ee=r.BASE.multiplyUnsafe(P).add(l.multiplyUnsafe(W));if(ee.is0())throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return F(this.s)}toBytes(d=T){if(Is(d),d==="der")return ii(Gt.hexFromSig(this));const m=o.toBytes(this.r),_=o.toBytes(this.s);if(d==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return zt(Uint8Array.of(this.recovery),m,_)}return zt(m,_)}toHex(d){return _r(this.toBytes(d))}assertValidity(){}static fromCompact(d){return Z.fromBytes(Ke("sig",d),"compact")}static fromDER(d){return Z.fromBytes(Ke("sig",d),"der")}normalizeS(){return this.hasHighS()?new Z(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return _r(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return _r(this.toBytes("compact"))}}const te=t.bits2int||function(d){if(d.length>8192)throw new Error("input is too large");const m=bi(d),_=d.length*8-h;return _>0?m>>BigInt(_):m},X=t.bits2int_modN||function(d){return o.create(te(d))},oe=An(h);function pe(a){return Bs("num < 2^"+h,a,Qt,oe),o.toBytes(a)}function le(a,d){return Dt(a,void 0,"message"),d?Dt(e(a),void 0,"prehashed message"):a}function L(a,d,m){if(["recovered","canonical"].some(P=>P in m))throw new Error("sign() legacy options not supported");const{lowS:_,prehash:E,extraEntropy:B}=ds(m,C);a=le(a,E);const M=X(a),v=qr(o,d),u=[pe(v),pe(M)];if(B!=null&&B!==!1){const P=B===!0?n(k.secretKey):B;u.push(Ke("extraEntropy",P))}const l=zt(...u),w=M;function S(P){const W=te(P);if(!o.isValidNot0(W))return;const ee=o.inv(W),se=r.BASE.multiply(W).toAffine(),Be=o.create(se.x);if(Be===Qt)return;const Ie=o.create(ee*o.create(w+Be*v));if(Ie===Qt)return;let Me=(se.x===Be?0:2)|Number(se.y&Vr),Ut=Ie;return _&&F(Ie)&&(Ut=o.neg(Ie),Me^=1),new Z(Be,Ut,Me)}return{seed:l,k2sig:S}}function U(a,d,m={}){a=Ke("message",a);const{seed:_,k2sig:E}=L(a,d,m);return $l(e.outputLen,o.BYTES,s)(_,E)}function z(a){let d;const m=typeof a=="string"||kn(a),_=!m&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!m&&!_)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(_)d=new Z(a.r,a.s);else if(m){try{d=Z.fromBytes(Ke("sig",a),"der")}catch(E){if(!(E instanceof Gt.Err))throw E}if(!d)try{d=Z.fromBytes(Ke("sig",a),"compact")}catch{return!1}}return d||!1}function V(a,d,m,_={}){const{lowS:E,prehash:B,format:M}=ds(_,C);if(m=Ke("publicKey",m),d=le(Ke("message",d),B),"strict"in _)throw new Error("options.strict was renamed to lowS");const v=M===void 0?z(a):Z.fromBytes(Ke("sig",a),M);if(v===!1)return!1;try{const u=r.fromBytes(m);if(E&&v.hasHighS())return!1;const{r:l,s:w}=v,S=X(d),P=o.inv(w),W=o.create(S*P),ee=o.create(l*P),se=r.BASE.multiplyUnsafe(W).add(u.multiplyUnsafe(ee));return se.is0()?!1:o.create(se.x)===l}catch{return!1}}function g(a,d,m={}){const{prehash:_}=ds(m,C);return d=le(d,_),Z.fromBytes(a,"recovered").recoverPublicKey(d).toBytes()}return Object.freeze({keygen:b,getPublicKey:A,getSharedSecret:O,utils:I,lengths:k,Point:r,sign:U,verify:V,recoverPublicKey:g,Signature:Z,hash:e})}function Vd(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp;let n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Rr(e.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),i={Fp:t,Fn:s,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:i}}function Zd(r){const{CURVE:e,curveOpts:t}=Vd(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,hash:r.hash,ecdsaOpts:n}}function Kd(r,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},r,rc(t.Fn.ORDER,t.Fn.BITS))})}function Wd(r){const{CURVE:e,curveOpts:t,hash:n,ecdsaOpts:s}=Zd(r),i=qd(e,t),o=$d(i,n,s);return Kd(r,o)}function Hd(r,e){const t=n=>Wd({...r,hash:n});return{...t(e),create:t}}const no={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Gd={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},oa=BigInt(2);function Jd(r){const e=no.p,t=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),h=BigInt(88),b=r*r*r%e,A=b*b*r%e,O=Ze(A,t,e)*A%e,I=Ze(O,t,e)*A%e,k=Ze(I,oa,e)*b%e,C=Ze(k,s,e)*k%e,T=Ze(C,i,e)*C%e,F=Ze(T,c,e)*T%e,q=Ze(F,h,e)*F%e,H=Ze(q,c,e)*T%e,Z=Ze(H,t,e)*A%e,te=Ze(Z,o,e)*C%e,X=Ze(te,n,e)*b%e,oe=Ze(X,oa,e);if(!Rs.eql(Rs.sqr(oe),r))throw new Error("Cannot find square root");return oe}const Rs=Rr(no.p,{sqrt:Jd}),Yd=Hd({...no,Fp:Rs,lowS:!0,endo:Gd},Va);In.utils.randomPrivateKey;In.getPublicKey;function aa(r){try{return In.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Bc=(r,e)=>In.sign(r,e.slice(0,32)),Xd=In.verify,Yr=r=>xe.Buffer.isBuffer(r)?r:r instanceof Uint8Array?xe.Buffer.from(r.buffer,r.byteOffset,r.byteLength):xe.Buffer.from(r);class Qd{constructor(e){Object.assign(this,e)}encode(){return xe.Buffer.from(is.serialize(Zn,this))}static decode(e){return is.deserialize(Zn,this,e)}static decodeUnchecked(e){return is.deserializeUnchecked(Zn,this,e)}}const Zn=new Map;var Ic;const eh=32,hr=32;function th(r){return r._bn!==void 0}let ca=1;class he extends Qd{constructor(e){if(super({}),this._bn=void 0,th(e))this._bn=e._bn;else{if(typeof e=="string"){const t=gt.decode(e);if(t.length!=hr)throw new Error("Invalid public key input");this._bn=new Ho(t)}else this._bn=new Ho(e);if(this._bn.byteLength()>hr)throw new Error("Invalid public key input")}}static unique(){const e=new he(ca);return ca+=1,new he(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return gt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(xe.Buffer);if(e.length===hr)return e;const t=xe.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const s=xe.Buffer.concat([e.toBuffer(),xe.Buffer.from(t),n.toBuffer()]),i=Xo(s);return new he(i)}static createProgramAddressSync(e,t){let n=xe.Buffer.alloc(0);e.forEach(function(i){if(i.length>eh)throw new TypeError("Max seed length exceeded");n=xe.Buffer.concat([n,Yr(i)])}),n=xe.Buffer.concat([n,t.toBuffer(),xe.Buffer.from("ProgramDerivedAddress")]);const s=Xo(n);if(aa(s))throw new Error("Invalid seeds, address must fall off the curve");return new he(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,s;for(;n!=0;){try{const i=e.concat(xe.Buffer.from([n]));s=this.createProgramAddressSync(i,t)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new he(e);return aa(t.toBytes())}}Ic=he;he.default=new Ic("11111111111111111111111111111111");Zn.set(he,{kind:"struct",fields:[["_bn","u256"]]});new he("BPFLoader1111111111111111111111111111111111");const Zr=1232,io=127,di=64;class Rc extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Rc.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Mc extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Mc.prototype,"name",{value:"TransactionExpiredTimeoutError"});class an extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(an.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class hi{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Se=(r="publicKey")=>R.blob(32,r),rh=(r="signature")=>R.blob(64,r),zr=(r="string")=>{const e=R.struct([R.u32("length"),R.u32("lengthPadding"),R.blob(R.offset(R.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,o)=>t(i,o).chars.toString(),s.encode=(i,o,c)=>{const h={chars:xe.Buffer.from(i,"utf8")};return n(h,o,c)},s.alloc=i=>R.u32().span+R.u32().span+xe.Buffer.from(i,"utf8").length,s},nh=(r="authorized")=>R.struct([Se("staker"),Se("withdrawer")],r),ih=(r="lockup")=>R.struct([R.ns64("unixTimestamp"),R.ns64("epoch"),Se("custodian")],r),sh=(r="voteInit")=>R.struct([Se("nodePubkey"),Se("authorizedVoter"),Se("authorizedWithdrawer"),R.u8("commission")],r),oh=(r="voteAuthorizeWithSeedArgs")=>R.struct([R.u32("voteAuthorizationType"),Se("currentAuthorityDerivedKeyOwnerPubkey"),zr("currentAuthorityDerivedKeySeed"),Se("newAuthorized")],r);function Ct(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Ot(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function Pe(r,e){if(!r)throw new Error(e||"Assertion failed")}class Si{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,s=o=>{const c=o.toBase58();let h=n.get(c);return h===void 0&&(h={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(c,h)),h},i=s(t);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const c of o.keys){const h=s(c.pubkey);h.isSigner||=c.isSigner,h.isWritable||=c.isWritable}}return new Si(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Pe(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,h])=>h.isSigner&&h.isWritable),n=e.filter(([,h])=>h.isSigner&&!h.isWritable),s=e.filter(([,h])=>!h.isSigner&&h.isWritable),i=e.filter(([,h])=>!h.isSigner&&!h.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Pe(t.length>0,"Expected at least one writable signer key");const[h]=t[0];Pe(h===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...t.map(([h])=>new he(h)),...n.map(([h])=>new he(h)),...s.map(([h])=>new he(h)),...i.map(([h])=>new he(h))];return[o,c]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,t){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const c=new he(i),h=e.findIndex(b=>b.equals(c));h>=0&&(Pe(h<256,"Max lookup table index exceeded"),n.push(h),s.push(c),this.keyMetaMap.delete(i))}return[n,s]}}const Tc="Reached end of buffer unexpectedly";function Yt(r){if(r.length===0)throw new Error(Tc);return r.shift()}function Lt(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(Tc);return r.splice(...e)}class rr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new he(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:gt.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new hi(this.staticAccountKeys)}static compile(e){const t=Si.compile(e.instructions,e.payerKey),[n,s]=t.getMessageComponents(),o=new hi(s).compileInstructions(e.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:gt.encode(c.data)}));return new rr({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,i=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Ot(t,e);const n=this.instructions.map(O=>{const{accounts:I,programIdIndex:k}=O,C=Array.from(gt.decode(O.data));let T=[];Ot(T,I.length);let F=[];return Ot(F,C.length),{programIdIndex:k,keyIndicesCount:xe.Buffer.from(T),keyIndices:I,dataLength:xe.Buffer.from(F),data:C}});let s=[];Ot(s,n.length);let i=xe.Buffer.alloc(Zr);xe.Buffer.from(s).copy(i);let o=s.length;n.forEach(O=>{const k=R.struct([R.u8("programIdIndex"),R.blob(O.keyIndicesCount.length,"keyIndicesCount"),R.seq(R.u8("keyIndex"),O.keyIndices.length,"keyIndices"),R.blob(O.dataLength.length,"dataLength"),R.seq(R.u8("userdatum"),O.data.length,"data")]).encode(O,i,o);o+=k}),i=i.slice(0,o);const c=R.struct([R.blob(1,"numRequiredSignatures"),R.blob(1,"numReadonlySignedAccounts"),R.blob(1,"numReadonlyUnsignedAccounts"),R.blob(t.length,"keyCount"),R.seq(Se("key"),e,"keys"),Se("recentBlockhash")]),h={numRequiredSignatures:xe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:xe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:xe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:xe.Buffer.from(t),keys:this.accountKeys.map(O=>Yr(O.toBytes())),recentBlockhash:gt.decode(this.recentBlockhash)};let b=xe.Buffer.alloc(2048);const A=c.encode(h,b);return i.copy(b,A),b.slice(0,A+i.length)}static from(e){let t=[...e];const n=Yt(t);if(n!==(n&io))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Yt(t),i=Yt(t),o=Ct(t);let c=[];for(let I=0;I<o;I++){const k=Lt(t,0,hr);c.push(new he(xe.Buffer.from(k)))}const h=Lt(t,0,hr),b=Ct(t);let A=[];for(let I=0;I<b;I++){const k=Yt(t),C=Ct(t),T=Lt(t,0,C),F=Ct(t),q=Lt(t,0,F),H=gt.encode(xe.Buffer.from(q));A.push({programIdIndex:k,accounts:T,data:H})}const O={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:gt.encode(xe.Buffer.from(h)),accountKeys:c,instructions:A};return new rr(O)}}class fn{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new hi(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)t.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)t.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Si.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const A of i){const O=t.extractTableLookup(A);if(O!==void 0){const[I,{writable:k,readonly:C}]=O;n.push(I),s.writable.push(...k),s.readonly.push(...C)}}const[o,c]=t.getMessageComponents(),b=new hi(c,s).compileInstructions(e.instructions);return new fn({header:o,staticAccountKeys:c,recentBlockhash:e.recentBlockhash,compiledInstructions:b,addressTableLookups:n})}serialize(){const e=Array();Ot(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();Ot(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Ot(i,this.addressTableLookups.length);const o=R.struct([R.u8("prefix"),R.struct([R.u8("numRequiredSignatures"),R.u8("numReadonlySignedAccounts"),R.u8("numReadonlyUnsignedAccounts")],"header"),R.blob(e.length,"staticAccountKeysLength"),R.seq(Se(),this.staticAccountKeys.length,"staticAccountKeys"),Se("recentBlockhash"),R.blob(n.length,"instructionsLength"),R.blob(t.length,"serializedInstructions"),R.blob(i.length,"addressTableLookupsLength"),R.blob(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(Zr),b=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(A=>A.toBytes()),recentBlockhash:gt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,b)}serializeInstructions(){let e=0;const t=new Uint8Array(Zr);for(const n of this.compiledInstructions){const s=Array();Ot(s,n.accountKeyIndexes.length);const i=Array();Ot(i,n.data.length);const o=R.struct([R.u8("programIdIndex"),R.blob(s.length,"encodedAccountKeyIndexesLength"),R.seq(R.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),R.blob(i.length,"encodedDataLength"),R.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Zr);for(const n of this.addressTableLookups){const s=Array();Ot(s,n.writableIndexes.length);const i=Array();Ot(i,n.readonlyIndexes.length);const o=R.struct([Se("accountKey"),R.blob(s.length,"encodedWritableIndexesLength"),R.seq(R.u8(),n.writableIndexes.length,"writableIndexes"),R.blob(i.length,"encodedReadonlyIndexesLength"),R.seq(R.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=Yt(t),s=n&io;Pe(n!==s,"Expected versioned message but received legacy message");const i=s;Pe(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Yt(t),numReadonlySignedAccounts:Yt(t),numReadonlyUnsignedAccounts:Yt(t)},c=[],h=Ct(t);for(let C=0;C<h;C++)c.push(new he(Lt(t,0,hr)));const b=gt.encode(Lt(t,0,hr)),A=Ct(t),O=[];for(let C=0;C<A;C++){const T=Yt(t),F=Ct(t),q=Lt(t,0,F),H=Ct(t),Z=new Uint8Array(Lt(t,0,H));O.push({programIdIndex:T,accountKeyIndexes:q,data:Z})}const I=Ct(t),k=[];for(let C=0;C<I;C++){const T=new he(Lt(t,0,hr)),F=Ct(t),q=Lt(t,0,F),H=Ct(t),Z=Lt(t,0,H);k.push({accountKey:T,writableIndexes:q,readonlyIndexes:Z})}return new fn({header:o,staticAccountKeys:c,recentBlockhash:b,compiledInstructions:O,addressTableLookups:k})}}const so={deserializeMessageVersion(r){const e=r[0],t=e&io;return t===e?"legacy":t},deserialize:r=>{const e=so.deserializeMessageVersion(r);if(e==="legacy")return rr.from(r);if(e===0)return fn.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let cr=(function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r})({});const ah=xe.Buffer.alloc(di).fill(0);class ua{constructor(e){this.keys=void 0,this.programId=void 0,this.data=xe.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Xt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new ua(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let T=0;T<t.length;T++)if(t[T].programId===void 0)throw new Error(`Transaction instruction index ${T} has undefined program id`);const s=[],i=[];t.forEach(T=>{T.keys.forEach(q=>{i.push({...q})});const F=T.programId.toString();s.includes(F)||s.push(F)}),s.forEach(T=>{i.push({pubkey:new he(T),isSigner:!1,isWritable:!1})});const o=[];i.forEach(T=>{const F=T.pubkey.toString(),q=o.findIndex(H=>H.pubkey.toString()===F);q>-1?(o[q].isWritable=o[q].isWritable||T.isWritable,o[q].isSigner=o[q].isSigner||T.isSigner):o.push(T)}),o.sort(function(T,F){if(T.isSigner!==F.isSigner)return T.isSigner?-1:1;if(T.isWritable!==F.isWritable)return T.isWritable?-1:1;const q={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return T.pubkey.toBase58().localeCompare(F.pubkey.toBase58(),"en",q)});const c=o.findIndex(T=>T.pubkey.equals(n));if(c>-1){const[T]=o.splice(c,1);T.isSigner=!0,T.isWritable=!0,o.unshift(T)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const T of this.signatures){const F=o.findIndex(q=>q.pubkey.equals(T.publicKey));if(F>-1)o[F].isSigner||(o[F].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${T.publicKey.toString()}`)}let h=0,b=0,A=0;const O=[],I=[];o.forEach(({pubkey:T,isSigner:F,isWritable:q})=>{F?(O.push(T.toString()),h+=1,q||(b+=1)):(I.push(T.toString()),q||(A+=1))});const k=O.concat(I),C=t.map(T=>{const{data:F,programId:q}=T;return{programIdIndex:k.indexOf(q.toString()),accounts:T.keys.map(H=>k.indexOf(H.pubkey.toString())),data:gt.encode(F)}});return C.forEach(T=>{Pe(T.programIdIndex>=0),T.accounts.forEach(F=>Pe(F>=0))}),new rr({header:{numRequiredSignatures:h,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:A},accountKeys:k,recentBlockhash:e,instructions:C})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,i)=>t[i].equals(s.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const s=n.toString();return t.has(s)?!1:(t.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(s=>{const i=Bc(n,s.secretKey);this._addSignature(s.publicKey,Yr(i))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Pe(t.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=xe.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?t&&(n.missing||=[]).push(i):Xd(s,e,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,t);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:t}=this,n=[];Ot(n,t.length);const s=n.length+t.length*64+e.length,i=xe.Buffer.alloc(s);return Pe(t.length<256),xe.Buffer.from(n).copy(i,0),t.forEach(({signature:o},c)=>{o!==null&&(Pe(o.length===64,"signature has invalid length"),xe.Buffer.from(o).copy(i,n.length+c*64))}),e.copy(i,n.length+t.length*64),Pe(i.length<=Zr,`Transaction too large: ${i.length} > ${Zr}`),i}get keys(){return Pe(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Pe(this.instructions.length===1),this.instructions[0].programId}get data(){return Pe(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Ct(t);let s=[];for(let i=0;i<n;i++){const o=Lt(t,0,di);s.push(gt.encode(xe.Buffer.from(o)))}return Xt.populate(rr.from(t),s)}static populate(e,t=[]){const n=new Xt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((s,i)=>{const o={signature:s==gt.encode(ah)?null:gt.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=e.accountKeys[o];return{pubkey:c,isSigner:n.signatures.some(h=>h.publicKey.toString()===c.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new ua({keys:i,programId:e.accountKeys[s.programIdIndex],data:gt.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class oo{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Pe(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(di));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Ot(t,this.signatures.length);const n=R.struct([R.blob(t.length,"encodedSignaturesLength"),R.seq(rh(),this.signatures.length,"signatures"),R.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let t=[...e];const n=[],s=Ct(t);for(let o=0;o<s;o++)n.push(new Uint8Array(Lt(t,0,di)));const i=so.deserialize(new Uint8Array(t));return new oo(i,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(o=>o.equals(s.publicKey));Pe(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Bc(t,s.secretKey)}}addSignature(e,t){Pe(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Pe(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const ch=160,uh=64,lh=ch/uh,fh=1e3/lh;new he("SysvarC1ock11111111111111111111111111111111");new he("SysvarEpochSchedu1e111111111111111111111111");new he("Sysvar1nstructions1111111111111111111111111");new he("SysvarRecentB1ockHashes11111111111111111111");new he("SysvarRent111111111111111111111111111111111");new he("SysvarRewards111111111111111111111111111111");new he("SysvarS1otHashes111111111111111111111111111");new he("SysvarS1otHistory11111111111111111111111111");new he("SysvarStakeHistory1111111111111111111111111");class la extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(e){case"send":c=`Transaction ${t} resulted in an error. 
${n}. `+i+o;break;case"simulate":c=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:c=`Unknown action '${(h=>h)(e)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,t(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class ue extends Error{constructor({code:e,message:t,data:n},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}function Dr(r){return new Promise(e=>setTimeout(e,r))}const dh=R.nu64("lamportsPerSignature"),Cc=R.struct([R.u32("version"),R.u32("state"),Se("authorizedPubkey"),Se("nonce"),R.struct([dh],"feeCalculator")]);Cc.span;class ao{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Cc.decode(Yr(e),0);return new ao({authorizedPubkey:new he(t.authorizedPubkey),nonce:new he(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function Xr(r){const e=R.blob(8,r),t=e.decode.bind(e),n=e.encode.bind(e),s=e,i=rd();return s.decode=(o,c)=>{const h=t(o,c);return i.decode(h)},s.encode=(o,c,h)=>{const b=i.encode(o);return n(b,c,h)},s}Object.freeze({Create:{index:0,layout:R.struct([R.u32("instruction"),R.ns64("lamports"),R.ns64("space"),Se("programId")])},Assign:{index:1,layout:R.struct([R.u32("instruction"),Se("programId")])},Transfer:{index:2,layout:R.struct([R.u32("instruction"),Xr("lamports")])},CreateWithSeed:{index:3,layout:R.struct([R.u32("instruction"),Se("base"),zr("seed"),R.ns64("lamports"),R.ns64("space"),Se("programId")])},AdvanceNonceAccount:{index:4,layout:R.struct([R.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:R.struct([R.u32("instruction"),R.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:R.struct([R.u32("instruction"),Se("authorized")])},AuthorizeNonceAccount:{index:7,layout:R.struct([R.u32("instruction"),Se("authorized")])},Allocate:{index:8,layout:R.struct([R.u32("instruction"),R.ns64("space")])},AllocateWithSeed:{index:9,layout:R.struct([R.u32("instruction"),Se("base"),zr("seed"),R.ns64("space"),Se("programId")])},AssignWithSeed:{index:10,layout:R.struct([R.u32("instruction"),Se("base"),zr("seed"),Se("programId")])},TransferWithSeed:{index:11,layout:R.struct([R.u32("instruction"),Xr("lamports"),zr("seed"),Se("programId")])},UpgradeNonceAccount:{index:12,layout:R.struct([R.u32("instruction")])}});new he("11111111111111111111111111111111");new he("BPFLoader2111111111111111111111111111111111");function hh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var hs,fa;function ph(){if(fa)return hs;fa=1;var r=Object.prototype.toString,e=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function t(n,s){var i,o,c,h,b,A,O;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),s);if(O=r.call(n),O==="[object Array]"){for(c="[",o=n.length-1,i=0;i<o;i++)c+=t(n[i],!0)+",";return o>-1&&(c+=t(n[i],!0)),c+"]"}else if(O==="[object Object]"){for(h=e(n).sort(),o=h.length,c="",i=0;i<o;)b=h[i],A=t(n[b],!1),A!==void 0&&(c&&(c+=","),c+=JSON.stringify(b)+":"+A),i++;return"{"+c+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return hs=function(n){var s=t(n,!1);if(s!==void 0)return""+s},hs}var mh=ph(),da=hh(mh);const sn=32;function ps(r){let e=0;for(;r>1;)r/=2,e++;return e}function gh(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class yh{constructor(e,t,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=ps(gh(e+sn+1))-ps(sn)-1,n=this.getSlotsInEpoch(t),s=e-(n-sn);return[t,s]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=t%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*sn:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+ps(sn)):this.slotsPerEpoch}}var wh=globalThis.fetch;class bh extends Pd{constructor(e,t,n){const s=i=>{const o=Nd(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,t,n),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function vh(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const ha=56;class pa{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=vh(_h,e),n=e.length-ha;Pe(n>=0,"lookup table is invalid"),Pe(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=R.struct([R.seq(Se(),s,"addresses")]).decode(e.slice(ha));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new he(t.authority[0]):void 0,addresses:i.map(o=>new he(o))}}}const _h={index:1,layout:R.struct([R.u32("typeIndex"),Xr("deactivationSlot"),R.nu64("lastExtendedSlot"),R.u8("lastExtendedStartIndex"),R.u8(),R.seq(Se(),R.offset(R.u8(),-1),"authority")])},xh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Eh(r){const e=r.match(xh);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,s,i]=e,o=r.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),h=c==null?"":`:${c+1}`;return`${o}//${n}${h}${i}`}const je=Tn(to(he),Y(),r=>new he(r)),Oc=ro([Y(),De("base64")]),co=Tn(to(xe.Buffer),Oc,r=>xe.Buffer.from(r[0],"base64")),Sh=30*1e3;function kh(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Ce(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...s}=r;e=n,t=s}return{commitment:e,config:t}}function ma(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Lc(r){return Bt([G({jsonrpc:De("2.0"),id:Y(),result:r}),G({jsonrpc:De("2.0"),id:Y(),error:G({code:tn(),message:Y(),data:fe(ud())})})])}const Ah=Lc(tn());function _e(r){return Tn(Lc(r),Ah,e=>"error"in e?e:{...e,result:Q(e.result,r)})}function He(r){return _e(G({context:G({slot:j()}),value:r}))}function ki(r){return G({context:G({slot:j()}),value:r})}function ms(r,e){return r===0?new fn({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new he(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:gt.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new rr(e)}const Bh=G({foundation:j(),foundationTerm:j(),initial:j(),taper:j(),terminal:j()}),Ih=_e(re(ne(G({epoch:j(),effectiveSlot:j(),amount:j(),postBalance:j(),commission:fe(ne(j()))})))),Rh=re(G({slot:j(),prioritizationFee:j()})),Mh=G({total:j(),validator:j(),foundation:j(),epoch:j()}),Th=G({epoch:j(),slotIndex:j(),slotsInEpoch:j(),absoluteSlot:j(),blockHeight:fe(j()),transactionCount:fe(j())}),Ch=G({slotsPerEpoch:j(),leaderScheduleSlotOffset:j(),warmup:Vt(),firstNormalEpoch:j(),firstNormalSlot:j()}),Oh=gc(Y(),re(j())),Tr=ne(Bt([G({}),Y()])),Lh=G({err:Tr}),Nh=De("receivedSignature"),Uh=G({"solana-core":Y(),"feature-set":fe(j())}),Ph=G({program:Y(),programId:je,parsed:tn()}),Fh=G({programId:je,accounts:re(je),data:Y()}),ga=He(G({err:ne(Bt([G({}),Y()])),logs:ne(re(Y())),accounts:fe(ne(re(ne(G({executable:Vt(),owner:Y(),lamports:j(),data:re(Y()),rentEpoch:fe(j())}))))),unitsConsumed:fe(j()),returnData:fe(ne(G({programId:Y(),data:ro([Y(),De("base64")])}))),innerInstructions:fe(ne(re(G({index:j(),instructions:re(Bt([Ph,Fh]))}))))})),Dh=He(G({byIdentity:gc(Y(),re(j())),range:G({firstSlot:j(),lastSlot:j()})}));function jh(r,e,t,n,s,i){const o=t||wh;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let h;return n&&(h=async(A,O)=>{const I=await new Promise((k,C)=>{try{n(A,O,(T,F)=>k([T,F]))}catch(T){C(T)}});return await o(...I)}),new Od(async(A,O)=>{const I={method:"POST",body:A,agent:c,headers:Object.assign({"Content-Type":"application/json"},e||{},j0)};try{let k=5,C,T=500;for(;h?C=await h(r,I):C=await o(r,I),!(C.status!==429||s===!0||(k-=1,k===0));)console.error(`Server responded with ${C.status} ${C.statusText}.  Retrying after ${T}ms delay...`),await Dr(T),T*=2;const F=await C.text();C.ok?O(null,F):O(new Error(`${C.status} ${C.statusText}: ${F}`))}catch(k){k instanceof Error&&O(k)}},{})}function qh(r){return(e,t)=>new Promise((n,s)=>{r.request(e,t,(i,o)=>{if(i){s(i);return}n(o)})})}function zh(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const s=e.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}t(o)})})}const $h=_e(Bh),Vh=_e(Mh),Zh=_e(Rh),Kh=_e(Th),Wh=_e(Ch),Hh=_e(Oh),Gh=_e(j()),Jh=He(G({total:j(),circulating:j(),nonCirculating:j(),nonCirculatingAccounts:re(je)})),Ms=G({amount:Y(),uiAmount:ne(j()),decimals:j(),uiAmountString:fe(Y())}),Yh=He(re(G({address:je,amount:Y(),uiAmount:ne(j()),decimals:j(),uiAmountString:fe(Y())}))),Xh=He(re(G({pubkey:je,account:G({executable:Vt(),owner:je,lamports:j(),data:co,rentEpoch:j()})}))),Ts=G({program:Y(),parsed:tn(),space:j()}),Qh=He(re(G({pubkey:je,account:G({executable:Vt(),owner:je,lamports:j(),data:Ts,rentEpoch:j()})}))),e0=He(re(G({lamports:j(),address:je}))),dn=G({executable:Vt(),owner:je,lamports:j(),data:co,rentEpoch:j()}),t0=G({pubkey:je,account:dn}),r0=Tn(Bt([to(xe.Buffer),Ts]),Bt([Oc,Ts]),r=>Array.isArray(r)?Q(r,co):r),Cs=G({executable:Vt(),owner:je,lamports:j(),data:r0,rentEpoch:j()}),n0=G({pubkey:je,account:Cs}),i0=G({state:Bt([De("active"),De("inactive"),De("activating"),De("deactivating")]),active:j(),inactive:j()}),s0=_e(re(G({signature:Y(),slot:j(),err:Tr,memo:ne(Y()),blockTime:fe(ne(j()))}))),o0=_e(re(G({signature:Y(),slot:j(),err:Tr,memo:ne(Y()),blockTime:fe(ne(j()))}))),a0=G({subscription:j(),result:ki(dn)}),c0=G({pubkey:je,account:dn}),u0=G({subscription:j(),result:ki(c0)}),l0=G({parent:j(),slot:j(),root:j()}),f0=G({subscription:j(),result:l0}),d0=Bt([G({type:Bt([De("firstShredReceived"),De("completed"),De("optimisticConfirmation"),De("root")]),slot:j(),timestamp:j()}),G({type:De("createdBank"),parent:j(),slot:j(),timestamp:j()}),G({type:De("frozen"),slot:j(),timestamp:j(),stats:G({numTransactionEntries:j(),numSuccessfulTransactions:j(),numFailedTransactions:j(),maxTransactionsPerEntry:j()})}),G({type:De("dead"),slot:j(),timestamp:j(),err:Y()})]),h0=G({subscription:j(),result:d0}),p0=G({subscription:j(),result:ki(Bt([Lh,Nh]))}),m0=G({subscription:j(),result:j()}),g0=G({pubkey:Y(),gossip:ne(Y()),tpu:ne(Y()),rpc:ne(Y()),version:ne(Y())}),ya=G({votePubkey:Y(),nodePubkey:Y(),activatedStake:j(),epochVoteAccount:Vt(),epochCredits:re(ro([j(),j(),j()])),commission:j(),lastVote:j(),rootSlot:ne(j())}),y0=_e(G({current:re(ya),delinquent:re(ya)})),w0=Bt([De("processed"),De("confirmed"),De("finalized")]),b0=G({slot:j(),confirmations:ne(j()),err:Tr,confirmationStatus:fe(w0)}),v0=He(re(ne(b0))),_0=_e(j()),Nc=G({accountKey:je,writableIndexes:re(j()),readonlyIndexes:re(j())}),uo=G({signatures:re(Y()),message:G({accountKeys:re(Y()),header:G({numRequiredSignatures:j(),numReadonlySignedAccounts:j(),numReadonlyUnsignedAccounts:j()}),instructions:re(G({accounts:re(j()),data:Y(),programIdIndex:j()})),recentBlockhash:Y(),addressTableLookups:fe(re(Nc))})}),Uc=G({pubkey:je,signer:Vt(),writable:Vt(),source:fe(Bt([De("transaction"),De("lookupTable")]))}),Pc=G({accountKeys:re(Uc),signatures:re(Y())}),Fc=G({parsed:tn(),program:Y(),programId:je}),Dc=G({accounts:re(je),data:Y(),programId:je}),x0=Bt([Dc,Fc]),E0=Bt([G({parsed:tn(),program:Y(),programId:Y()}),G({accounts:re(Y()),data:Y(),programId:Y()})]),jc=Tn(x0,E0,r=>"accounts"in r?Q(r,Dc):Q(r,Fc)),qc=G({signatures:re(Y()),message:G({accountKeys:re(Uc),instructions:re(jc),recentBlockhash:Y(),addressTableLookups:fe(ne(re(Nc)))})}),pi=G({accountIndex:j(),mint:Y(),owner:fe(Y()),programId:fe(Y()),uiTokenAmount:Ms}),zc=G({writable:re(je),readonly:re(je)}),Ai=G({err:Tr,fee:j(),innerInstructions:fe(ne(re(G({index:j(),instructions:re(G({accounts:re(j()),data:Y(),programIdIndex:j()}))})))),preBalances:re(j()),postBalances:re(j()),logMessages:fe(ne(re(Y()))),preTokenBalances:fe(ne(re(pi))),postTokenBalances:fe(ne(re(pi))),loadedAddresses:fe(zc),computeUnitsConsumed:fe(j()),costUnits:fe(j())}),lo=G({err:Tr,fee:j(),innerInstructions:fe(ne(re(G({index:j(),instructions:re(jc)})))),preBalances:re(j()),postBalances:re(j()),logMessages:fe(ne(re(Y()))),preTokenBalances:fe(ne(re(pi))),postTokenBalances:fe(ne(re(pi))),loadedAddresses:fe(zc),computeUnitsConsumed:fe(j()),costUnits:fe(j())}),rn=Bt([De(0),De("legacy")]),Cr=G({pubkey:Y(),lamports:j(),postBalance:ne(j()),rewardType:ne(Y()),commission:fe(ne(j()))}),S0=_e(ne(G({blockhash:Y(),previousBlockhash:Y(),parentSlot:j(),transactions:re(G({transaction:uo,meta:ne(Ai),version:fe(rn)})),rewards:fe(re(Cr)),blockTime:ne(j()),blockHeight:ne(j())}))),k0=_e(ne(G({blockhash:Y(),previousBlockhash:Y(),parentSlot:j(),rewards:fe(re(Cr)),blockTime:ne(j()),blockHeight:ne(j())}))),A0=_e(ne(G({blockhash:Y(),previousBlockhash:Y(),parentSlot:j(),transactions:re(G({transaction:Pc,meta:ne(Ai),version:fe(rn)})),rewards:fe(re(Cr)),blockTime:ne(j()),blockHeight:ne(j())}))),B0=_e(ne(G({blockhash:Y(),previousBlockhash:Y(),parentSlot:j(),transactions:re(G({transaction:qc,meta:ne(lo),version:fe(rn)})),rewards:fe(re(Cr)),blockTime:ne(j()),blockHeight:ne(j())}))),I0=_e(ne(G({blockhash:Y(),previousBlockhash:Y(),parentSlot:j(),transactions:re(G({transaction:Pc,meta:ne(lo),version:fe(rn)})),rewards:fe(re(Cr)),blockTime:ne(j()),blockHeight:ne(j())}))),R0=_e(ne(G({blockhash:Y(),previousBlockhash:Y(),parentSlot:j(),rewards:fe(re(Cr)),blockTime:ne(j()),blockHeight:ne(j())}))),M0=_e(ne(G({blockhash:Y(),previousBlockhash:Y(),parentSlot:j(),transactions:re(G({transaction:uo,meta:ne(Ai)})),rewards:fe(re(Cr)),blockTime:ne(j())}))),wa=_e(ne(G({blockhash:Y(),previousBlockhash:Y(),parentSlot:j(),signatures:re(Y()),blockTime:ne(j())}))),gs=_e(ne(G({slot:j(),meta:ne(Ai),blockTime:fe(ne(j())),transaction:uo,version:fe(rn)}))),zn=_e(ne(G({slot:j(),transaction:qc,meta:ne(lo),blockTime:fe(ne(j())),version:fe(rn)}))),T0=He(G({blockhash:Y(),lastValidBlockHeight:j()})),C0=He(Vt()),O0=G({slot:j(),numTransactions:j(),numSlots:j(),samplePeriodSecs:j()}),L0=_e(re(O0)),N0=He(ne(G({feeCalculator:G({lamportsPerSignature:j()})}))),U0=_e(Y()),P0=_e(Y()),F0=G({err:Tr,logs:re(Y()),signature:Y()}),D0=G({result:ki(F0),subscription:j()}),j0={"solana-client":"js/1.0.0-maintenance"};class Im{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const b={};return async A=>{const{commitment:O,config:I}=Ce(A),k=this._buildArgs([],O,void 0,I),C=da(k);return b[C]=b[C]??(async()=>{try{const T=await this._rpcRequest("getBlockHeight",k),F=Q(T,_e(j()));if("error"in F)throw new ue(F.error,"failed to get block height information");return F.result}finally{delete b[C]}})(),await b[C]}})();let n,s,i,o,c,h;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,s=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,c=t.disableRetryOnRateLimit,h=t.httpAgent),this._rpcEndpoint=kh(e),this._rpcWsEndpoint=n||Eh(e),this._rpcClient=jh(e,s,i,o,c,h),this._rpcRequest=qh(this._rpcClient),this._rpcBatchRequest=zh(this._rpcClient),this._rpcWebSocket=new bh(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:s}=Ce(t),i=this._buildArgs([e.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),c=Q(o,He(j()));if("error"in c)throw new ue(c.error,`failed to get balance for ${e.toBase58()}`);return c.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=Q(t,_e(ne(j())));if("error"in n)throw new ue(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=Q(e,_e(j()));if("error"in t)throw new ue(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=Q(e,Gh);if("error"in t)throw new ue(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),s=Q(n,Jh);if("error"in s)throw new ue(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",n),i=Q(s,He(Ms));if("error"in i)throw new ue(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",n),i=Q(s,He(Ms));if("error"in i)throw new ue(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,n){const{commitment:s,config:i}=Ce(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),h=await this._rpcRequest("getTokenAccountsByOwner",c),b=Q(h,Xh);if("error"in b)throw new ue(b.error,`failed to get token accounts owned by account ${e.toBase58()}`);return b.result}async getParsedTokenAccountsByOwner(e,t,n){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=Q(o,Qh);if("error"in c)throw new ue(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",n),i=Q(s,e0);if("error"in i)throw new ue(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",n),i=Q(s,Yh);if("error"in i)throw new ue(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:s}=Ce(t),i=this._buildArgs([e.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=Q(o,He(ne(dn)));if("error"in c)throw new ue(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getParsedAccountInfo(e,t){const{commitment:n,config:s}=Ce(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=Q(o,He(ne(Cs)));if("error"in c)throw new ue(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:s}=Ce(t),i=e.map(b=>b.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),h=Q(c,He(re(ne(Cs))));if("error"in h)throw new ue(h.error,`failed to get info for accounts ${i}`);return h.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:s}=Ce(t),i=e.map(b=>b.toBase58()),o=this._buildArgs([i],n,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),h=Q(c,He(re(ne(dn))));if("error"in h)throw new ue(h.error,`failed to get info for accounts ${i}`);return h.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:s,config:i}=Ce(t),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:n??i?.epoch}),c=await this._rpcRequest("getStakeActivation",o),h=Q(c,_e(i0));if("error"in h)throw new ue(h.error,`failed to get Stake Activation ${e.toBase58()}`);return h.result}async getProgramAccounts(e,t){const{commitment:n,config:s}=Ce(t),{encoding:i,...o}=s||{},c=this._buildArgs([e.toBase58()],n,i||"base64",{...o,...o.filters?{filters:ma(o.filters)}:null}),h=await this._rpcRequest("getProgramAccounts",c),b=re(t0),A=o.withContext===!0?Q(h,He(b)):Q(h,_e(b));if("error"in A)throw new ue(A.error,`failed to get accounts owned by program ${e.toBase58()}`);return A.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:s}=Ce(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=Q(o,_e(re(n0)));if("error"in c)throw new ue(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{const i=e;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);n=i.signature}let s;try{s=gt.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Pe(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,s,i=!1;const o=new Promise((h,b)=>{try{n=this.onSignature(t,(O,I)=>{n=void 0;const k={context:I,value:O};h({__type:cr.PROCESSED,response:k})},e);const A=new Promise(O=>{n==null?O():s=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&O()})});(async()=>{if(await A,i)return;const O=await this.getSignatureStatus(t);if(i||O==null)return;const{context:I,value:k}=O;if(k!=null)if(k?.err)b(k.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(k.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(k.confirmationStatus==="processed"||k.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,h({__type:cr.PROCESSED,response:{context:I,value:k}})}})()}catch(A){b(A)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(O=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let k=await I();if(!i){for(;k<=n;)if(await Dr(1e3),i||(k=await I(),i))return;O({__type:cr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),b=this.getCancellationPromise(t);let A;try{const O=await Promise.race([b,h,o]);if(O.__type===cr.PROCESSED)A=O.response;else throw new Rc(s)}finally{i=!0,c()}return A}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const h=new Promise(k=>{let C=i,T=null;const F=async()=>{try{const{context:q,value:H}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:n});return T=q.slot,H?.nonce}catch{return C}};(async()=>{if(C=await F(),!c)for(;;){if(i!==C){k({__type:cr.NONCE_INVALID,slotInWhichNonceDidAdvance:T});return}if(await Dr(2e3),c||(C=await F(),c))return}})()}),{abortConfirmation:b,confirmationPromise:A}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),O=this.getCancellationPromise(t);let I;try{const k=await Promise.race([O,A,h]);if(k.__type===cr.PROCESSED)I=k.response;else{let C;for(;;){const T=await this.getSignatureStatus(o);if(T==null)break;if(T.context.slot<(k.slotInWhichNonceDidAdvance??n)){await Dr(400);continue}C=T;break}if(C?.value){const T=e||"finalized",{confirmationStatus:F}=C.value;switch(T){case"processed":case"recent":if(F!=="processed"&&F!=="confirmed"&&F!=="finalized")throw new an(o);break;case"confirmed":case"single":case"singleGossip":if(F!=="confirmed"&&F!=="finalized")throw new an(o);break;case"finalized":case"max":case"root":if(F!=="finalized")throw new an(o);break;default:}I={context:C.context,value:{err:C.value.err}}}else throw new an(o)}}finally{c=!0,b()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const s=new Promise(h=>{let b=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{b=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>h({__type:cr.TIMED_OUT,timeoutMs:b}),b)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let c;try{const h=await Promise.race([o,s]);if(h.__type===cr.PROCESSED)c=h.response;else throw new Mc(t,h.timeoutMs/1e3)}finally{clearTimeout(n),i()}return c}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=Q(e,_e(re(g0)));if("error"in t)throw new ue(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),s=Q(n,y0);if("error"in s)throw new ue(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:n}=Ce(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlot",s),o=Q(i,_e(j()));if("error"in o)throw new ue(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=Ce(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=Q(i,_e(Y()));if("error"in o)throw new ue(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],s=await this._rpcRequest("getSlotLeaders",n),i=Q(s,_e(re(je)));if("error"in i)throw new ue(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:n,value:s}=await this.getSignatureStatuses([e],t);Pe(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const s=await this._rpcRequest("getSignatureStatuses",n),i=Q(s,v0);if("error"in i)throw new ue(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:n}=Ce(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=Q(i,_e(j()));if("error"in o)throw new ue(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),s=Q(n,$h);if("error"in s)throw new ue(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,n){const{commitment:s,config:i}=Ce(n),o=this._buildArgs([e.map(b=>b.toBase58())],s,void 0,{...i,epoch:t??i?.epoch}),c=await this._rpcRequest("getInflationReward",o),h=Q(c,Ih);if("error"in h)throw new ue(h.error,"failed to get inflation reward");return h.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=Q(e,Vh);if("error"in t)throw new ue(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Ce(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=Q(i,Kh);if("error"in o)throw new ue(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=Q(e,Wh);if("error"in t)throw new ue(t.error,"failed to get epoch schedule");const n=t.result;return new yh(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=Q(e,Hh);if("error"in t)throw new ue(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=Q(s,_0);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=Q(t,L0);if("error"in n)throw new ue(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=Q(s,N0);if("error"in i)throw new ue(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(e,t){const n=Yr(e.serialize()).toString("base64"),s=this._buildArgs([n],t),i=await this._rpcRequest("getFeeForMessage",s),o=Q(i,He(ne(j())));if("error"in o)throw new ue(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(o=>o.toBase58()),n=t?.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=Q(s,Zh);if("error"in i)throw new ue(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Ce(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=Q(i,T0);if("error"in o)throw new ue(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:s}=Ce(t),i=this._buildArgs([e],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=Q(o,C0);if("error"in c)throw new ue(c.error,"failed to determine if the blockhash `"+e+"`is valid");return c.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=Q(e,_e(Uh));if("error"in t)throw new ue(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=Q(e,_e(Y()));if("error"in t)throw new ue(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:s}=Ce(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=Q(o,A0);if("error"in c)throw c.error;return c.result}case"none":{const c=Q(o,k0);if("error"in c)throw c.error;return c.result}default:{const c=Q(o,S0);if("error"in c)throw c.error;const{result:h}=c;return h?{...h,transactions:h.transactions.map(({transaction:b,meta:A,version:O})=>({meta:A,transaction:{...b,message:ms(O,b.message)},version:O}))}:null}}}catch(c){throw new ue(c,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:s}=Ce(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=Q(o,I0);if("error"in c)throw c.error;return c.result}case"none":{const c=Q(o,R0);if("error"in c)throw c.error;return c.result}default:{const c=Q(o,B0);if("error"in c)throw c.error;return c.result}}}catch(c){throw new ue(c,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:c,...h}=e;n=c,t=h}const s=this._buildArgs([],n,"base64",t),i=await this._rpcRequest("getBlockProduction",s),o=Q(i,Dh);if("error"in o)throw new ue(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:s}=Ce(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getTransaction",i),c=Q(o,gs);if("error"in c)throw new ue(c.error,"failed to get transaction");const h=c.result;return h&&{...h,transaction:{...h.transaction,message:ms(h.version,h.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:s}=Ce(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=Q(o,zn);if("error"in c)throw new ue(c.error,"failed to get transaction");return c.result}async getParsedTransactions(e,t){const{commitment:n,config:s}=Ce(t),i=e.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(h=>{const b=Q(h,zn);if("error"in b)throw new ue(b.error,"failed to get transactions");return b.result})}async getTransactions(e,t){const{commitment:n,config:s}=Ce(t),i=e.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(h=>{const b=Q(h,gs);if("error"in b)throw new ue(b.error,"failed to get transactions");const A=b.result;return A&&{...A,transaction:{...A.transaction,message:ms(A.version,A.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",n),i=Q(s,M0);if("error"in i)throw new ue(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const c={...o,transactions:o.transactions.map(({transaction:h,meta:b})=>{const A=new rr(h.message);return{meta:b,transaction:{...h,message:A}}})};return{...c,transactions:c.transactions.map(({transaction:h,meta:b})=>({meta:b,transaction:Xt.populate(h.message,h.signatures)}))}}async getBlocks(e,t,n){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),i=await this._rpcRequest("getBlocks",s),o=Q(i,_e(re(j())));if("error"in o)throw new ue(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Q(s,wa);if("error"in i)throw new ue(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Q(s,wa);if("error"in i)throw new ue(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",n),i=Q(s,gs);if("error"in i)throw new ue(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new rr(o.transaction.message),h=o.transaction.signatures;return{...o,transaction:Xt.populate(c,h)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=Q(s,zn);if("error"in i)throw new ue(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const c=Q(o,zn);if("error"in c)throw new ue(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(e,t,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<i));)try{const h=await this.getConfirmedBlockSignatures(t,"finalized");h.signatures.length>0&&(s.until=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const h=await this.getConfirmedBlockSignatures(n);h.signatures.length>0&&(s.before=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(h=>h.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Q(i,s0);if("error"in o)throw new ue(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",s),o=Q(i,o0);if("error"in o)throw new ue(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=new pa({key:e,state:pa.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=ao.fromAccountData(s.data)),{context:n,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=Q(n,U0);if("error"in s)throw new ue(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Dr(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Sh;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Dr(fh/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Ce(e),s=this._buildArgs([],t,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Q(i,He(j()));if("error"in o)throw new ue(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const T=e.serialize(),F=xe.Buffer.from(T).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const q=t||{};q.encoding="base64","commitment"in q||(q.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(q.innerInstructions=t.innerInstructions);const H=[F,q],Z=await this._rpcRequest("simulateTransaction",H),te=Q(Z,ga);if("error"in te)throw new Error("failed to simulate transaction: "+te.error.message);return te.result}let s;if(e instanceof Xt){let C=e;s=new Xt,s.feePayer=C.feePayer,s.instructions=e.instructions,s.nonceInfo=C.nonceInfo,s.signatures=C.signatures}else s=Xt.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(s.nonceInfo&&i)s.sign(...i);else{let C=this._disableBlockhashCaching;for(;;){const T=await this._blockhashWithExpiryBlockHeight(C);if(s.lastValidBlockHeight=T.lastValidBlockHeight,s.recentBlockhash=T.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const F=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(F)&&!this._blockhashInfo.transactionSignatures.includes(F)){this._blockhashInfo.simulatedSignatures.push(F);break}else C=!0}}const o=s._compile(),c=o.serialize(),b=s._serialize(c).toString("base64"),A={encoding:"base64",commitment:this.commitment};if(n){const C=(Array.isArray(n)?n:o.nonProgramIds()).map(T=>T.toBase58());A.accounts={encoding:"base64",addresses:C}}i&&(A.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(A.innerInstructions=t.innerInstructions);const O=[b,A],I=await this._rpcRequest("simulateTransaction",O),k=Q(I,ga);if("error"in k){let C;if("data"in k.error&&(C=k.error.data.logs,C&&Array.isArray(C))){const T=`
    `,F=T+C.join(T);console.error(k.error.message,F)}throw new la({action:"simulate",signature:"",transactionMessage:k.error.message,logs:C})}return k.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=c.lastValidBlockHeight,e.recentBlockhash=c.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const h=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(h))o=!0;else{this._blockhashInfo.transactionSignatures.push(h);break}}}const i=e.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(e,t){const n=Yr(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},s=t&&t.skipPreflight,i=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[e,n],c=await this._rpcRequest("sendTransaction",o),h=Q(c,P0);if("error"in h){let b;throw"data"in h.error&&(b=h.error.data.logs),new la({action:s?"send":"simulate",signature:"",transactionMessage:h.error.message,logs:b})}return h.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(i=>{try{i(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:c}),!t())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!t())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(s=>{try{s(...t)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=Q(e,a0);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,s=da([e.method,t]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Pe(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:s,config:i}=Ce(n),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=Q(e,u0);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,s){const{commitment:i,config:o}=Ce(n),c=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:ma(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=Q(e,D0);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=Q(e,f0);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=Q(e,h0);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,s){const i=t||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,s){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,s)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=Q(e,p0);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const s=this._buildArgs([e],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){t(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,t,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),c=this._makeSubscription({callback:(h,b)=>{t(h,b);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=Q(e,m0);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:R.struct([R.u32("instruction"),Xr("recentSlot"),R.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:R.struct([R.u32("instruction")])},ExtendLookupTable:{index:2,layout:R.struct([R.u32("instruction"),Xr(),R.seq(Se(),R.offset(R.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:R.struct([R.u32("instruction")])},CloseLookupTable:{index:4,layout:R.struct([R.u32("instruction")])}});new he("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:R.struct([R.u8("instruction"),R.u32("units"),R.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:R.struct([R.u8("instruction"),R.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:R.struct([R.u8("instruction"),R.u32("units")])},SetComputeUnitPrice:{index:3,layout:R.struct([R.u8("instruction"),Xr("microLamports")])}});new he("ComputeBudget111111111111111111111111111111");R.struct([R.u8("numSignatures"),R.u8("padding"),R.u16("signatureOffset"),R.u16("signatureInstructionIndex"),R.u16("publicKeyOffset"),R.u16("publicKeyInstructionIndex"),R.u16("messageDataOffset"),R.u16("messageDataSize"),R.u16("messageInstructionIndex")]);new he("Ed25519SigVerify111111111111111111111111111");Yd.utils.isValidPrivateKey;R.struct([R.u8("numSignatures"),R.u16("signatureOffset"),R.u8("signatureInstructionIndex"),R.u16("ethAddressOffset"),R.u8("ethAddressInstructionIndex"),R.u16("messageDataOffset"),R.u16("messageDataSize"),R.u8("messageInstructionIndex"),R.blob(20,"ethAddress"),R.blob(64,"signature"),R.u8("recoveryId")]);new he("KeccakSecp256k11111111111111111111111111111");var $c;new he("StakeConfig11111111111111111111111111111111");class Vc{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}$c=Vc;Vc.default=new $c(0,0,he.default);Object.freeze({Initialize:{index:0,layout:R.struct([R.u32("instruction"),nh(),ih()])},Authorize:{index:1,layout:R.struct([R.u32("instruction"),Se("newAuthorized"),R.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:R.struct([R.u32("instruction")])},Split:{index:3,layout:R.struct([R.u32("instruction"),R.ns64("lamports")])},Withdraw:{index:4,layout:R.struct([R.u32("instruction"),R.ns64("lamports")])},Deactivate:{index:5,layout:R.struct([R.u32("instruction")])},Merge:{index:7,layout:R.struct([R.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:R.struct([R.u32("instruction"),Se("newAuthorized"),R.u32("stakeAuthorizationType"),zr("authoritySeed"),Se("authorityOwner")])}});new he("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:R.struct([R.u32("instruction"),sh()])},Authorize:{index:1,layout:R.struct([R.u32("instruction"),Se("newAuthorized"),R.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:R.struct([R.u32("instruction"),R.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:R.struct([R.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:R.struct([R.u32("instruction"),oh()])}});new he("Vote111111111111111111111111111111111111111");new he("Va1idator1nfo111111111111111111111111111111");G({name:Y(),website:fe(Y()),details:fe(Y()),iconUrl:fe(Y()),keybaseUsername:fe(Y())});new he("Vote111111111111111111111111111111111111111");R.struct([Se("nodePubkey"),Se("authorizedWithdrawer"),R.u8("commission"),R.nu64(),R.seq(R.struct([R.nu64("slot"),R.u32("confirmationCount")]),R.offset(R.u32(),-8),"votes"),R.u8("rootSlotValid"),R.nu64("rootSlot"),R.nu64(),R.seq(R.struct([R.nu64("epoch"),Se("authorizedVoter")]),R.offset(R.u32(),-8),"authorizedVoters"),R.struct([R.seq(R.struct([Se("authorizedPubkey"),R.nu64("epochOfLastAuthorizedSwitch"),R.nu64("targetEpoch")]),32,"buf"),R.nu64("idx"),R.u8("isEmpty")],"priorVoters"),R.nu64(),R.seq(R.struct([R.nu64("epoch"),R.nu64("credits"),R.nu64("prevCredits")]),R.offset(R.u32(),-8),"epochCredits"),R.struct([R.nu64("slot"),R.nu64("timestamp")],"lastTimestamp")]);const q0=r=>({request:r,signMessage:e=>r({method:"signMessage",params:{message:e}}),signTransaction:e=>r({method:"signTransaction",params:{transaction:e}}),signAndSendTransaction:e=>r({method:"signAndSendTransaction",params:e})});function Os(r){return Buffer.from(r.serialize({verifySignatures:!1})).toString("base64")}function Ls(r){const e=Buffer.from(r,"base64");return so.deserializeMessageVersion(e)==="legacy"?oo.deserialize(e):Xt.from(e)}function Rm(r){return async t=>{if(t.method==="connect")return await r(t);if(t.method==="signMessage")return await r(t);if(t.method==="signAndSendTransaction"){const{transaction:n,options:s}=t.params,i={transaction:Ls(n),options:s};return await r({method:"signAndSendTransaction",params:i})}if(t.method==="signTransaction"){const{transaction:n}=t.params,s={transaction:Ls(n)},{signedTransaction:i}=await r({method:"signTransaction",params:s});return{signedTransaction:Os(i)}}}}function z0(r){return async t=>{if(t.method==="connect")return await r(t);if(t.method==="signMessage")return await r(t);if(t.method==="signAndSendTransaction"){const{transaction:n}=t.params,s={transaction:Os(n)};return await r({method:"signAndSendTransaction",params:s})}if(t.method==="signTransaction"){const{transaction:n}=t.params,s={transaction:Os(n)},{signedTransaction:i}=await r({method:"signTransaction",params:s});return{signedTransaction:Ls(i)}}}}const $0=({miniAppHost:r,emitter:e})=>{let t,n=null;return{visible:!1,get onback(){return n},set onback(s){n&&e.removeListener("backNavigationTriggered",n),n=s,s&&e.addListener("backNavigationTriggered",s)},async show(){await r.updateBackState({visible:!0}),this.visible=!0},async hide(){await r.updateBackState({visible:!1}),this.visible=!1},async enableWebNavigation(){t=V0({back:this,emitter:e})},async disableWebNavigation(){t?.(),t=void 0}}};function V0({emitter:r,back:e}){const t=Z0();if(t)return K0({emitter:r,back:e,navigation:t});if(typeof window<"u")return W0({emitter:r,back:e,window})}function Z0(){if(typeof window<"u"&&window.navigation!==void 0)return window.navigation}function K0({emitter:r,back:e,navigation:t}){function n(){t.canGoBack?e.show():e.hide()}function s(){e.visible&&t.canGoBack&&t.back()}return t.addEventListener("navigatesuccess",n),r.addListener("backNavigationTriggered",s),()=>{t.removeEventListener("navigatesuccess",n),r.removeListener("backNavigationTriggered",s)}}function W0({emitter:r,back:e,window:t}){e.show();function n(){e.visible&&t.history.back()}return r.addListener("backNavigationTriggered",n),()=>{r.removeListener("backNavigationTriggered",n)}}const H0="0.1.1";function G0(){return H0}let J0=class Ns extends Error{constructor(e,t={}){const n=(()=>{if(t.cause instanceof Ns){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause?.message?t.cause.message:t.details})(),s=t.cause instanceof Ns&&t.cause.docsPath||t.docsPath,o=`https://oxlib.sh${s??""}`,c=[e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...n||s?["",n?`Details: ${n}`:void 0,s?`See: ${o}`:void 0]:[]].filter(h=>typeof h=="string").join(`
`);super(c,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${G0()}`}),this.cause=t.cause,this.details=n,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return Zc(this,e)}};function Zc(r,e){return e?.(r)?r:r&&typeof r=="object"&&"cause"in r&&r.cause?Zc(r.cause,e):e?null:r}function Kc(r,e={}){const{raw:t=!1}=e,n=r;if(t)return r;if(n.error){const{code:s}=n.error,i=s===Qr.code?Qr:s===hn.code?hn:s===xn.code?xn:s===vn.code?vn:s===wn.code?wn:s===_n.code?_n:s===yn.code?yn:s===En.code?En:s===pn.code?pn:s===mn.code?mn:s===gn.code?gn:s===bn.code?bn:Mt;throw new i(n.error)}return n.result}let Mt=class extends Error{constructor(e){const{code:t,message:n,data:s}=e;super(n),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.BaseError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.data=s}};class hn extends Mt{constructor(e={}){super({message:"Missing or invalid parameters.",...e,code:hn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidInputError"})}}Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class pn extends Mt{constructor(e={}){super({message:"Requested resource not found.",...e,code:pn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceNotFoundError"})}}Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class mn extends Mt{constructor(e={}){super({message:"Requested resource not available.",...e,code:mn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceUnavailableError"})}}Object.defineProperty(mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class gn extends Mt{constructor(e={}){super({message:"Transaction creation failed.",...e,code:gn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.TransactionRejectedError"})}}Object.defineProperty(gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class yn extends Mt{constructor(e={}){super({message:"Method is not implemented.",...e,code:yn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotSupportedError"})}}Object.defineProperty(yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class wn extends Mt{constructor(e={}){super({message:"Rate limit exceeded.",...e,code:wn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.LimitExceededError"})}}Object.defineProperty(wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class bn extends Mt{constructor(e={}){super({message:"JSON-RPC version not supported.",...e,code:bn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.VersionNotSupportedError"})}}Object.defineProperty(bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class vn extends Mt{constructor(e={}){super({message:"Input is not a valid JSON-RPC request.",...e,code:vn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidRequestError"})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class _n extends Mt{constructor(e={}){super({message:"Method does not exist.",...e,code:_n.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotFoundError"})}}Object.defineProperty(_n,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class xn extends Mt{constructor(e={}){super({message:"Invalid method parameters.",...e,code:xn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidParamsError"})}}Object.defineProperty(xn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Qr extends Mt{constructor(e={}){super({message:"Internal JSON-RPC error.",...e,code:Qr.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InternalErrorError"})}}Object.defineProperty(Qr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class En extends Mt{constructor(e={}){super({message:"Failed to parse JSON-RPC response.",...e,code:En.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ParseError"})}}Object.defineProperty(En,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Or extends Error{constructor(e,t){super(t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e,this.details=t}}class Wc extends Or{constructor({message:e="The user rejected the request."}={}){super(4001,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UserRejectedRequestError"})}}Object.defineProperty(Wc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Hc extends Or{constructor({message:e="The requested method and/or account has not been authorized by the user."}={}){super(4100,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnauthorizedError"})}}Object.defineProperty(Hc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Gc extends Or{constructor({message:e="The provider does not support the requested method."}={}){super(4200,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedMethodError"})}}Object.defineProperty(Gc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Jc extends Or{constructor({message:e="The provider is disconnected from all chains."}={}){super(4900,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DisconnectedError"})}}Object.defineProperty(Jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Yc extends Or{constructor({message:e="The provider is not connected to the requested chain."}={}){super(4901,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.ChainDisconnectedError"})}}Object.defineProperty(Yc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});function Y0(){const r=new wi;return{get eventNames(){return r.eventNames.bind(r)},get listenerCount(){return r.listenerCount.bind(r)},get listeners(){return r.listeners.bind(r)},addListener:r.addListener.bind(r),emit:r.emit.bind(r),off:r.off.bind(r),on:r.on.bind(r),once:r.once.bind(r),removeAllListeners:r.removeAllListeners.bind(r),removeListener:r.removeListener.bind(r)}}function X0(r,e={}){const{includeEvents:t=!0}=e;if(!r)throw new Q0;return{...t?{on:r.on?.bind(r),removeListener:r.removeListener?.bind(r)}:{},async request(n){const s=await r.request(n);return s&&typeof s=="object"&&"jsonrpc"in s?Kc(s):s}}}class Q0 extends J0{constructor(){super("`provider` is undefined."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.IsUndefinedError"})}}function ep(r={}){let e=r.id??0;return{prepare(t){return tp({id:e++,...t})},get id(){return e}}}function tp(r){return{...r,jsonrpc:"2.0"}}const Xc=Symbol("Comlink.proxy"),rp=Symbol("Comlink.endpoint"),np=Symbol("Comlink.releaseProxy"),ys=Symbol("Comlink.finalizer"),Kn=Symbol("Comlink.thrown"),Qc=r=>typeof r=="object"&&r!==null||typeof r=="function",ip={canHandle:r=>Qc(r)&&r[Xc],serialize(r){const{port1:e,port2:t}=new MessageChannel;return tu(r,e),[t,[t]]},deserialize(r){return r.start(),nu(r)}},sp={canHandle:r=>Qc(r)&&Kn in r,serialize({value:r}){let e;return r instanceof Error?e={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:e={isError:!1,value:r},[e,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},eu=new Map([["proxy",ip],["throw",sp]]);function op(r,e){for(const t of r)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function tu(r,e=globalThis,t=["*"]){e.addEventListener("message",function n(s){if(!s||!s.data)return;if(!op(t,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:i,type:o,path:c}=Object.assign({path:[]},s.data),h=(s.data.argumentList||[]).map(gr);let b;try{const A=c.slice(0,-1).reduce((I,k)=>I[k],r),O=c.reduce((I,k)=>I[k],r);switch(o){case"GET":b=O;break;case"SET":A[c.slice(-1)[0]]=gr(s.data.value),b=!0;break;case"APPLY":b=O.apply(A,h);break;case"CONSTRUCT":{const I=new O(...h);b=dp(I)}break;case"ENDPOINT":{const{port1:I,port2:k}=new MessageChannel;tu(r,k),b=fp(I,[I])}break;case"RELEASE":b=void 0;break;default:return}}catch(A){b={value:A,[Kn]:0}}Promise.resolve(b).catch(A=>({value:A,[Kn]:0})).then(A=>{const[O,I]=yi(A);e.postMessage(Object.assign(Object.assign({},O),{id:i}),I),o==="RELEASE"&&(e.removeEventListener("message",n),ru(e),ys in r&&typeof r[ys]=="function"&&r[ys]())}).catch(A=>{const[O,I]=yi({value:new TypeError("Unserializable return value"),[Kn]:0});e.postMessage(Object.assign(Object.assign({},O),{id:i}),I)})}),e.start&&e.start()}function ap(r){return r.constructor.name==="MessagePort"}function ru(r){ap(r)&&r.close()}function nu(r,e){const t=new Map;return r.addEventListener("message",function(s){const{data:i}=s;if(!i||!i.id)return;const o=t.get(i.id);if(o)try{o(i)}finally{t.delete(i.id)}}),Us(r,t,[],e)}function $n(r){if(r)throw new Error("Proxy has been released and is not useable")}function iu(r){return jr(r,new Map,{type:"RELEASE"}).then(()=>{ru(r)})}const mi=new WeakMap,gi="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{const e=(mi.get(r)||0)-1;mi.set(r,e),e===0&&iu(r)});function cp(r,e){const t=(mi.get(e)||0)+1;mi.set(e,t),gi&&gi.register(r,e,r)}function up(r){gi&&gi.unregister(r)}function Us(r,e,t=[],n=function(){}){let s=!1;const i=new Proxy(n,{get(o,c){if($n(s),c===np)return()=>{up(i),iu(r),e.clear(),s=!0};if(c==="then"){if(t.length===0)return{then:()=>i};const h=jr(r,e,{type:"GET",path:t.map(b=>b.toString())}).then(gr);return h.then.bind(h)}return Us(r,e,[...t,c])},set(o,c,h){$n(s);const[b,A]=yi(h);return jr(r,e,{type:"SET",path:[...t,c].map(O=>O.toString()),value:b},A).then(gr)},apply(o,c,h){$n(s);const b=t[t.length-1];if(b===rp)return jr(r,e,{type:"ENDPOINT"}).then(gr);if(b==="bind")return Us(r,e,t.slice(0,-1));const[A,O]=ba(h);return jr(r,e,{type:"APPLY",path:t.map(I=>I.toString()),argumentList:A},O).then(gr)},construct(o,c){$n(s);const[h,b]=ba(c);return jr(r,e,{type:"CONSTRUCT",path:t.map(A=>A.toString()),argumentList:h},b).then(gr)}});return cp(i,r),i}function lp(r){return Array.prototype.concat.apply([],r)}function ba(r){const e=r.map(yi);return[e.map(t=>t[0]),lp(e.map(t=>t[1]))]}const su=new WeakMap;function fp(r,e){return su.set(r,e),r}function dp(r){return Object.assign(r,{[Xc]:!0})}function hp(r,e=globalThis,t="*"){return{postMessage:(n,s)=>r.postMessage(n,t,s),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function yi(r){for(const[e,t]of eu)if(t.canHandle(r)){const[n,s]=t.serialize(r);return[{type:"HANDLER",name:e,value:n},s]}return[{type:"RAW",value:r},su.get(r)||[]]}function gr(r){switch(r.type){case"HANDLER":return eu.get(r.name).deserialize(r.value);case"RAW":return r.value}}function jr(r,e,t,n){return new Promise(s=>{const i=pp();e.set(i,s),r.start&&r.start(),r.postMessage(Object.assign({id:i},t),n)})}function pp(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const mp={postMessage(){},addEventListener:()=>{},removeEventListener:()=>{}},gp={postMessage:r=>{window.ReactNativeWebView.postMessage(JSON.stringify(r))},addEventListener:(r,e,...t)=>{document.addEventListener("FarcasterFrameCallback",e,...t)},removeEventListener:(r,e)=>{document.removeEventListener("FarcasterFrameCallback",e)}},yp=typeof window>"u"?mp:window?.ReactNativeWebView?gp:hp(window?.parent??window),we=nu(yp),Tm=we,fo=Y0(),wp=ep();function bp({code:r,details:e}){switch(r){case 4001:return new Wc;case 4100:return new Hc;case 4200:return new Gc;case 4900:return new Jc;case 4901:return new Yc;default:return new Or(r,e??"Unknown provider RPC error")}}const Sn=X0({...fo,async request(r){const e=wp.prepare(r);try{const t=await we.ethProviderRequestV2(e).then(n=>Kc(n,{request:e,raw:!0}));if(t.error)throw bp(t.error);return t.result}catch(t){if(t instanceof Error&&t.message.match(/cannot read property 'apply'/i))return await we.ethProviderRequest(e);throw t instanceof Or||t instanceof Mt?t:new Qr({message:t instanceof Error?t.message:void 0})}}});async function vp(){try{const r=await we.getCapabilities();return!r.includes("wallet.getEthereumProvider")&&!r.includes("wallet.getEvmProvider")?void 0:Sn}catch{return Sn}}function ou(r){const e=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(r)});window.dispatchEvent(e);const t=()=>window.dispatchEvent(e);return window.addEventListener("eip6963:requestProvider",t),()=>window.removeEventListener("eip6963:requestProvider",t)}typeof document<"u"&&(document.addEventListener("eip6963:requestProvider",()=>{we.eip6963RequestProvider()}),document.addEventListener("FarcasterFrameEthProviderEvent",r=>{if(r instanceof MessageEvent){const e=r.data;fo.emit(e.event,...e.params)}}),document.addEventListener("FarcasterFrameEvent",r=>{if(r instanceof MessageEvent){const e=r.data;e.event==="eip6963:announceProvider"&&ou({info:e.info,provider:Sn})}}));typeof window<"u"&&(window.addEventListener("eip6963:requestProvider",()=>{we.eip6963RequestProvider()}),window.addEventListener("message",r=>{if(r instanceof MessageEvent&&r.data.type==="frameEthProviderEvent"){const e=r.data;fo.emit(e.event,...e.params)}}),window.addEventListener("message",r=>{if(r instanceof MessageEvent&&r.data.type==="frameEvent"){const e=r.data.event;e.event==="eip6963:announceProvider"&&ou({info:e.info,provider:Sn})}}));new TextEncoder;const au=new TextDecoder,_p=r=>{const e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},xp=r=>{let e=r;e instanceof Uint8Array&&(e=au.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return _p(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}},Ep=xp;function Sp(r){return typeof r=="object"&&r!==null}function kp(r){if(!Sp(r)||Object.prototype.toString.call(r)!=="[object Object]")return!1;if(Object.getPrototypeOf(r)===null)return!0;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}class It extends Error{constructor(e,t){super(e,t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}It.code="ERR_JOSE_GENERIC";class Ap extends It{constructor(e,t,n="unspecified",s="unspecified"){super(e,{cause:{claim:n,reason:s,payload:t}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=n,this.reason=s,this.payload=t}}Ap.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class Bp extends It{constructor(e,t,n="unspecified",s="unspecified"){super(e,{cause:{claim:n,reason:s,payload:t}}),this.code="ERR_JWT_EXPIRED",this.claim=n,this.reason=s,this.payload=t}}Bp.code="ERR_JWT_EXPIRED";class Ip extends It{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}Ip.code="ERR_JOSE_ALG_NOT_ALLOWED";class Rp extends It{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}Rp.code="ERR_JOSE_NOT_SUPPORTED";class Mp extends It{constructor(e="decryption operation failed",t){super(e,t),this.code="ERR_JWE_DECRYPTION_FAILED"}}Mp.code="ERR_JWE_DECRYPTION_FAILED";class Tp extends It{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}Tp.code="ERR_JWE_INVALID";class Cp extends It{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}Cp.code="ERR_JWS_INVALID";class ur extends It{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}ur.code="ERR_JWT_INVALID";class Op extends It{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}Op.code="ERR_JWK_INVALID";class Lp extends It{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}Lp.code="ERR_JWKS_INVALID";class Np extends It{constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_NO_MATCHING_KEY"}}Np.code="ERR_JWKS_NO_MATCHING_KEY";class Up extends It{constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}Up.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class Pp extends It{constructor(e="request timed out",t){super(e,t),this.code="ERR_JWKS_TIMEOUT"}}Pp.code="ERR_JWKS_TIMEOUT";class Fp extends It{constructor(e="signature verification failed",t){super(e,t),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}Fp.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";function Dp(r){if(typeof r!="string")throw new ur("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:t}=r.split(".");if(t===5)throw new ur("Only JWTs using Compact JWS serialization can be decoded");if(t!==3)throw new ur("Invalid JWT");if(!e)throw new ur("JWTs must contain a payload");let n;try{n=Ep(e)}catch{throw new ur("Failed to base64url decode the payload")}let s;try{s=JSON.parse(au.decode(n))}catch{throw new ur("Failed to parse the decoded payload as JSON")}if(!kp(s))throw new ur("Invalid JWT Claims Set");return s}function jp(r){return Dp(r)}class Bi extends Error{constructor(e,t={}){const n=(()=>{if(t.cause instanceof Bi){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause&&"details"in t.cause&&typeof t.cause.details=="string"?t.cause.details:t.cause?.message?t.cause.message:t.details})(),s=[e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...n?["",n?`Details: ${n}`:void 0]:[]].filter(i=>typeof i=="string").join(`
`);super(s,t.cause?{cause:t.cause}:void 0),this.name="BaseError",this.cause=t.cause,this.details=n,this.shortMessage=e}}class cu extends Bi{constructor({status:e}){super(`Request failed with status ${e}`),this.name="RequestFailedError"}}class qp extends Bi{constructor(e){super(e),this.name="InvalidToken"}}async function zp({origin:r}){const e=await fetch(`${r}/nonce`,{method:"POST"});if(!e.ok)throw new cu({status:e.status});return await e.json()}async function $p({origin:r},e){const t=await fetch(`${r}/verify-siwf`,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(!t.ok)throw new cu({status:t.status});const n=await t.json();if(n.valid===!1)throw new qp(n.message??"unknown");return{token:n.token}}function Vp(r={}){return{origin:r.origin??"https://auth.farcaster.xyz"}}function Zp(r={}){const e=Vp(r);return{generateNonce:()=>zp(e),verifySiwf:t=>$p(e,t)}}const Kp=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Wp=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Hp(r){const{scheme:e,statement:t,...n}=r.match(Kp)?.groups??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:c,requestId:h,...b}=r.match(Wp)?.groups??{},A=r.split("Resources:")[1]?.split(`
- `).slice(1);return{...n,...b,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...c?{notBefore:new Date(c)}:{},...h?{requestId:h}:{},...A?{resources:A}:{},...e?{scheme:e}:{},...t?{statement:t}:{}}}const Ps=(()=>{let r,e;async function t(n){const s=Zp({origin:n.quickAuthServerOrigin}),{nonce:i}=await s.generateNonce(),o=await we.signIn({nonce:i,acceptAuthAddress:!0});if(o.result){const c=Hp(o.result.message);if(!c.domain)throw new Error("Missing domain on SIWE message");const h=await s.verifySiwf({domain:c.domain,message:o.result.message,signature:o.result.signature});return r={token:h.token,payload:jp(h.token)},h}throw o.error.type==="rejected_by_user"?new js:new Error("Unreachable")}return{get token(){if(r&&new Date(r.payload.exp*1e3)>new Date(Date.now()+15e3))return r.token},async getToken(n={}){const s=n.force??!1;return r&&!s&&new Date(r.payload.exp*1e3)>new Date(Date.now()+15e3)?{token:r.token}:(e||(e=t(n)),e.finally(()=>{e=void 0}),e)},async fetch(n,s){const{token:i}=await this.getToken(),o=new Headers(s?.headers);return o.set("Authorization",`Bearer ${i}`),fetch(n,{...s,headers:o})}}})(),Cm=Object.freeze(Object.defineProperty({__proto__:null,quickAuth:Ps},Symbol.toStringTag,{value:"Module"}));function Gp(){const r=new wi;return{get eventNames(){return r.eventNames.bind(r)},get listenerCount(){return r.listenerCount.bind(r)},get listeners(){return r.listeners.bind(r)},addListener:r.addListener.bind(r),emit:r.emit.bind(r),off:r.off.bind(r),on:r.on.bind(r),once:r.once.bind(r),removeAllListeners:r.removeAllListeners.bind(r),removeListener:r.removeListener.bind(r)}}const St=Gp(),{solanaProviderRequest:va}=we;let uu;va&&(uu=q0(z0(va)));async function _a(){let r;try{r=await we.getCapabilities()}catch{}if(r?.includes("wallet.getSolanaProvider"))return uu}let xa=null;async function Jp(r=1e3){if(xa===!0)return!0;if(typeof window>"u"||!window.ReactNativeWebView&&window===window.parent)return!1;const e=await Promise.race([we.context.then(t=>!!t),new Promise(t=>{setTimeout(()=>t(!1),r)})]).catch(()=>!1);return e&&(xa=!0),e}const Ea=async()=>{const r=await we.addFrame();if(r.result)return r.result;throw r.error.type==="invalid_domain_manifest"?new Sa:r.error.type==="rejected_by_user"?new ka:new Error("Unreachable")},Om={...St,getCapabilities:we.getCapabilities,getChains:we.getChains,isInMiniApp:Jp,context:we.context,back:$0({miniAppHost:we,emitter:St}),quickAuth:Ps,actions:{setPrimaryButton:we.setPrimaryButton.bind(we),ready:async(r={})=>await we.ready(r),close:we.close.bind(we),viewCast:we.viewCast.bind(we),viewProfile:we.viewProfile.bind(we),openMiniApp:we.openMiniApp.bind(we),signIn:async r=>{const e=await we.signIn({...r,acceptAuthAddress:r.acceptAuthAddress??!0});if(e.result)return e.result;throw e.error.type==="rejected_by_user"?new js:new Error("Unreachable")},openUrl:r=>{const e=typeof r=="string"?r:r.url;return we.openUrl(e.trim())},addFrame:Ea,addMiniApp:Ea,composeCast(r={}){return we.composeCast(r)},viewToken:we.viewToken.bind(we),sendToken:we.sendToken.bind(we),swapToken:we.swapToken.bind(we),requestCameraAndMicrophoneAccess:we.requestCameraAndMicrophoneAccess.bind(we)},experimental:{getSolanaProvider:_a,signManifest:async r=>{const e=await we.signManifest(r);if(e.result)return e.result;throw e.error.type==="rejected_by_user"?new Aa:e.error.type==="invalid_domain"?new Ba:e.error.type==="generic_error"?new Ia(e.error.message):new Error("Unreachable")},quickAuth(r){return Ps.getToken(r)}},wallet:{ethProvider:Sn,getEthereumProvider:vp,getSolanaProvider:_a},haptics:{impactOccurred:we.impactOccurred.bind(we),notificationOccurred:we.notificationOccurred.bind(we),selectionChanged:we.selectionChanged.bind(we)}};typeof document<"u"&&document.addEventListener("FarcasterFrameEvent",r=>{if(r instanceof MessageEvent){const e=r.data;e.event==="primary_button_clicked"?St.emit("primaryButtonClicked"):e.event==="miniapp_added"?St.emit("miniAppAdded",{notificationDetails:e.notificationDetails}):e.event==="miniapp_add_rejected"?St.emit("miniAppAddRejected",{reason:e.reason}):e.event==="miniapp_removed"?St.emit("miniAppRemoved"):e.event==="notifications_enabled"?St.emit("notificationsEnabled",{notificationDetails:e.notificationDetails}):e.event==="notifications_disabled"?St.emit("notificationsDisabled"):e.event==="back_navigation_triggered"&&St.emit("backNavigationTriggered")}});typeof window<"u"&&window.addEventListener("message",r=>{if(r instanceof MessageEvent&&r.data.type==="frameEvent"){const e=r.data.event;e.event==="primary_button_clicked"?St.emit("primaryButtonClicked"):e.event==="miniapp_added"?St.emit("miniAppAdded",{notificationDetails:e.notificationDetails}):e.event==="miniapp_add_rejected"?St.emit("miniAppAddRejected",{reason:e.reason}):e.event==="miniapp_removed"?St.emit("miniAppRemoved"):e.event==="notifications_enabled"?St.emit("notificationsEnabled",{notificationDetails:e.notificationDetails}):e.event==="notifications_disabled"?St.emit("notificationsDisabled"):e.event==="back_navigation_triggered"&&St.emit("backNavigationTriggered")}});export{tm as AddMiniApp,mm as Back,rm as ComposeCast,gm as Context,lu as DEFAULT_READY_OPTIONS,Qp as Errors,Em as Ethereum,nm as Haptics,ym as Manifest,im as OpenMiniApp,Cm as QuickAuth,sm as Ready,om as RequestCameraAndMicrophoneAccess,am as SendToken,um as SignIn,lm as SignManifest,Im as SolanaConnection,fm as SwapToken,dm as ViewCast,hm as ViewProfile,pm as ViewToken,Hu as actionLaunchFrameSchema,Gu as actionLaunchMiniAppSchema,Yu as actionSchema,Ju as actionViewTokenSchema,Ku as aspectRatioSchema,Xu as buttonSchema,Na as buttonTitleSchema,$u as caip19TokenSchema,yl as chains,en as createSimpleStringSchema,q0 as createSolanaWalletProvider,Om as default,ll as descriptionSchema,Sm as domainManifestSchema,To as domainMiniAppConfigSchema,Zu as domainSchema,Wu as encodedJsonFarcasterSignatureSchema,tl as eventMiniAppAddedSchema,rl as eventMiniAppRemovedSchema,nl as eventNotificationsEnabledSchema,Tm as frameHost,Zs as hexColorSchema,wm as jsonFarcasterSignatureHeaderSchema,Qu as miniAppEmbedNextSchema,we as miniAppHost,sl as miniAppHostCapabilityList,Vs as miniAppNameSchema,gl as noindexSchema,Ua as notificationDetailsSchema,il as notificationsDisabledSchema,ml as ogDescriptionSchema,pl as ogTitleSchema,ol as primaryCategories,al as primaryCategorySchema,Ps as quickAuth,bl as requiredCapabilitiesSchema,wl as requiredChainsSchema,bm as safeParseFrameEmbed,el as safeParseMiniAppEmbed,fl as screenshotUrlsSchema,Om as sdk,At as secureUrlSchema,vm as sendNotificationRequestSchema,_m as sendNotificationResponseSchema,xm as serverEventSchema,ul as subtitleSchema,hl as taglineSchema,dl as tagsSchema,z0 as unwrapSolanaProviderRequest,cl as versionSchema,Rm as wrapSolanaProviderRequest};
